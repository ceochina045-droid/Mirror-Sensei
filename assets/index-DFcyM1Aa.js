(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function HT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ah={exports:{}},hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function oR(){if(H_)return hl;H_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:o,key:c,ref:r!==void 0?r:null,props:l}}return hl.Fragment=e,hl.jsx=t,hl.jsxs=t,hl}var z_;function sR(){return z_||(z_=1,Ah.exports=oR()),Ah.exports}var q=sR(),Ch={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function rR(){if(Y_)return Ie;Y_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function I(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,D={};function Q(O,ee,le){this.props=O,this.context=ee,this.refs=D,this.updater=le||L}Q.prototype.isReactComponent={},Q.prototype.setState=function(O,ee){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ee,"setState")},Q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function oe(){}oe.prototype=Q.prototype;function Z(O,ee,le){this.props=O,this.context=ee,this.refs=D,this.updater=le||L}var se=Z.prototype=new oe;se.constructor=Z,B(se,Q.prototype),se.isPureReactComponent=!0;var fe=Array.isArray;function ue(){}var x={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function b(O,ee,le){var de=le.ref;return{$$typeof:n,type:O,key:ee,ref:de!==void 0?de:null,props:le}}function U(O,ee){return b(O.type,ee,O.props)}function P(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function G(O){var ee={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(le){return ee[le]})}var M=/\/+/g;function De(O,ee){return typeof O=="object"&&O!==null&&O.key!=null?G(""+O.key):ee.toString(36)}function at(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ue,ue):(O.status="pending",O.then(function(ee){O.status==="pending"&&(O.status="fulfilled",O.value=ee)},function(ee){O.status==="pending"&&(O.status="rejected",O.reason=ee)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function $(O,ee,le,de,Ee){var be=typeof O;(be==="undefined"||be==="boolean")&&(O=null);var Ue=!1;if(O===null)Ue=!0;else switch(be){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(O.$$typeof){case n:case e:Ue=!0;break;case v:return Ue=O._init,$(Ue(O._payload),ee,le,de,Ee)}}if(Ue)return Ee=Ee(O),Ue=de===""?"."+De(O,0):de,fe(Ee)?(le="",Ue!=null&&(le=Ue.replace(M,"$&/")+"/"),$(Ee,ee,le,"",function(Ae){return Ae})):Ee!=null&&(P(Ee)&&(Ee=U(Ee,le+(Ee.key==null||O&&O.key===Ee.key?"":(""+Ee.key).replace(M,"$&/")+"/")+Ue)),ee.push(Ee)),1;Ue=0;var _t=de===""?".":de+":";if(fe(O))for(var lt=0;lt<O.length;lt++)de=O[lt],be=_t+De(de,lt),Ue+=$(de,ee,le,be,Ee);else if(lt=I(O),typeof lt=="function")for(O=lt.call(O),lt=0;!(de=O.next()).done;)de=de.value,be=_t+De(de,lt++),Ue+=$(de,ee,le,be,Ee);else if(be==="object"){if(typeof O.then=="function")return $(at(O),ee,le,de,Ee);throw ee=String(O),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function re(O,ee,le){if(O==null)return O;var de=[],Ee=0;return $(O,de,"","",function(be){return ee.call(le,be,Ee++)}),de}function ye(O){if(O._status===-1){var ee=O._result;ee=ee(),ee.then(function(le){(O._status===0||O._status===-1)&&(O._status=1,O._result=le)},function(le){(O._status===0||O._status===-1)&&(O._status=2,O._result=le)}),O._status===-1&&(O._status=0,O._result=ee)}if(O._status===1)return O._result.default;throw O._result}var Be=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Qe={map:re,forEach:function(O,ee,le){re(O,function(){ee.apply(this,arguments)},le)},count:function(O){var ee=0;return re(O,function(){ee++}),ee},toArray:function(O){return re(O,function(ee){return ee})||[]},only:function(O){if(!P(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ie.Activity=T,Ie.Children=Qe,Ie.Component=Q,Ie.Fragment=t,Ie.Profiler=r,Ie.PureComponent=Z,Ie.StrictMode=o,Ie.Suspense=y,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(O){return x.H.useMemoCache(O)}},Ie.cache=function(O){return function(){return O.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(O,ee,le){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var de=B({},O.props),Ee=O.key;if(ee!=null)for(be in ee.key!==void 0&&(Ee=""+ee.key),ee)!N.call(ee,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ee.ref===void 0||(de[be]=ee[be]);var be=arguments.length-2;if(be===1)de.children=le;else if(1<be){for(var Ue=Array(be),_t=0;_t<be;_t++)Ue[_t]=arguments[_t+2];de.children=Ue}return b(O.type,Ee,de)},Ie.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ie.createElement=function(O,ee,le){var de,Ee={},be=null;if(ee!=null)for(de in ee.key!==void 0&&(be=""+ee.key),ee)N.call(ee,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ee[de]=ee[de]);var Ue=arguments.length-2;if(Ue===1)Ee.children=le;else if(1<Ue){for(var _t=Array(Ue),lt=0;lt<Ue;lt++)_t[lt]=arguments[lt+2];Ee.children=_t}if(O&&O.defaultProps)for(de in Ue=O.defaultProps,Ue)Ee[de]===void 0&&(Ee[de]=Ue[de]);return b(O,be,Ee)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(O){return{$$typeof:d,render:O}},Ie.isValidElement=P,Ie.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ye}},Ie.memo=function(O,ee){return{$$typeof:m,type:O,compare:ee===void 0?null:ee}},Ie.startTransition=function(O){var ee=x.T,le={};x.T=le;try{var de=O(),Ee=x.S;Ee!==null&&Ee(le,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ue,Be)}catch(be){Be(be)}finally{ee!==null&&le.types!==null&&(ee.types=le.types),x.T=ee}},Ie.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Ie.use=function(O){return x.H.use(O)},Ie.useActionState=function(O,ee,le){return x.H.useActionState(O,ee,le)},Ie.useCallback=function(O,ee){return x.H.useCallback(O,ee)},Ie.useContext=function(O){return x.H.useContext(O)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(O,ee){return x.H.useDeferredValue(O,ee)},Ie.useEffect=function(O,ee){return x.H.useEffect(O,ee)},Ie.useEffectEvent=function(O){return x.H.useEffectEvent(O)},Ie.useId=function(){return x.H.useId()},Ie.useImperativeHandle=function(O,ee,le){return x.H.useImperativeHandle(O,ee,le)},Ie.useInsertionEffect=function(O,ee){return x.H.useInsertionEffect(O,ee)},Ie.useLayoutEffect=function(O,ee){return x.H.useLayoutEffect(O,ee)},Ie.useMemo=function(O,ee){return x.H.useMemo(O,ee)},Ie.useOptimistic=function(O,ee){return x.H.useOptimistic(O,ee)},Ie.useReducer=function(O,ee,le){return x.H.useReducer(O,ee,le)},Ie.useRef=function(O){return x.H.useRef(O)},Ie.useState=function(O){return x.H.useState(O)},Ie.useSyncExternalStore=function(O,ee,le){return x.H.useSyncExternalStore(O,ee,le)},Ie.useTransition=function(){return x.H.useTransition()},Ie.version="19.2.3",Ie}var J_;function Cp(){return J_||(J_=1,Ch.exports=rR()),Ch.exports}var Fe=Cp();const aR=HT(Fe);var Rh={exports:{}},pl={},Ih={exports:{}},wh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function lR(){return K_||(K_=1,(function(n){function e($,re){var ye=$.length;$.push(re);e:for(;0<ye;){var Be=ye-1>>>1,Qe=$[Be];if(0<r(Qe,re))$[Be]=re,$[ye]=Qe,ye=Be;else break e}}function t($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var re=$[0],ye=$.pop();if(ye!==re){$[0]=ye;e:for(var Be=0,Qe=$.length,O=Qe>>>1;Be<O;){var ee=2*(Be+1)-1,le=$[ee],de=ee+1,Ee=$[de];if(0>r(le,ye))de<Qe&&0>r(Ee,le)?($[Be]=Ee,$[de]=ye,Be=de):($[Be]=le,$[ee]=ye,Be=ee);else if(de<Qe&&0>r(Ee,ye))$[Be]=Ee,$[de]=ye,Be=de;else break e}}return re}function r($,re){var ye=$.sortIndex-re.sortIndex;return ye!==0?ye:$.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var y=[],m=[],v=1,T=null,S=3,I=!1,L=!1,B=!1,D=!1,Q=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function se($){for(var re=t(m);re!==null;){if(re.callback===null)o(m);else if(re.startTime<=$)o(m),re.sortIndex=re.expirationTime,e(y,re);else break;re=t(m)}}function fe($){if(B=!1,se($),!L)if(t(y)!==null)L=!0,ue||(ue=!0,G());else{var re=t(m);re!==null&&at(fe,re.startTime-$)}}var ue=!1,x=-1,N=5,b=-1;function U(){return D?!0:!(n.unstable_now()-b<N)}function P(){if(D=!1,ue){var $=n.unstable_now();b=$;var re=!0;try{e:{L=!1,B&&(B=!1,oe(x),x=-1),I=!0;var ye=S;try{t:{for(se($),T=t(y);T!==null&&!(T.expirationTime>$&&U());){var Be=T.callback;if(typeof Be=="function"){T.callback=null,S=T.priorityLevel;var Qe=Be(T.expirationTime<=$);if($=n.unstable_now(),typeof Qe=="function"){T.callback=Qe,se($),re=!0;break t}T===t(y)&&o(y),se($)}else o(y);T=t(y)}if(T!==null)re=!0;else{var O=t(m);O!==null&&at(fe,O.startTime-$),re=!1}}break e}finally{T=null,S=ye,I=!1}re=void 0}}finally{re?G():ue=!1}}}var G;if(typeof Z=="function")G=function(){Z(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,De=M.port2;M.port1.onmessage=P,G=function(){De.postMessage(null)}}else G=function(){Q(P,0)};function at($,re){x=Q(function(){$(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function($){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var ye=S;S=re;try{return $()}finally{S=ye}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ye=S;S=$;try{return re()}finally{S=ye}},n.unstable_scheduleCallback=function($,re,ye){var Be=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Be+ye:Be):ye=Be,$){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ye+Qe,$={id:v++,callback:re,priorityLevel:$,startTime:ye,expirationTime:Qe,sortIndex:-1},ye>Be?($.sortIndex=ye,e(m,$),t(y)===null&&$===t(m)&&(B?(oe(x),x=-1):B=!0,at(fe,ye-Be))):($.sortIndex=Qe,e(y,$),L||I||(L=!0,ue||(ue=!0,G()))),$},n.unstable_shouldYield=U,n.unstable_wrapCallback=function($){var re=S;return function(){var ye=S;S=re;try{return $.apply(this,arguments)}finally{S=ye}}}})(wh)),wh}var Q_;function uR(){return Q_||(Q_=1,Ih.exports=lR()),Ih.exports}var bh={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function cR(){if(X_)return en;X_=1;var n=Cp();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:y,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,en.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(y,m,null,v)},en.flushSync=function(y){var m=c.T,v=o.p;try{if(c.T=null,o.p=2,y)return y()}finally{c.T=m,o.p=v,o.d.f()}},en.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(y,m))},en.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},en.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):v==="script"&&o.d.X(y,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},en.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);o.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(y)},en.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin);o.d.L(y,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},en.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=d(m.as,m.crossOrigin);o.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(y)},en.requestFormReset=function(y){o.d.r(y)},en.unstable_batchedUpdates=function(y,m){return y(m)},en.useFormState=function(y,m,v){return c.H.useFormState(y,m,v)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.3",en}var $_;function fR(){if($_)return bh.exports;$_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bh.exports=cR(),bh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function dR(){if(W_)return pl;W_=1;var n=uR(),e=Cp(),t=fR();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,u=s;;){var g=a.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===a)return y(g),i;if(_===u)return y(g),s;_=_.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=_;else{for(var A=!1,R=g.child;R;){if(R===a){A=!0,a=g,u=_;break}if(R===u){A=!0,u=g,a=_;break}R=R.sibling}if(!A){for(R=_.child;R;){if(R===a){A=!0,a=_,u=g;break}if(R===u){A=!0,u=_,a=g;break}R=R.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var M=Symbol.for("react.client.reference");function De(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===M?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case Q:return"Profiler";case D:return"StrictMode";case fe:return"Suspense";case ue:return"SuspenseList";case b:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case L:return"Portal";case Z:return i.displayName||"Context";case oe:return(i._context.displayName||"Context")+".Consumer";case se:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return s=i.displayName||null,s!==null?s:De(i.type)||"Memo";case N:s=i._payload,i=i._init;try{return De(i(s))}catch{}}return null}var at=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Be=[],Qe=-1;function O(i){return{current:i}}function ee(i){0>Qe||(i.current=Be[Qe],Be[Qe]=null,Qe--)}function le(i,s){Qe++,Be[Qe]=i.current,i.current=s}var de=O(null),Ee=O(null),be=O(null),Ue=O(null);function _t(i,s){switch(le(be,s),le(Ee,i),le(de,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?d_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=d_(s),i=h_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(de),le(de,i)}function lt(){ee(de),ee(Ee),ee(be)}function Ae(i){i.memoizedState!==null&&le(Ue,i);var s=de.current,a=h_(s,i.type);s!==a&&(le(Ee,i),le(de,a))}function st(i){Ee.current===i&&(ee(de),ee(Ee)),Ue.current===i&&(ee(Ue),ul._currentValue=ye)}var lo,zs;function li(i){if(lo===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);lo=s&&s[1]||"",zs=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lo+i+zs}var ua=!1;function os(i,s){if(!i||ua)return"";ua=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(X){var J=X}Reflect.construct(i,[],te)}else{try{te.call()}catch(X){J=X}i.call(te.prototype)}}else{try{throw Error()}catch(X){J=X}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(X){if(X&&J&&typeof X.stack=="string")return[X.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),A=_[0],R=_[1];if(A&&R){var V=A.split(`
`),Y=R.split(`
`);for(g=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;g<Y.length&&!Y[g].includes("DetermineComponentFrameRoot");)g++;if(u===V.length||g===Y.length)for(u=V.length-1,g=Y.length-1;1<=u&&0<=g&&V[u]!==Y[g];)g--;for(;1<=u&&0<=g;u--,g--)if(V[u]!==Y[g]){if(u!==1||g!==1)do if(u--,g--,0>g||V[u]!==Y[g]){var W=`
`+V[u].replace(" at new "," at ");return i.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",i.displayName)),W}while(1<=u&&0<=g);break}}}finally{ua=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?li(a):""}function ca(i,s){switch(i.tag){case 26:case 27:case 5:return li(i.type);case 16:return li("Lazy");case 13:return i.child!==s&&s!==null?li("Suspense Fallback"):li("Suspense");case 19:return li("SuspenseList");case 0:case 15:return os(i.type,!1);case 11:return os(i.type.render,!1);case 1:return os(i.type,!0);case 31:return li("Activity");default:return""}}function fa(i){try{var s="",a=null;do s+=ca(i,a),a=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ct=Object.prototype.hasOwnProperty,Lt=n.unstable_scheduleCallback,uo=n.unstable_cancelCallback,Rf=n.unstable_shouldYield,Bl=n.unstable_requestPaint,rn=n.unstable_now,ss=n.unstable_getCurrentPriorityLevel,da=n.unstable_ImmediatePriority,ha=n.unstable_UserBlockingPriority,co=n.unstable_NormalPriority,If=n.unstable_LowPriority,Gl=n.unstable_IdlePriority,Fl=n.log,Hl=n.unstable_setDisableYieldValue,Yn=null,Yt=null;function bn(i){if(typeof Fl=="function"&&Hl(i),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Yn,i)}catch{}}var vt=Math.clz32?Math.clz32:Yl,zl=Math.log,Ys=Math.LN2;function Yl(i){return i>>>=0,i===0?32:31-(zl(i)/Ys|0)|0}var ui=256,rs=262144,Rt=4194304;function ci(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function fi(i,s,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var R=u&134217727;return R!==0?(u=R&~_,u!==0?g=ci(u):(A&=R,A!==0?g=ci(A):a||(a=R&~i,a!==0&&(g=ci(a))))):(R=u&~_,R!==0?g=ci(R):A!==0?g=ci(A):a||(a=u&~i,a!==0&&(g=ci(a)))),g===0?0:s!==0&&s!==g&&(s&_)===0&&(_=g&-g,a=s&-s,_>=a||_===32&&(a&4194048)!==0)?s:g}function Jn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function wf(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jl(){var i=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),i}function di(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function as(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function bf(i,s,a,u,g,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var R=i.entanglements,V=i.expirationTimes,Y=i.hiddenUpdates;for(a=A&~a;0<a;){var W=31-vt(a),te=1<<W;R[W]=0,V[W]=-1;var J=Y[W];if(J!==null)for(Y[W]=null,W=0;W<J.length;W++){var X=J[W];X!==null&&(X.lane&=-536870913)}a&=~te}u!==0&&ls(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~s))}function ls(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-vt(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function pa(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var u=31-vt(a),g=1<<u;g&s|i[u]&s&&(i[u]|=s),a&=~g}}function ma(i,s){var a=s&-s;return a=(a&42)!==0?1:us(a),(a&(i.suspendedLanes|s))!==0?0:a}function us(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ki(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Kl(){var i=re.p;return i!==0?i:(i=window.event,i===void 0?32:L_(i.type))}function Kn(i,s){var a=re.p;try{return re.p=i,s()}finally{re.p=a}}var Qn=Math.random().toString(36).slice(2),It="__reactFiber$"+Qn,Bt="__reactProps$"+Qn,hi="__reactContainer$"+Qn,Js="__reactEvents$"+Qn,Nf="__reactListeners$"+Qn,Ql="__reactHandles$"+Qn,Xl="__reactResources$"+Qn,pi="__reactMarker$"+Qn;function Ks(i){delete i[It],delete i[Bt],delete i[Js],delete i[Nf],delete i[Ql]}function mi(i){var s=i[It];if(s)return s;for(var a=i.parentNode;a;){if(s=a[hi]||a[It]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=T_(i);i!==null;){if(a=i[It])return a;i=T_(i)}return s}i=a,a=i.parentNode}return null}function Nn(i){if(i=i[It]||i[hi]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function vn(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function gi(i){var s=i[Xl];return s||(s=i[Xl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(i){i[pi]=!0}var ga=new Set,ya={};function yi(i,s){_i(i,s),_i(i+"Capture",s)}function _i(i,s){for(ya[i]=s,i=0;i<s.length;i++)ga.add(s[i])}var _a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),va={},Ta={};function $l(i){return Ct.call(Ta,i)?!0:Ct.call(va,i)?!1:_a.test(i)?Ta[i]=!0:(va[i]=!0,!1)}function Qs(i,s,a){if($l(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function Tn(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function bt(i,s,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+u)}}function Gt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function fo(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ea(i,s,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Ze(i){if(!i._valueTracker){var s=fo(i)?"checked":"value";i._valueTracker=Ea(i,s,""+i[s])}}function cs(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return i&&(u=fo(i)?i.checked?"true":"false":i.value),i=u,i!==a?(s.setValue(i),!0):!1}function vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var fs=/[\n"\\]/g;function fn(i){return i.replace(fs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xs(i,s,a,u,g,_,A,R){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Gt(s)):i.value!==""+Gt(s)&&(i.value=""+Gt(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Sa(i,A,Gt(s)):a!=null?Sa(i,A,Gt(a)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+Gt(R):i.removeAttribute("name")}function Wl(i,s,a,u,g,_,A,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Ze(i);return}a=a!=null?""+Gt(a):"",s=s!=null?""+Gt(s):a,R||s===i.value||(i.value=s),i.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=R?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Ze(i)}function Sa(i,s,a){s==="number"&&vi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ho(i,s,a,u){if(i=i.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=s.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Gt(a),s=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function Zl(i,s,a){if(s!=null&&(s=""+Gt(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+Gt(a):""}function po(i,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(at(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=Gt(s),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Ze(i)}function dn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var jl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Aa(i,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,a):typeof a!="number"||a===0||jl.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Ca(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&Aa(i,g,u)}else for(var _ in s)s.hasOwnProperty(_)&&Aa(i,_,s[_])}function $s(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ws(i){return mo.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xn(){}var Ra=null;function xn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var go=null,Ti=null;function ds(i){var s=Nn(i);if(s&&(i=s.stateNode)){var a=i[Bt]||null;e:switch(i=s.stateNode,s.type){case"input":if(Xs(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==i&&u.form===i.form){var g=u[Bt]||null;if(!g)throw Error(o(90));Xs(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===i.form&&cs(u)}break e;case"textarea":Zl(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ho(i,!!a.multiple,s,!1)}}}var Zs=!1;function yo(i,s,a){if(Zs)return i(s,a);Zs=!0;try{var u=i(s);return u}finally{if(Zs=!1,(go!==null||Ti!==null)&&(Ku(),go&&(s=go,i=Ti,Ti=go=null,ds(s),i)))for(s=0;s<i.length;s++)ds(i[s])}}function $n(i,s){var a=i.stateNode;if(a===null)return null;var u=a[Bt]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hs=!1;if(Mn)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){hs=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{hs=!1}var Ei=null,Ia=null,ps=null;function wa(){if(ps)return ps;var i,s=Ia,a=s.length,u,g="value"in Ei?Ei.value:Ei.textContent,_=g.length;for(i=0;i<a&&s[i]===g[i];i++);var A=a-i;for(u=1;u<=A&&s[a-u]===g[_-u];u++);return ps=g.slice(i,1<u?1-u:void 0)}function ms(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Oi(){return!0}function Wn(){return!1}function Jt(i){function s(a,u,g,_,A){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(a=i[R],this[R]=a?a(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Oi:Wn,this.isPropagationStopped=Wn,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),s}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=Jt(qi),_o=T({},qi,{view:0,detail:0}),ba=Jt(_o),vo,js,Ai,er=T({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:To,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ai&&(Ai&&i.type==="mousemove"?(vo=i.screenX-Ai.screenX,js=i.screenY-Ai.screenY):js=vo=0,Ai=i),vo)},movementY:function(i){return"movementY"in i?i.movementY:js}}),Na=Jt(er),gs=T({},er,{dataTransfer:0}),tu=Jt(gs),nu=T({},_o,{relatedTarget:0}),ys=Jt(nu),xa=T({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),iu=Jt(xa),tr=T({},qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ou=Jt(tr),su=T({},qi,{data:0}),Ci=Jt(su),ru={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=lu[i])?!!s[i]:!1}function To(){return uu}var an=T({},_o,{key:function(i){if(i.key){var s=ru[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ms(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?au[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:To,charCode:function(i){return i.type==="keypress"?ms(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ms(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),cu=Jt(an),fu=T({},er,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bi=Jt(fu),p=T({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:To}),E=Jt(p),C=T({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Jt(C),H=T({},er,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Jt(H),ae=T({},qi,{newState:0,oldState:0}),Ne=Jt(ae),Tt=[9,13,27,32],Xe=Mn&&"CompositionEvent"in window,ht=null;Mn&&"documentMode"in document&&(ht=document.documentMode);var Dn=Mn&&"TextEvent"in window&&!ht,Ri=Mn&&(!Xe||ht&&8<ht&&11>=ht),Zn=" ",jn=!1;function _s(i,s){switch(i){case"keyup":return Tt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nr(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ir=!1;function bA(i,s){switch(i){case"compositionend":return nr(s);case"keypress":return s.which!==32?null:(jn=!0,Zn);case"textInput":return i=s.data,i===Zn&&jn?null:i;default:return null}}function NA(i,s){if(ir)return i==="compositionend"||!Xe&&_s(i,s)?(i=wa(),ps=Ia=Ei=null,ir=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ri&&s.locale!=="ko"?null:s.data;default:return null}}var xA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Am(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!xA[i.type]:s==="textarea"}function Cm(i,s,a,u){go?Ti?Ti.push(u):Ti=[u]:go=u,s=ec(s,"onChange"),0<s.length&&(a=new Si("onChange","change",null,a,u),i.push({event:a,listeners:s}))}var Ma=null,Da=null;function MA(i){r_(i,0)}function du(i){var s=vn(i);if(cs(s))return i}function Rm(i,s){if(i==="change")return s}var Im=!1;if(Mn){var xf;if(Mn){var Mf="oninput"in document;if(!Mf){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),Mf=typeof wm.oninput=="function"}xf=Mf}else xf=!1;Im=xf&&(!document.documentMode||9<document.documentMode)}function bm(){Ma&&(Ma.detachEvent("onpropertychange",Nm),Da=Ma=null)}function Nm(i){if(i.propertyName==="value"&&du(Da)){var s=[];Cm(s,Da,i,xn(i)),yo(MA,s)}}function DA(i,s,a){i==="focusin"?(bm(),Ma=s,Da=a,Ma.attachEvent("onpropertychange",Nm)):i==="focusout"&&bm()}function VA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return du(Da)}function PA(i,s){if(i==="click")return du(s)}function UA(i,s){if(i==="input"||i==="change")return du(s)}function LA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var En=typeof Object.is=="function"?Object.is:LA;function Va(i,s){if(En(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Ct.call(s,g)||!En(i[g],s[g]))return!1}return!0}function xm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Mm(i,s){var a=xm(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=s&&u>=s)return{node:a,offset:s-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xm(a)}}function Dm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Dm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Vm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=vi(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=vi(i.document)}return s}function Df(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var kA=Mn&&"documentMode"in document&&11>=document.documentMode,or=null,Vf=null,Pa=null,Pf=!1;function Pm(i,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Pf||or==null||or!==vi(u)||(u=or,"selectionStart"in u&&Df(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pa&&Va(Pa,u)||(Pa=u,u=ec(Vf,"onSelect"),0<u.length&&(s=new Si("onSelect","select",null,s,a),i.push({event:s,listeners:u}),s.target=or)))}function vs(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var sr={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},Uf={},Um={};Mn&&(Um=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function Ts(i){if(Uf[i])return Uf[i];if(!sr[i])return i;var s=sr[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in Um)return Uf[i]=s[a];return i}var Lm=Ts("animationend"),km=Ts("animationiteration"),Om=Ts("animationstart"),OA=Ts("transitionrun"),qA=Ts("transitionstart"),BA=Ts("transitioncancel"),qm=Ts("transitionend"),Bm=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function ei(i,s){Bm.set(i,s),yi(s,[i])}var hu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Vn=[],rr=0,kf=0;function pu(){for(var i=rr,s=kf=rr=0;s<i;){var a=Vn[s];Vn[s++]=null;var u=Vn[s];Vn[s++]=null;var g=Vn[s];Vn[s++]=null;var _=Vn[s];if(Vn[s++]=null,u!==null&&g!==null){var A=u.pending;A===null?g.next=g:(g.next=A.next,A.next=g),u.pending=g}_!==0&&Gm(a,g,_)}}function mu(i,s,a,u){Vn[rr++]=i,Vn[rr++]=s,Vn[rr++]=a,Vn[rr++]=u,kf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Of(i,s,a,u){return mu(i,s,a,u),gu(i)}function Es(i,s){return mu(i,null,null,s),gu(i)}function Gm(i,s,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&s!==null&&(g=31-vt(a),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[s]:u.push(s),s.lane=a|536870912),_):null}function gu(i){if(50<nl)throw nl=0,Kd=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var ar={};function GA(i,s,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(i,s,a,u){return new GA(i,s,a,u)}function qf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Gi(i,s){var a=i.alternate;return a===null?(a=Sn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Fm(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function yu(i,s,a,u,g,_){var A=0;if(u=i,typeof i=="function")qf(i)&&(A=1);else if(typeof i=="string")A=JC(i,a,de.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case b:return i=Sn(31,a,s,g),i.elementType=b,i.lanes=_,i;case B:return Ss(a.children,g,_,s);case D:A=8,g|=24;break;case Q:return i=Sn(12,a,s,g|2),i.elementType=Q,i.lanes=_,i;case fe:return i=Sn(13,a,s,g),i.elementType=fe,i.lanes=_,i;case ue:return i=Sn(19,a,s,g),i.elementType=ue,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:A=10;break e;case oe:A=9;break e;case se:A=11;break e;case x:A=14;break e;case N:A=16,u=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=Sn(A,a,s,g),s.elementType=i,s.type=u,s.lanes=_,s}function Ss(i,s,a,u){return i=Sn(7,i,u,s),i.lanes=a,i}function Bf(i,s,a){return i=Sn(6,i,null,s),i.lanes=a,i}function Hm(i){var s=Sn(18,null,null,0);return s.stateNode=i,s}function Gf(i,s,a){return s=Sn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var zm=new WeakMap;function Pn(i,s){if(typeof i=="object"&&i!==null){var a=zm.get(i);return a!==void 0?a:(s={value:i,source:s,stack:fa(s)},zm.set(i,s),s)}return{value:i,source:s,stack:fa(s)}}var lr=[],ur=0,_u=null,Ua=0,Un=[],Ln=0,Eo=null,Ii=1,wi="";function Fi(i,s){lr[ur++]=Ua,lr[ur++]=_u,_u=i,Ua=s}function Ym(i,s,a){Un[Ln++]=Ii,Un[Ln++]=wi,Un[Ln++]=Eo,Eo=i;var u=Ii;i=wi;var g=32-vt(u)-1;u&=~(1<<g),a+=1;var _=32-vt(s)+g;if(30<_){var A=g-g%5;_=(u&(1<<A)-1).toString(32),u>>=A,g-=A,Ii=1<<32-vt(s)+g|a<<g|u,wi=_+i}else Ii=1<<_|a<<g|u,wi=i}function Ff(i){i.return!==null&&(Fi(i,1),Ym(i,1,0))}function Hf(i){for(;i===_u;)_u=lr[--ur],lr[ur]=null,Ua=lr[--ur],lr[ur]=null;for(;i===Eo;)Eo=Un[--Ln],Un[Ln]=null,wi=Un[--Ln],Un[Ln]=null,Ii=Un[--Ln],Un[Ln]=null}function Jm(i,s){Un[Ln++]=Ii,Un[Ln++]=wi,Un[Ln++]=Eo,Ii=s.id,wi=s.overflow,Eo=i}var Kt=null,ct=null,Ge=!1,So=null,kn=!1,zf=Error(o(519));function Ao(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw La(Pn(s,i)),zf}function Km(i){var s=i.stateNode,a=i.type,u=i.memoizedProps;switch(s[It]=i,s[Bt]=u,a){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(a=0;a<ol.length;a++)Pe(ol[a],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),Wl(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),po(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||c_(s.textContent,a)?(u.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),u.onScroll!=null&&Pe("scroll",s),u.onScrollEnd!=null&&Pe("scrollend",s),u.onClick!=null&&(s.onclick=Xn),s=!0):s=!1,s||Ao(i,!0)}function Qm(i){for(Kt=i.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Kt=Kt.return}}function cr(i){if(i!==Kt)return!1;if(!Ge)return Qm(i),Ge=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||lh(i.type,i.memoizedProps)),a=!a),a&&ct&&Ao(i),Qm(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));ct=v_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));ct=v_(i)}else s===27?(s=ct,ko(i.type)?(i=hh,hh=null,ct=i):ct=s):ct=Kt?qn(i.stateNode.nextSibling):null;return!0}function As(){ct=Kt=null,Ge=!1}function Yf(){var i=So;return i!==null&&(gn===null?gn=i:gn.push.apply(gn,i),So=null),i}function La(i){So===null?So=[i]:So.push(i)}var Jf=O(null),Cs=null,Hi=null;function Co(i,s,a){le(Jf,s._currentValue),s._currentValue=a}function zi(i){i._currentValue=Jf.current,ee(Jf)}function Kf(i,s,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===a)break;i=i.return}}function Qf(i,s,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var A=g.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=g;for(var V=0;V<s.length;V++)if(R.context===s[V]){_.lanes|=a,R=_.alternate,R!==null&&(R.lanes|=a),Kf(_.return,a,i),u||(A=null);break e}_=R.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(o(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Kf(A,a,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function fr(i,s,a,u){i=null;for(var g=s,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var R=g.type;En(g.pendingProps.value,A.value)||(i!==null?i.push(R):i=[R])}}else if(g===Ue.current){if(A=g.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(ul):i=[ul])}g=g.return}i!==null&&Qf(s,i,a,u),s.flags|=262144}function vu(i){for(i=i.firstContext;i!==null;){if(!En(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Rs(i){Cs=i,Hi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qt(i){return Xm(Cs,i)}function Tu(i,s){return Cs===null&&Rs(i),Xm(i,s)}function Xm(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Hi===null){if(i===null)throw Error(o(308));Hi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Hi=Hi.next=s;return a}var FA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},HA=n.unstable_scheduleCallback,zA=n.unstable_NormalPriority,Nt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new FA,data:new Map,refCount:0}}function ka(i){i.refCount--,i.refCount===0&&HA(zA,function(){i.controller.abort()})}var Oa=null,$f=0,dr=0,hr=null;function YA(i,s){if(Oa===null){var a=Oa=[];$f=0,dr=jd(),hr={status:"pending",value:void 0,then:function(u){a.push(u)}}}return $f++,s.then($m,$m),s}function $m(){if(--$f===0&&Oa!==null){hr!==null&&(hr.status="fulfilled");var i=Oa;Oa=null,dr=0,hr=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function JA(i,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Wm=$.S;$.S=function(i,s){Py=rn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&YA(i,s),Wm!==null&&Wm(i,s)};var Is=O(null);function Wf(){var i=Is.current;return i!==null?i:rt.pooledCache}function Eu(i,s){s===null?le(Is,Is.current):le(Is,s.pool)}function Zm(){var i=Wf();return i===null?null:{parent:Nt._currentValue,pool:i}}var pr=Error(o(460)),Zf=Error(o(474)),Su=Error(o(542)),Au={then:function(){}};function jm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function eg(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Xn,Xn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,ng(i),i;default:if(typeof s.status=="string")s.then(Xn,Xn);else{if(i=rt,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,ng(i),i}throw bs=s,pr}}function ws(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(bs=a,pr):a}}var bs=null;function tg(){if(bs===null)throw Error(o(459));var i=bs;return bs=null,i}function ng(i){if(i===pr||i===Su)throw Error(o(483))}var mr=null,qa=0;function Cu(i){var s=qa;return qa+=1,mr===null&&(mr=[]),eg(mr,i,s)}function Ba(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Ru(i,s){throw s.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function ig(i){function s(F,k){if(i){var z=F.deletions;z===null?(F.deletions=[k],F.flags|=16):z.push(k)}}function a(F,k){if(!i)return null;for(;k!==null;)s(F,k),k=k.sibling;return null}function u(F){for(var k=new Map;F!==null;)F.key!==null?k.set(F.key,F):k.set(F.index,F),F=F.sibling;return k}function g(F,k){return F=Gi(F,k),F.index=0,F.sibling=null,F}function _(F,k,z){return F.index=z,i?(z=F.alternate,z!==null?(z=z.index,z<k?(F.flags|=67108866,k):z):(F.flags|=67108866,k)):(F.flags|=1048576,k)}function A(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function R(F,k,z,j){return k===null||k.tag!==6?(k=Bf(z,F.mode,j),k.return=F,k):(k=g(k,z),k.return=F,k)}function V(F,k,z,j){var _e=z.type;return _e===B?W(F,k,z.props.children,j,z.key):k!==null&&(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===N&&ws(_e)===k.type)?(k=g(k,z.props),Ba(k,z),k.return=F,k):(k=yu(z.type,z.key,z.props,null,F.mode,j),Ba(k,z),k.return=F,k)}function Y(F,k,z,j){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=Gf(z,F.mode,j),k.return=F,k):(k=g(k,z.children||[]),k.return=F,k)}function W(F,k,z,j,_e){return k===null||k.tag!==7?(k=Ss(z,F.mode,j,_e),k.return=F,k):(k=g(k,z),k.return=F,k)}function te(F,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Bf(""+k,F.mode,z),k.return=F,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case I:return z=yu(k.type,k.key,k.props,null,F.mode,z),Ba(z,k),z.return=F,z;case L:return k=Gf(k,F.mode,z),k.return=F,k;case N:return k=ws(k),te(F,k,z)}if(at(k)||G(k))return k=Ss(k,F.mode,z,null),k.return=F,k;if(typeof k.then=="function")return te(F,Cu(k),z);if(k.$$typeof===Z)return te(F,Tu(F,k),z);Ru(F,k)}return null}function J(F,k,z,j){var _e=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return _e!==null?null:R(F,k,""+z,j);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===_e?V(F,k,z,j):null;case L:return z.key===_e?Y(F,k,z,j):null;case N:return z=ws(z),J(F,k,z,j)}if(at(z)||G(z))return _e!==null?null:W(F,k,z,j,null);if(typeof z.then=="function")return J(F,k,Cu(z),j);if(z.$$typeof===Z)return J(F,k,Tu(F,z),j);Ru(F,z)}return null}function X(F,k,z,j,_e){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return F=F.get(z)||null,R(k,F,""+j,_e);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return F=F.get(j.key===null?z:j.key)||null,V(k,F,j,_e);case L:return F=F.get(j.key===null?z:j.key)||null,Y(k,F,j,_e);case N:return j=ws(j),X(F,k,z,j,_e)}if(at(j)||G(j))return F=F.get(z)||null,W(k,F,j,_e,null);if(typeof j.then=="function")return X(F,k,z,Cu(j),_e);if(j.$$typeof===Z)return X(F,k,z,Tu(k,j),_e);Ru(k,j)}return null}function me(F,k,z,j){for(var _e=null,Ye=null,ge=k,Me=k=0,ke=null;ge!==null&&Me<z.length;Me++){ge.index>Me?(ke=ge,ge=null):ke=ge.sibling;var Je=J(F,ge,z[Me],j);if(Je===null){ge===null&&(ge=ke);break}i&&ge&&Je.alternate===null&&s(F,ge),k=_(Je,k,Me),Ye===null?_e=Je:Ye.sibling=Je,Ye=Je,ge=ke}if(Me===z.length)return a(F,ge),Ge&&Fi(F,Me),_e;if(ge===null){for(;Me<z.length;Me++)ge=te(F,z[Me],j),ge!==null&&(k=_(ge,k,Me),Ye===null?_e=ge:Ye.sibling=ge,Ye=ge);return Ge&&Fi(F,Me),_e}for(ge=u(ge);Me<z.length;Me++)ke=X(ge,F,Me,z[Me],j),ke!==null&&(i&&ke.alternate!==null&&ge.delete(ke.key===null?Me:ke.key),k=_(ke,k,Me),Ye===null?_e=ke:Ye.sibling=ke,Ye=ke);return i&&ge.forEach(function(Fo){return s(F,Fo)}),Ge&&Fi(F,Me),_e}function Te(F,k,z,j){if(z==null)throw Error(o(151));for(var _e=null,Ye=null,ge=k,Me=k=0,ke=null,Je=z.next();ge!==null&&!Je.done;Me++,Je=z.next()){ge.index>Me?(ke=ge,ge=null):ke=ge.sibling;var Fo=J(F,ge,Je.value,j);if(Fo===null){ge===null&&(ge=ke);break}i&&ge&&Fo.alternate===null&&s(F,ge),k=_(Fo,k,Me),Ye===null?_e=Fo:Ye.sibling=Fo,Ye=Fo,ge=ke}if(Je.done)return a(F,ge),Ge&&Fi(F,Me),_e;if(ge===null){for(;!Je.done;Me++,Je=z.next())Je=te(F,Je.value,j),Je!==null&&(k=_(Je,k,Me),Ye===null?_e=Je:Ye.sibling=Je,Ye=Je);return Ge&&Fi(F,Me),_e}for(ge=u(ge);!Je.done;Me++,Je=z.next())Je=X(ge,F,Me,Je.value,j),Je!==null&&(i&&Je.alternate!==null&&ge.delete(Je.key===null?Me:Je.key),k=_(Je,k,Me),Ye===null?_e=Je:Ye.sibling=Je,Ye=Je);return i&&ge.forEach(function(iR){return s(F,iR)}),Ge&&Fi(F,Me),_e}function ot(F,k,z,j){if(typeof z=="object"&&z!==null&&z.type===B&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var _e=z.key;k!==null;){if(k.key===_e){if(_e=z.type,_e===B){if(k.tag===7){a(F,k.sibling),j=g(k,z.props.children),j.return=F,F=j;break e}}else if(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===N&&ws(_e)===k.type){a(F,k.sibling),j=g(k,z.props),Ba(j,z),j.return=F,F=j;break e}a(F,k);break}else s(F,k);k=k.sibling}z.type===B?(j=Ss(z.props.children,F.mode,j,z.key),j.return=F,F=j):(j=yu(z.type,z.key,z.props,null,F.mode,j),Ba(j,z),j.return=F,F=j)}return A(F);case L:e:{for(_e=z.key;k!==null;){if(k.key===_e)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){a(F,k.sibling),j=g(k,z.children||[]),j.return=F,F=j;break e}else{a(F,k);break}else s(F,k);k=k.sibling}j=Gf(z,F.mode,j),j.return=F,F=j}return A(F);case N:return z=ws(z),ot(F,k,z,j)}if(at(z))return me(F,k,z,j);if(G(z)){if(_e=G(z),typeof _e!="function")throw Error(o(150));return z=_e.call(z),Te(F,k,z,j)}if(typeof z.then=="function")return ot(F,k,Cu(z),j);if(z.$$typeof===Z)return ot(F,k,Tu(F,z),j);Ru(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(a(F,k.sibling),j=g(k,z),j.return=F,F=j):(a(F,k),j=Bf(z,F.mode,j),j.return=F,F=j),A(F)):a(F,k)}return function(F,k,z,j){try{qa=0;var _e=ot(F,k,z,j);return mr=null,_e}catch(ge){if(ge===pr||ge===Su)throw ge;var Ye=Sn(29,ge,null,F.mode);return Ye.lanes=j,Ye.return=F,Ye}finally{}}}var Ns=ig(!0),og=ig(!1),Ro=!1;function jf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ed(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Io(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function wo(i,s,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=gu(i),Gm(i,null,a),s}return mu(i,u,s,a),gu(i)}function Ga(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,pa(i,a)}}function td(i,s){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?g=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?g=_=s:_=_.next=s}else g=_=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var nd=!1;function Fa(){if(nd){var i=hr;if(i!==null)throw i}}function Ha(i,s,a,u){nd=!1;var g=i.updateQueue;Ro=!1;var _=g.firstBaseUpdate,A=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var V=R,Y=V.next;V.next=null,A===null?_=Y:A.next=Y,A=V;var W=i.alternate;W!==null&&(W=W.updateQueue,R=W.lastBaseUpdate,R!==A&&(R===null?W.firstBaseUpdate=Y:R.next=Y,W.lastBaseUpdate=V))}if(_!==null){var te=g.baseState;A=0,W=Y=V=null,R=_;do{var J=R.lane&-536870913,X=J!==R.lane;if(X?(Le&J)===J:(u&J)===J){J!==0&&J===dr&&(nd=!0),W!==null&&(W=W.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var me=i,Te=R;J=s;var ot=a;switch(Te.tag){case 1:if(me=Te.payload,typeof me=="function"){te=me.call(ot,te,J);break e}te=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Te.payload,J=typeof me=="function"?me.call(ot,te,J):me,J==null)break e;te=T({},te,J);break e;case 2:Ro=!0}}J=R.callback,J!==null&&(i.flags|=64,X&&(i.flags|=8192),X=g.callbacks,X===null?g.callbacks=[J]:X.push(J))}else X={lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},W===null?(Y=W=X,V=te):W=W.next=X,A|=J;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;X=R,R=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);W===null&&(V=te),g.baseState=V,g.firstBaseUpdate=Y,g.lastBaseUpdate=W,_===null&&(g.shared.lanes=0),Do|=A,i.lanes=A,i.memoizedState=te}}function sg(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function rg(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)sg(a[i],s)}var gr=O(null),Iu=O(0);function ag(i,s){i=ji,le(Iu,i),le(gr,s),ji=i|s.baseLanes}function id(){le(Iu,ji),le(gr,gr.current)}function od(){ji=Iu.current,ee(gr),ee(Iu)}var An=O(null),On=null;function bo(i){var s=i.alternate;le(Et,Et.current&1),le(An,i),On===null&&(s===null||gr.current!==null||s.memoizedState!==null)&&(On=i)}function sd(i){le(Et,Et.current),le(An,i),On===null&&(On=i)}function lg(i){i.tag===22?(le(Et,Et.current),le(An,i),On===null&&(On=i)):No()}function No(){le(Et,Et.current),le(An,An.current)}function Cn(i){ee(An),On===i&&(On=null),ee(Et)}var Et=O(0);function wu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||fh(a)||dh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Yi=0,xe=null,nt=null,xt=null,bu=!1,yr=!1,xs=!1,Nu=0,za=0,_r=null,KA=0;function gt(){throw Error(o(321))}function rd(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!En(i[a],s[a]))return!1;return!0}function ad(i,s,a,u,g,_){return Yi=_,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=i===null||i.memoizedState===null?Yg:Sd,xs=!1,_=a(u,g),xs=!1,yr&&(_=cg(s,a,u,g)),ug(i),_}function ug(i){$.H=Ka;var s=nt!==null&&nt.next!==null;if(Yi=0,xt=nt=xe=null,bu=!1,za=0,_r=null,s)throw Error(o(300));i===null||Mt||(i=i.dependencies,i!==null&&vu(i)&&(Mt=!0))}function cg(i,s,a,u){xe=i;var g=0;do{if(yr&&(_r=null),za=0,yr=!1,25<=g)throw Error(o(301));if(g+=1,xt=nt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=Jg,_=s(a,u)}while(yr);return _}function QA(){var i=$.H,s=i.useState()[0];return s=typeof s.then=="function"?Ya(s):s,i=i.useState()[0],(nt!==null?nt.memoizedState:null)!==i&&(xe.flags|=1024),s}function ld(){var i=Nu!==0;return Nu=0,i}function ud(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function cd(i){if(bu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}bu=!1}Yi=0,xt=nt=xe=null,yr=!1,za=Nu=0,_r=null}function ln(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?xe.memoizedState=xt=i:xt=xt.next=i,xt}function St(){if(nt===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=nt.next;var s=xt===null?xe.memoizedState:xt.next;if(s!==null)xt=s,nt=i;else{if(i===null)throw xe.alternate===null?Error(o(467)):Error(o(310));nt=i,i={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},xt===null?xe.memoizedState=xt=i:xt=xt.next=i}return xt}function xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ya(i){var s=za;return za+=1,_r===null&&(_r=[]),i=eg(_r,i,s),s=xe,(xt===null?s.memoizedState:xt.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?Yg:Sd),i}function Mu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ya(i);if(i.$$typeof===Z)return Qt(i)}throw Error(o(438,String(i)))}function fd(i){var s=null,a=xe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=xu(),xe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),u=0;u<i;u++)a[u]=U;return s.index++,a}function Ji(i,s){return typeof s=="function"?s(i):s}function Du(i){var s=St();return dd(s,nt,i)}function dd(i,s,a){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var A=g.next;g.next=_.next,_.next=A}s.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{s=g.next;var R=A=null,V=null,Y=s,W=!1;do{var te=Y.lane&-536870913;if(te!==Y.lane?(Le&te)===te:(Yi&te)===te){var J=Y.revertLane;if(J===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),te===dr&&(W=!0);else if((Yi&J)===J){Y=Y.next,J===dr&&(W=!0);continue}else te={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(R=V=te,A=_):V=V.next=te,xe.lanes|=J,Do|=J;te=Y.action,xs&&a(_,te),_=Y.hasEagerState?Y.eagerState:a(_,te)}else J={lane:te,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(R=V=J,A=_):V=V.next=J,xe.lanes|=te,Do|=te;Y=Y.next}while(Y!==null&&Y!==s);if(V===null?A=_:V.next=R,!En(_,i.memoizedState)&&(Mt=!0,W&&(a=hr,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=V,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function hd(i){var s=St(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,_=s.memoizedState;if(g!==null){a.pending=null;var A=g=g.next;do _=i(_,A.action),A=A.next;while(A!==g);En(_,s.memoizedState)||(Mt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),a.lastRenderedState=_}return[_,u]}function fg(i,s,a){var u=xe,g=St(),_=Ge;if(_){if(a===void 0)throw Error(o(407));a=a()}else a=s();var A=!En((nt||g).memoizedState,a);if(A&&(g.memoizedState=a,Mt=!0),g=g.queue,gd(pg.bind(null,u,g,i),[i]),g.getSnapshot!==s||A||xt!==null&&xt.memoizedState.tag&1){if(u.flags|=2048,vr(9,{destroy:void 0},hg.bind(null,u,g,a,s),null),rt===null)throw Error(o(349));_||(Yi&127)!==0||dg(u,s,a)}return a}function dg(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=xe.updateQueue,s===null?(s=xu(),xe.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function hg(i,s,a,u){s.value=a,s.getSnapshot=u,mg(s)&&gg(i)}function pg(i,s,a){return a(function(){mg(s)&&gg(i)})}function mg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!En(i,a)}catch{return!0}}function gg(i){var s=Es(i,2);s!==null&&yn(s,i,2)}function pd(i){var s=ln();if(typeof i=="function"){var a=i;if(i=a(),xs){bn(!0);try{a()}finally{bn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:i},s}function yg(i,s,a,u){return i.baseState=a,dd(i,nt,typeof u=="function"?u:Ji)}function XA(i,s,a,u,g){if(Uu(i))throw Error(o(485));if(i=s.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};$.T!==null?a(!0):_.isTransition=!1,u(_),a=s.pending,a===null?(_.next=s.pending=_,_g(s,_)):(_.next=a.next,s.pending=a.next=_)}}function _g(i,s){var a=s.action,u=s.payload,g=i.state;if(s.isTransition){var _=$.T,A={};$.T=A;try{var R=a(g,u),V=$.S;V!==null&&V(A,R),vg(i,s,R)}catch(Y){md(i,s,Y)}finally{_!==null&&A.types!==null&&(_.types=A.types),$.T=_}}else try{_=a(g,u),vg(i,s,_)}catch(Y){md(i,s,Y)}}function vg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Tg(i,s,u)},function(u){return md(i,s,u)}):Tg(i,s,a)}function Tg(i,s,a){s.status="fulfilled",s.value=a,Eg(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,_g(i,a)))}function md(i,s,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,Eg(s),s=s.next;while(s!==u)}i.action=null}function Eg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Sg(i,s){return s}function Ag(i,s){if(Ge){var a=rt.formState;if(a!==null){e:{var u=xe;if(Ge){if(ct){t:{for(var g=ct,_=kn;g.nodeType!==8;){if(!_){g=null;break t}if(g=qn(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){ct=qn(g.nextSibling),u=g.data==="F!";break e}}Ao(u)}u=!1}u&&(s=a[0])}}return a=ln(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sg,lastRenderedState:s},a.queue=u,a=Fg.bind(null,xe,u),u.dispatch=a,u=pd(!1),_=Ed.bind(null,xe,!1,u.queue),u=ln(),g={state:s,dispatch:null,action:i,pending:null},u.queue=g,a=XA.bind(null,xe,g,_,a),g.dispatch=a,u.memoizedState=i,[s,a,!1]}function Cg(i){var s=St();return Rg(s,nt,i)}function Rg(i,s,a){if(s=dd(i,s,Sg)[0],i=Du(Ji)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ya(s)}catch(A){throw A===pr?Su:A}else u=s;s=St();var g=s.queue,_=g.dispatch;return a!==s.memoizedState&&(xe.flags|=2048,vr(9,{destroy:void 0},$A.bind(null,g,a),null)),[u,_,i]}function $A(i,s){i.action=s}function Ig(i){var s=St(),a=nt;if(a!==null)return Rg(s,a,i);St(),s=s.memoizedState,a=St();var u=a.queue.dispatch;return a.memoizedState=i,[s,u,!1]}function vr(i,s,a,u){return i={tag:i,create:a,deps:u,inst:s,next:null},s=xe.updateQueue,s===null&&(s=xu(),xe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,s.lastEffect=i),i}function wg(){return St().memoizedState}function Vu(i,s,a,u){var g=ln();xe.flags|=i,g.memoizedState=vr(1|s,{destroy:void 0},a,u===void 0?null:u)}function Pu(i,s,a,u){var g=St();u=u===void 0?null:u;var _=g.memoizedState.inst;nt!==null&&u!==null&&rd(u,nt.memoizedState.deps)?g.memoizedState=vr(s,_,a,u):(xe.flags|=i,g.memoizedState=vr(1|s,_,a,u))}function bg(i,s){Vu(8390656,8,i,s)}function gd(i,s){Pu(2048,8,i,s)}function WA(i){xe.flags|=4;var s=xe.updateQueue;if(s===null)s=xu(),xe.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function Ng(i){var s=St().memoizedState;return WA({ref:s,nextImpl:i}),function(){if(($e&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function xg(i,s){return Pu(4,2,i,s)}function Mg(i,s){return Pu(4,4,i,s)}function Dg(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Vg(i,s,a){a=a!=null?a.concat([i]):null,Pu(4,4,Dg.bind(null,s,i),a)}function yd(){}function Pg(i,s){var a=St();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&rd(s,u[1])?u[0]:(a.memoizedState=[i,s],i)}function Ug(i,s){var a=St();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&rd(s,u[1]))return u[0];if(u=i(),xs){bn(!0);try{i()}finally{bn(!1)}}return a.memoizedState=[u,s],u}function _d(i,s,a){return a===void 0||(Yi&1073741824)!==0&&(Le&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=Ly(),xe.lanes|=i,Do|=i,a)}function Lg(i,s,a,u){return En(a,s)?a:gr.current!==null?(i=_d(i,a,u),En(i,s)||(Mt=!0),i):(Yi&42)===0||(Yi&1073741824)!==0&&(Le&261930)===0?(Mt=!0,i.memoizedState=a):(i=Ly(),xe.lanes|=i,Do|=i,s)}function kg(i,s,a,u,g){var _=re.p;re.p=_!==0&&8>_?_:8;var A=$.T,R={};$.T=R,Ed(i,!1,s,a);try{var V=g(),Y=$.S;if(Y!==null&&Y(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var W=JA(V,u);Ja(i,s,W,wn(i))}else Ja(i,s,u,wn(i))}catch(te){Ja(i,s,{then:function(){},status:"rejected",reason:te},wn())}finally{re.p=_,A!==null&&R.types!==null&&(A.types=R.types),$.T=A}}function ZA(){}function vd(i,s,a,u){if(i.tag!==5)throw Error(o(476));var g=Og(i).queue;kg(i,g,s,ye,a===null?ZA:function(){return qg(i),a(u)})}function Og(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:ye},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function qg(i){var s=Og(i);s.next===null&&(s=i.alternate.memoizedState),Ja(i,s.next.queue,{},wn())}function Td(){return Qt(ul)}function Bg(){return St().memoizedState}function Gg(){return St().memoizedState}function jA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=wn();i=Io(a);var u=wo(s,i,a);u!==null&&(yn(u,s,a),Ga(u,s,a)),s={cache:Xf()},i.payload=s;return}s=s.return}}function eC(i,s,a){var u=wn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Uu(i)?Hg(s,a):(a=Of(i,s,a,u),a!==null&&(yn(a,i,u),zg(a,s,u)))}function Fg(i,s,a){var u=wn();Ja(i,s,a,u)}function Ja(i,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Uu(i))Hg(s,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var A=s.lastRenderedState,R=_(A,a);if(g.hasEagerState=!0,g.eagerState=R,En(R,A))return mu(i,s,g,0),rt===null&&pu(),!1}catch{}finally{}if(a=Of(i,s,g,u),a!==null)return yn(a,i,u),zg(a,s,u),!0}return!1}function Ed(i,s,a,u){if(u={lane:2,revertLane:jd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Uu(i)){if(s)throw Error(o(479))}else s=Of(i,a,u,2),s!==null&&yn(s,i,2)}function Uu(i){var s=i.alternate;return i===xe||s!==null&&s===xe}function Hg(i,s){yr=bu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function zg(i,s,a){if((a&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,pa(i,a)}}var Ka={readContext:Qt,use:Mu,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Ka.useEffectEvent=gt;var Yg={readContext:Qt,use:Mu,useCallback:function(i,s){return ln().memoizedState=[i,s===void 0?null:s],i},useContext:Qt,useEffect:bg,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Vu(4194308,4,Dg.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Vu(4194308,4,i,s)},useInsertionEffect:function(i,s){Vu(4,2,i,s)},useMemo:function(i,s){var a=ln();s=s===void 0?null:s;var u=i();if(xs){bn(!0);try{i()}finally{bn(!1)}}return a.memoizedState=[u,s],u},useReducer:function(i,s,a){var u=ln();if(a!==void 0){var g=a(s);if(xs){bn(!0);try{a(s)}finally{bn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=eC.bind(null,xe,i),[u.memoizedState,i]},useRef:function(i){var s=ln();return i={current:i},s.memoizedState=i},useState:function(i){i=pd(i);var s=i.queue,a=Fg.bind(null,xe,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:yd,useDeferredValue:function(i,s){var a=ln();return _d(a,i,s)},useTransition:function(){var i=pd(!1);return i=kg.bind(null,xe,i.queue,!0,!1),ln().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var u=xe,g=ln();if(Ge){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),rt===null)throw Error(o(349));(Le&127)!==0||dg(u,s,a)}g.memoizedState=a;var _={value:a,getSnapshot:s};return g.queue=_,bg(pg.bind(null,u,_,i),[i]),u.flags|=2048,vr(9,{destroy:void 0},hg.bind(null,u,_,a,s),null),a},useId:function(){var i=ln(),s=rt.identifierPrefix;if(Ge){var a=wi,u=Ii;a=(u&~(1<<32-vt(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Nu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=KA++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Td,useFormState:Ag,useActionState:Ag,useOptimistic:function(i){var s=ln();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Ed.bind(null,xe,!0,a),a.dispatch=s,[i,s]},useMemoCache:fd,useCacheRefresh:function(){return ln().memoizedState=jA.bind(null,xe)},useEffectEvent:function(i){var s=ln(),a={impl:i};return s.memoizedState=a,function(){if(($e&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Sd={readContext:Qt,use:Mu,useCallback:Pg,useContext:Qt,useEffect:gd,useImperativeHandle:Vg,useInsertionEffect:xg,useLayoutEffect:Mg,useMemo:Ug,useReducer:Du,useRef:wg,useState:function(){return Du(Ji)},useDebugValue:yd,useDeferredValue:function(i,s){var a=St();return Lg(a,nt.memoizedState,i,s)},useTransition:function(){var i=Du(Ji)[0],s=St().memoizedState;return[typeof i=="boolean"?i:Ya(i),s]},useSyncExternalStore:fg,useId:Bg,useHostTransitionStatus:Td,useFormState:Cg,useActionState:Cg,useOptimistic:function(i,s){var a=St();return yg(a,nt,i,s)},useMemoCache:fd,useCacheRefresh:Gg};Sd.useEffectEvent=Ng;var Jg={readContext:Qt,use:Mu,useCallback:Pg,useContext:Qt,useEffect:gd,useImperativeHandle:Vg,useInsertionEffect:xg,useLayoutEffect:Mg,useMemo:Ug,useReducer:hd,useRef:wg,useState:function(){return hd(Ji)},useDebugValue:yd,useDeferredValue:function(i,s){var a=St();return nt===null?_d(a,i,s):Lg(a,nt.memoizedState,i,s)},useTransition:function(){var i=hd(Ji)[0],s=St().memoizedState;return[typeof i=="boolean"?i:Ya(i),s]},useSyncExternalStore:fg,useId:Bg,useHostTransitionStatus:Td,useFormState:Ig,useActionState:Ig,useOptimistic:function(i,s){var a=St();return nt!==null?yg(a,nt,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:fd,useCacheRefresh:Gg};Jg.useEffectEvent=Ng;function Ad(i,s,a,u){s=i.memoizedState,a=a(u,s),a=a==null?s:T({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Cd={enqueueSetState:function(i,s,a){i=i._reactInternals;var u=wn(),g=Io(u);g.payload=s,a!=null&&(g.callback=a),s=wo(i,g,u),s!==null&&(yn(s,i,u),Ga(s,i,u))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var u=wn(),g=Io(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=wo(i,g,u),s!==null&&(yn(s,i,u),Ga(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=wn(),u=Io(a);u.tag=2,s!=null&&(u.callback=s),s=wo(i,u,a),s!==null&&(yn(s,i,a),Ga(s,i,a))}};function Kg(i,s,a,u,g,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,A):s.prototype&&s.prototype.isPureReactComponent?!Va(a,u)||!Va(g,_):!0}function Qg(i,s,a,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==i&&Cd.enqueueReplaceState(s,s.state,null)}function Ms(i,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(i=i.defaultProps){a===s&&(a=T({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function Xg(i){hu(i)}function $g(i){console.error(i)}function Wg(i){hu(i)}function Lu(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Zg(i,s,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Rd(i,s,a){return a=Io(a),a.tag=3,a.payload={element:null},a.callback=function(){Lu(i,s)},a}function jg(i){return i=Io(i),i.tag=3,i}function ey(i,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){Zg(s,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Zg(s,a,u),typeof g!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function tC(i,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&fr(s,a,g,!0),a=An.current,a!==null){switch(a.tag){case 31:case 13:return On===null?Qu():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Au?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),$d(i,u,g)),!1;case 22:return a.flags|=65536,u===Au?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),$d(i,u,g)),!1}throw Error(o(435,a.tag))}return $d(i,u,g),Qu(),!1}if(Ge)return s=An.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==zf&&(i=Error(o(422),{cause:u}),La(Pn(i,a)))):(u!==zf&&(s=Error(o(423),{cause:u}),La(Pn(s,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Pn(u,a),g=Rd(i.stateNode,u,g),td(i,g),yt!==4&&(yt=2)),!1;var _=Error(o(520),{cause:u});if(_=Pn(_,a),tl===null?tl=[_]:tl.push(_),yt!==4&&(yt=2),s===null)return!0;u=Pn(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=Rd(a.stateNode,u,i),td(a,i),!1;case 1:if(s=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Vo===null||!Vo.has(_))))return a.flags|=65536,g&=-g,a.lanes|=g,g=jg(g),ey(g,i,a,u),td(a,g),!1}a=a.return}while(a!==null);return!1}var Id=Error(o(461)),Mt=!1;function Xt(i,s,a,u){s.child=i===null?og(s,null,a,u):Ns(s,i.child,a,u)}function ty(i,s,a,u,g){a=a.render;var _=s.ref;if("ref"in u){var A={};for(var R in u)R!=="ref"&&(A[R]=u[R])}else A=u;return Rs(s),u=ad(i,s,a,A,_,g),R=ld(),i!==null&&!Mt?(ud(i,s,g),Ki(i,s,g)):(Ge&&R&&Ff(s),s.flags|=1,Xt(i,s,u,g),s.child)}function ny(i,s,a,u,g){if(i===null){var _=a.type;return typeof _=="function"&&!qf(_)&&_.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=_,iy(i,s,_,u,g)):(i=yu(a.type,null,u,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!Pd(i,g)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:Va,a(A,u)&&i.ref===s.ref)return Ki(i,s,g)}return s.flags|=1,i=Gi(_,u),i.ref=s.ref,i.return=s,s.child=i}function iy(i,s,a,u,g){if(i!==null){var _=i.memoizedProps;if(Va(_,u)&&i.ref===s.ref)if(Mt=!1,s.pendingProps=u=_,Pd(i,g))(i.flags&131072)!==0&&(Mt=!0);else return s.lanes=i.lanes,Ki(i,s,g)}return wd(i,s,a,u,g)}function oy(i,s,a,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=s.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,s.child=null;return sy(i,s,_,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Eu(s,_!==null?_.cachePool:null),_!==null?ag(s,_):id(),lg(s);else return u=s.lanes=536870912,sy(i,s,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Eu(s,_.cachePool),ag(s,_),No(),s.memoizedState=null):(i!==null&&Eu(s,null),id(),No());return Xt(i,s,g,a),s.child}function Qa(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function sy(i,s,a,u,g){var _=Wf();return _=_===null?null:{parent:Nt._currentValue,pool:_},s.memoizedState={baseLanes:a,cachePool:_},i!==null&&Eu(s,null),id(),lg(s),i!==null&&fr(i,s,u,!0),s.childLanes=g,null}function ku(i,s){return s=qu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function ry(i,s,a){return Ns(s,i.child,null,a),i=ku(s,s.pendingProps),i.flags|=2,Cn(s),s.memoizedState=null,i}function nC(i,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Ge){if(u.mode==="hidden")return i=ku(s,u),s.lanes=536870912,Qa(null,i);if(sd(s),(i=ct)?(i=__(i,kn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Eo!==null?{id:Ii,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Hm(i),a.return=s,s.child=a,Kt=s,ct=null)):i=null,i===null)throw Ao(s);return s.lanes=536870912,null}return ku(s,u)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(sd(s),g)if(s.flags&256)s.flags&=-257,s=ry(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(Mt||fr(i,s,a,!1),g=(a&i.childLanes)!==0,Mt||g){if(u=rt,u!==null&&(A=ma(u,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Es(i,A),yn(u,i,A),Id;Qu(),s=ry(i,s,a)}else i=_.treeContext,ct=qn(A.nextSibling),Kt=s,Ge=!0,So=null,kn=!1,i!==null&&Jm(s,i),s=ku(s,u),s.flags|=4096;return s}return i=Gi(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Ou(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function wd(i,s,a,u,g){return Rs(s),a=ad(i,s,a,u,void 0,g),u=ld(),i!==null&&!Mt?(ud(i,s,g),Ki(i,s,g)):(Ge&&u&&Ff(s),s.flags|=1,Xt(i,s,a,g),s.child)}function ay(i,s,a,u,g,_){return Rs(s),s.updateQueue=null,a=cg(s,u,a,g),ug(i),u=ld(),i!==null&&!Mt?(ud(i,s,_),Ki(i,s,_)):(Ge&&u&&Ff(s),s.flags|=1,Xt(i,s,a,_),s.child)}function ly(i,s,a,u,g){if(Rs(s),s.stateNode===null){var _=ar,A=a.contextType;typeof A=="object"&&A!==null&&(_=Qt(A)),_=new a(u,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Cd,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=u,_.state=s.memoizedState,_.refs={},jf(s),A=a.contextType,_.context=typeof A=="object"&&A!==null?Qt(A):ar,_.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Ad(s,a,A,u),_.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Cd.enqueueReplaceState(_,_.state,null),Ha(s,u,_,g),Fa(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){_=s.stateNode;var R=s.memoizedProps,V=Ms(a,R);_.props=V;var Y=_.context,W=a.contextType;A=ar,typeof W=="object"&&W!==null&&(A=Qt(W));var te=a.getDerivedStateFromProps;W=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||Y!==A)&&Qg(s,_,u,A),Ro=!1;var J=s.memoizedState;_.state=J,Ha(s,u,_,g),Fa(),Y=s.memoizedState,R||J!==Y||Ro?(typeof te=="function"&&(Ad(s,a,te,u),Y=s.memoizedState),(V=Ro||Kg(s,a,V,u,J,Y,A))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=Y),_.props=u,_.state=Y,_.context=A,u=V):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{_=s.stateNode,ed(i,s),A=s.memoizedProps,W=Ms(a,A),_.props=W,te=s.pendingProps,J=_.context,Y=a.contextType,V=ar,typeof Y=="object"&&Y!==null&&(V=Qt(Y)),R=a.getDerivedStateFromProps,(Y=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==te||J!==V)&&Qg(s,_,u,V),Ro=!1,J=s.memoizedState,_.state=J,Ha(s,u,_,g),Fa();var X=s.memoizedState;A!==te||J!==X||Ro||i!==null&&i.dependencies!==null&&vu(i.dependencies)?(typeof R=="function"&&(Ad(s,a,R,u),X=s.memoizedState),(W=Ro||Kg(s,a,W,u,J,X,V)||i!==null&&i.dependencies!==null&&vu(i.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,X,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,X,V)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=X),_.props=u,_.state=X,_.context=V,u=W):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),u=!1)}return _=u,Ou(i,s),u=(s.flags&128)!==0,_||u?(_=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&u?(s.child=Ns(s,i.child,null,g),s.child=Ns(s,null,a,g)):Xt(i,s,a,g),s.memoizedState=_.state,i=s.child):i=Ki(i,s,g),i}function uy(i,s,a,u){return As(),s.flags|=256,Xt(i,s,a,u),s.child}var bd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nd(i){return{baseLanes:i,cachePool:Zm()}}function xd(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=In),i}function cy(i,s,a){var u=s.pendingProps,g=!1,_=(s.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Et.current&2)!==0),A&&(g=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ge){if(g?bo(s):No(),(i=ct)?(i=__(i,kn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Eo!==null?{id:Ii,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Hm(i),a.return=s,s.child=a,Kt=s,ct=null)):i=null,i===null)throw Ao(s);return dh(i)?s.lanes=32:s.lanes=536870912,null}var R=u.children;return u=u.fallback,g?(No(),g=s.mode,R=qu({mode:"hidden",children:R},g),u=Ss(u,g,a,null),R.return=s,u.return=s,R.sibling=u,s.child=R,u=s.child,u.memoizedState=Nd(a),u.childLanes=xd(i,A,a),s.memoizedState=bd,Qa(null,u)):(bo(s),Md(s,R))}var V=i.memoizedState;if(V!==null&&(R=V.dehydrated,R!==null)){if(_)s.flags&256?(bo(s),s.flags&=-257,s=Dd(i,s,a)):s.memoizedState!==null?(No(),s.child=i.child,s.flags|=128,s=null):(No(),R=u.fallback,g=s.mode,u=qu({mode:"visible",children:u.children},g),R=Ss(R,g,a,null),R.flags|=2,u.return=s,R.return=s,u.sibling=R,s.child=u,Ns(s,i.child,null,a),u=s.child,u.memoizedState=Nd(a),u.childLanes=xd(i,A,a),s.memoizedState=bd,s=Qa(null,u));else if(bo(s),dh(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var Y=A.dgst;A=Y,u=Error(o(419)),u.stack="",u.digest=A,La({value:u,source:null,stack:null}),s=Dd(i,s,a)}else if(Mt||fr(i,s,a,!1),A=(a&i.childLanes)!==0,Mt||A){if(A=rt,A!==null&&(u=ma(A,a),u!==0&&u!==V.retryLane))throw V.retryLane=u,Es(i,u),yn(A,i,u),Id;fh(R)||Qu(),s=Dd(i,s,a)}else fh(R)?(s.flags|=192,s.child=i.child,s=null):(i=V.treeContext,ct=qn(R.nextSibling),Kt=s,Ge=!0,So=null,kn=!1,i!==null&&Jm(s,i),s=Md(s,u.children),s.flags|=4096);return s}return g?(No(),R=u.fallback,g=s.mode,V=i.child,Y=V.sibling,u=Gi(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,Y!==null?R=Gi(Y,R):(R=Ss(R,g,a,null),R.flags|=2),R.return=s,u.return=s,u.sibling=R,s.child=u,Qa(null,u),u=s.child,R=i.child.memoizedState,R===null?R=Nd(a):(g=R.cachePool,g!==null?(V=Nt._currentValue,g=g.parent!==V?{parent:V,pool:V}:g):g=Zm(),R={baseLanes:R.baseLanes|a,cachePool:g}),u.memoizedState=R,u.childLanes=xd(i,A,a),s.memoizedState=bd,Qa(i.child,u)):(bo(s),a=i.child,i=a.sibling,a=Gi(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function Md(i,s){return s=qu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function qu(i,s){return i=Sn(22,i,null,s),i.lanes=0,i}function Dd(i,s,a){return Ns(s,i.child,null,a),i=Md(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function fy(i,s,a){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Kf(i.return,s,a)}function Vd(i,s,a,u,g,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:_}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=g,A.treeForkCount=_)}function dy(i,s,a){var u=s.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var A=Et.current,R=(A&2)!==0;if(R?(A=A&1|2,s.flags|=128):A&=1,le(Et,A),Xt(i,s,u,a),u=Ge?Ua:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&fy(i,a,s);else if(i.tag===19)fy(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)i=a.alternate,i!==null&&wu(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),Vd(s,!1,g,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&wu(i)===null){s.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}Vd(s,!0,a,null,_,u);break;case"together":Vd(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Ki(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Do|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(fr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=Gi(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Gi(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function Pd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&vu(i)))}function iC(i,s,a){switch(s.tag){case 3:_t(s,s.stateNode.containerInfo),Co(s,Nt,i.memoizedState.cache),As();break;case 27:case 5:Ae(s);break;case 4:_t(s,s.stateNode.containerInfo);break;case 10:Co(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,sd(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(bo(s),s.flags|=128,null):(a&s.child.childLanes)!==0?cy(i,s,a):(bo(s),i=Ki(i,s,a),i!==null?i.sibling:null);bo(s);break;case 19:var g=(i.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(fr(i,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return dy(i,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),le(Et,Et.current),u)break;return null;case 22:return s.lanes=0,oy(i,s,a,s.pendingProps);case 24:Co(s,Nt,i.memoizedState.cache)}return Ki(i,s,a)}function hy(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)Mt=!0;else{if(!Pd(i,a)&&(s.flags&128)===0)return Mt=!1,iC(i,s,a);Mt=(i.flags&131072)!==0}else Mt=!1,Ge&&(s.flags&1048576)!==0&&Ym(s,Ua,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=ws(s.elementType),s.type=i,typeof i=="function")qf(i)?(u=Ms(i,u),s.tag=1,s=ly(null,s,i,u,a)):(s.tag=0,s=wd(null,s,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===se){s.tag=11,s=ty(null,s,i,u,a);break e}else if(g===x){s.tag=14,s=ny(null,s,i,u,a);break e}}throw s=De(i)||i,Error(o(306,s,""))}}return s;case 0:return wd(i,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=Ms(u,s.pendingProps),ly(i,s,u,g,a);case 3:e:{if(_t(s,s.stateNode.containerInfo),i===null)throw Error(o(387));u=s.pendingProps;var _=s.memoizedState;g=_.element,ed(i,s),Ha(s,u,null,a);var A=s.memoizedState;if(u=A.cache,Co(s,Nt,u),u!==_.cache&&Qf(s,[Nt],a,!0),Fa(),u=A.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=uy(i,s,u,a);break e}else if(u!==g){g=Pn(Error(o(424)),s),La(g),s=uy(i,s,u,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ct=qn(i.firstChild),Kt=s,Ge=!0,So=null,kn=!0,a=og(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(As(),u===g){s=Ki(i,s,a);break e}Xt(i,s,u,a)}s=s.child}return s;case 26:return Ou(i,s),i===null?(a=C_(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ge||(a=s.type,i=s.pendingProps,u=tc(be.current).createElement(a),u[It]=s,u[Bt]=i,$t(u,a,i),wt(u),s.stateNode=u):s.memoizedState=C_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Ae(s),i===null&&Ge&&(u=s.stateNode=E_(s.type,s.pendingProps,be.current),Kt=s,kn=!0,g=ct,ko(s.type)?(hh=g,ct=qn(u.firstChild)):ct=g),Xt(i,s,s.pendingProps.children,a),Ou(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ge&&((g=u=ct)&&(u=VC(u,s.type,s.pendingProps,kn),u!==null?(s.stateNode=u,Kt=s,ct=qn(u.firstChild),kn=!1,g=!0):g=!1),g||Ao(s)),Ae(s),g=s.type,_=s.pendingProps,A=i!==null?i.memoizedProps:null,u=_.children,lh(g,_)?u=null:A!==null&&lh(g,A)&&(s.flags|=32),s.memoizedState!==null&&(g=ad(i,s,QA,null,null,a),ul._currentValue=g),Ou(i,s),Xt(i,s,u,a),s.child;case 6:return i===null&&Ge&&((i=a=ct)&&(a=PC(a,s.pendingProps,kn),a!==null?(s.stateNode=a,Kt=s,ct=null,i=!0):i=!1),i||Ao(s)),null;case 13:return cy(i,s,a);case 4:return _t(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Ns(s,null,u,a):Xt(i,s,u,a),s.child;case 11:return ty(i,s,s.type,s.pendingProps,a);case 7:return Xt(i,s,s.pendingProps,a),s.child;case 8:return Xt(i,s,s.pendingProps.children,a),s.child;case 12:return Xt(i,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Co(s,s.type,u.value),Xt(i,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Rs(s),g=Qt(g),u=u(g),s.flags|=1,Xt(i,s,u,a),s.child;case 14:return ny(i,s,s.type,s.pendingProps,a);case 15:return iy(i,s,s.type,s.pendingProps,a);case 19:return dy(i,s,a);case 31:return nC(i,s,a);case 22:return oy(i,s,a,s.pendingProps);case 24:return Rs(s),u=Qt(Nt),i===null?(g=Wf(),g===null&&(g=rt,_=Xf(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=a),g=_),s.memoizedState={parent:u,cache:g},jf(s),Co(s,Nt,g)):((i.lanes&a)!==0&&(ed(i,s),Ha(s,null,null,a),Fa()),g=i.memoizedState,_=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Co(s,Nt,u)):(u=_.cache,Co(s,Nt,u),u!==g.cache&&Qf(s,[Nt],a,!0))),Xt(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Qi(i){i.flags|=4}function Ud(i,s,a,u,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(By())i.flags|=8192;else throw bs=Au,Zf}else i.flags&=-16777217}function py(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!N_(s))if(By())i.flags|=8192;else throw bs=Au,Zf}function Bu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Jl():536870912,i.lanes|=s,Ar|=s)}function Xa(i,s){if(!Ge)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ft(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(s)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,s}function oC(i,s,a){var u=s.pendingProps;switch(Hf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return a=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),zi(Nt),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(cr(s)?Qi(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Yf())),ft(s),null;case 26:var g=s.type,_=s.memoizedState;return i===null?(Qi(s),_!==null?(ft(s),py(s,_)):(ft(s),Ud(s,g,null,u,a))):_?_!==i.memoizedState?(Qi(s),ft(s),py(s,_)):(ft(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&Qi(s),ft(s),Ud(s,g,i,u,a)),null;case 27:if(st(s),a=be.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Qi(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ft(s),null}i=de.current,cr(s)?Km(s):(i=E_(g,u,a),s.stateNode=i,Qi(s))}return ft(s),null;case 5:if(st(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Qi(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ft(s),null}if(_=de.current,cr(s))Km(s);else{var A=tc(be.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?A.createElement(g,{is:u.is}):A.createElement(g)}}_[It]=s,_[Bt]=u;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=_;e:switch($t(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Qi(s)}}return ft(s),Ud(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Qi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=be.current,cr(s)){if(i=s.stateNode,a=s.memoizedProps,u=null,g=Kt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[It]=s,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||c_(i.nodeValue,a)),i||Ao(s,!0)}else i=tc(i).createTextNode(u),i[It]=s,s.stateNode=i}return ft(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(u=cr(s),a!==null){if(i===null){if(!u)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[It]=s}else As(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),i=!1}else a=Yf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(Cn(s),s):(Cn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return ft(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=cr(s),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[It]=s}else As(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),g=!1}else g=Yf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Cn(s),s):(Cn(s),null)}return Cn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),Bu(s,s.updateQueue),ft(s),null);case 4:return lt(),i===null&&ih(s.stateNode.containerInfo),ft(s),null;case 10:return zi(s.type),ft(s),null;case 19:if(ee(Et),u=s.memoizedState,u===null)return ft(s),null;if(g=(s.flags&128)!==0,_=u.rendering,_===null)if(g)Xa(u,!1);else{if(yt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=wu(i),_!==null){for(s.flags|=128,Xa(u,!1),i=_.updateQueue,s.updateQueue=i,Bu(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)Fm(a,i),a=a.sibling;return le(Et,Et.current&1|2),Ge&&Fi(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&rn()>Yu&&(s.flags|=128,g=!0,Xa(u,!1),s.lanes=4194304)}else{if(!g)if(i=wu(_),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Bu(s,i),Xa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ge)return ft(s),null}else 2*rn()-u.renderingStartTime>Yu&&a!==536870912&&(s.flags|=128,g=!0,Xa(u,!1),s.lanes=4194304);u.isBackwards?(_.sibling=s.child,s.child=_):(i=u.last,i!==null?i.sibling=_:s.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=rn(),i.sibling=null,a=Et.current,le(Et,g?a&1|2:a&1),Ge&&Fi(s,u.treeForkCount),i):(ft(s),null);case 22:case 23:return Cn(s),od(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),a=s.updateQueue,a!==null&&Bu(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),i!==null&&ee(Is),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),zi(Nt),ft(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function sC(i,s){switch(Hf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return zi(Nt),lt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return st(s),null;case 31:if(s.memoizedState!==null){if(Cn(s),s.alternate===null)throw Error(o(340));As()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Cn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));As()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ee(Et),null;case 4:return lt(),null;case 10:return zi(s.type),null;case 22:case 23:return Cn(s),od(),i!==null&&ee(Is),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return zi(Nt),null;case 25:return null;default:return null}}function my(i,s){switch(Hf(s),s.tag){case 3:zi(Nt),lt();break;case 26:case 27:case 5:st(s);break;case 4:lt();break;case 31:s.memoizedState!==null&&Cn(s);break;case 13:Cn(s);break;case 19:ee(Et);break;case 10:zi(s.type);break;case 22:case 23:Cn(s),od(),i!==null&&ee(Is);break;case 24:zi(Nt)}}function $a(i,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var _=a.create,A=a.inst;u=_(),A.destroy=u}a=a.next}while(a!==g)}}catch(R){et(s,s.return,R)}}function xo(i,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var A=u.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,g=s;var V=a,Y=R;try{Y()}catch(W){et(g,V,W)}}}u=u.next}while(u!==_)}}catch(W){et(s,s.return,W)}}function gy(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{rg(s,a)}catch(u){et(i,i.return,u)}}}function yy(i,s,a){a.props=Ms(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){et(i,s,u)}}function Wa(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){et(i,s,g)}}function bi(i,s){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){et(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){et(i,s,g)}else a.current=null}function _y(i){var s=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){et(i,i.return,g)}}function Ld(i,s,a){try{var u=i.stateNode;wC(u,i.type,a,s),u[Bt]=s}catch(g){et(i,i.return,g)}}function vy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ko(i.type)||i.tag===4}function kd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||vy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ko(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Od(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Xn));else if(u!==4&&(u===27&&ko(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Od(i,s,a),i=i.sibling;i!==null;)Od(i,s,a),i=i.sibling}function Gu(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(u!==4&&(u===27&&ko(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Gu(i,s,a),i=i.sibling;i!==null;)Gu(i,s,a),i=i.sibling}function Ty(i){var s=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);$t(s,u,a),s[It]=i,s[Bt]=a}catch(_){et(i,i.return,_)}}var Xi=!1,Dt=!1,qd=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function rC(i,s){if(i=i.containerInfo,rh=lc,i=Vm(i),Df(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,R=-1,V=-1,Y=0,W=0,te=i,J=null;t:for(;;){for(var X;te!==a||g!==0&&te.nodeType!==3||(R=A+g),te!==_||u!==0&&te.nodeType!==3||(V=A+u),te.nodeType===3&&(A+=te.nodeValue.length),(X=te.firstChild)!==null;)J=te,te=X;for(;;){if(te===i)break t;if(J===a&&++Y===g&&(R=A),J===_&&++W===u&&(V=A),(X=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=X}a=R===-1||V===-1?null:{start:R,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(ah={focusedElem:i,selectionRange:a},lc=!1,Ft=s;Ft!==null;)if(s=Ft,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Ft=i;else for(;Ft!==null;){switch(s=Ft,_=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=s,g=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var me=Ms(a.type,g);i=u.getSnapshotBeforeUpdate(me,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Te){et(a,a.return,Te)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)ch(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ch(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,Ft=i;break}Ft=s.return}}function Sy(i,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(i,a),u&4&&$a(5,a);break;case 1:if(Wi(i,a),u&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){et(a,a.return,A)}else{var g=Ms(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){et(a,a.return,A)}}u&64&&gy(a),u&512&&Wa(a,a.return);break;case 3:if(Wi(i,a),u&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{rg(i,s)}catch(A){et(a,a.return,A)}}break;case 27:s===null&&u&4&&Ty(a);case 26:case 5:Wi(i,a),s===null&&u&4&&_y(a),u&512&&Wa(a,a.return);break;case 12:Wi(i,a);break;case 31:Wi(i,a),u&4&&Ry(i,a);break;case 13:Wi(i,a),u&4&&Iy(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=mC.bind(null,a),UC(i,a))));break;case 22:if(u=a.memoizedState!==null||Xi,!u){s=s!==null&&s.memoizedState!==null||Dt,g=Xi;var _=Dt;Xi=u,(Dt=s)&&!_?Zi(i,a,(a.subtreeFlags&8772)!==0):Wi(i,a),Xi=g,Dt=_}break;case 30:break;default:Wi(i,a)}}function Ay(i){var s=i.alternate;s!==null&&(i.alternate=null,Ay(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Ks(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,hn=!1;function $i(i,s,a){for(a=a.child;a!==null;)Cy(i,s,a),a=a.sibling}function Cy(i,s,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:Dt||bi(a,s),$i(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||bi(a,s);var u=pt,g=hn;ko(a.type)&&(pt=a.stateNode,hn=!1),$i(i,s,a),rl(a.stateNode),pt=u,hn=g;break;case 5:Dt||bi(a,s);case 6:if(u=pt,g=hn,pt=null,$i(i,s,a),pt=u,hn=g,pt!==null)if(hn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(_){et(a,s,_)}else try{pt.removeChild(a.stateNode)}catch(_){et(a,s,_)}break;case 18:pt!==null&&(hn?(i=pt,g_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Mr(i)):g_(pt,a.stateNode));break;case 4:u=pt,g=hn,pt=a.stateNode.containerInfo,hn=!0,$i(i,s,a),pt=u,hn=g;break;case 0:case 11:case 14:case 15:xo(2,a,s),Dt||xo(4,a,s),$i(i,s,a);break;case 1:Dt||(bi(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&yy(a,s,u)),$i(i,s,a);break;case 21:$i(i,s,a);break;case 22:Dt=(u=Dt)||a.memoizedState!==null,$i(i,s,a),Dt=u;break;default:$i(i,s,a)}}function Ry(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Mr(i)}catch(a){et(s,s.return,a)}}}function Iy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Mr(i)}catch(a){et(s,s.return,a)}}function aC(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Ey),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Ey),s;default:throw Error(o(435,i.tag))}}function Fu(i,s){var a=aC(i);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=gC.bind(null,i,u);u.then(g,g)}})}function pn(i,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],_=i,A=s,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(ko(R.type)){pt=R.stateNode,hn=!1;break e}break;case 5:pt=R.stateNode,hn=!1;break e;case 3:case 4:pt=R.stateNode.containerInfo,hn=!0;break e}R=R.return}if(pt===null)throw Error(o(160));Cy(_,A,g),pt=null,hn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wy(s,i),s=s.sibling}var ti=null;function wy(i,s){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:pn(s,i),mn(i),u&4&&(xo(3,i,i.return),$a(3,i),xo(5,i,i.return));break;case 1:pn(s,i),mn(i),u&512&&(Dt||a===null||bi(a,a.return)),u&64&&Xi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=ti;if(pn(s,i),mn(i),u&512&&(Dt||a===null||bi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[pi]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),$t(_,u,a),_[It]=i,wt(_),u=_;break e;case"link":var A=w_("link","href",g).get(u+(a.href||""));if(A){for(var R=0;R<A.length;R++)if(_=A[R],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(R,1);break t}}_=g.createElement(u),$t(_,u,a),g.head.appendChild(_);break;case"meta":if(A=w_("meta","content",g).get(u+(a.content||""))){for(R=0;R<A.length;R++)if(_=A[R],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(R,1);break t}}_=g.createElement(u),$t(_,u,a),g.head.appendChild(_);break;default:throw Error(o(468,u))}_[It]=i,wt(_),u=_}i.stateNode=u}else b_(g,i.type,i.stateNode);else i.stateNode=I_(g,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?b_(g,i.type,i.stateNode):I_(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Ld(i,i.memoizedProps,a.memoizedProps)}break;case 27:pn(s,i),mn(i),u&512&&(Dt||a===null||bi(a,a.return)),a!==null&&u&4&&Ld(i,i.memoizedProps,a.memoizedProps);break;case 5:if(pn(s,i),mn(i),u&512&&(Dt||a===null||bi(a,a.return)),i.flags&32){g=i.stateNode;try{dn(g,"")}catch(me){et(i,i.return,me)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,Ld(i,g,a!==null?a.memoizedProps:g)),u&1024&&(qd=!0);break;case 6:if(pn(s,i),mn(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(me){et(i,i.return,me)}}break;case 3:if(oc=null,g=ti,ti=nc(s.containerInfo),pn(s,i),ti=g,mn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Mr(s.containerInfo)}catch(me){et(i,i.return,me)}qd&&(qd=!1,by(i));break;case 4:u=ti,ti=nc(i.stateNode.containerInfo),pn(s,i),mn(i),ti=u;break;case 12:pn(s,i),mn(i);break;case 31:pn(s,i),mn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Fu(i,u)));break;case 13:pn(s,i),mn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zu=rn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Fu(i,u)));break;case 22:g=i.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,Y=Xi,W=Dt;if(Xi=Y||g,Dt=W||V,pn(s,i),Dt=W,Xi=Y,mn(i),u&8192)e:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||V||Xi||Dt||Ds(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){V=a=s;try{if(_=V.stateNode,g)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=V.stateNode;var te=V.memoizedProps.style,J=te!=null&&te.hasOwnProperty("display")?te.display:null;R.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(me){et(V,V.return,me)}}}else if(s.tag===6){if(a===null){V=s;try{V.stateNode.nodeValue=g?"":V.memoizedProps}catch(me){et(V,V.return,me)}}}else if(s.tag===18){if(a===null){V=s;try{var X=V.stateNode;g?y_(X,!0):y_(V.stateNode,!1)}catch(me){et(V,V.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Fu(i,a))));break;case 19:pn(s,i),mn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Fu(i,u)));break;case 30:break;case 21:break;default:pn(s,i),mn(i)}}function mn(i){var s=i.flags;if(s&2){try{for(var a,u=i.return;u!==null;){if(vy(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,_=kd(i);Gu(i,_,g);break;case 5:var A=a.stateNode;a.flags&32&&(dn(A,""),a.flags&=-33);var R=kd(i);Gu(i,R,A);break;case 3:case 4:var V=a.stateNode.containerInfo,Y=kd(i);Od(i,Y,V);break;default:throw Error(o(161))}}catch(W){et(i,i.return,W)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function by(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;by(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Wi(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Sy(i,s.alternate,s),s=s.sibling}function Ds(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:xo(4,s,s.return),Ds(s);break;case 1:bi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&yy(s,s.return,a),Ds(s);break;case 27:rl(s.stateNode);case 26:case 5:bi(s,s.return),Ds(s);break;case 22:s.memoizedState===null&&Ds(s);break;case 30:Ds(s);break;default:Ds(s)}i=i.sibling}}function Zi(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=i,_=s,A=_.flags;switch(_.tag){case 0:case 11:case 15:Zi(g,_,a),$a(4,_);break;case 1:if(Zi(g,_,a),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Y){et(u,u.return,Y)}if(u=_,g=u.updateQueue,g!==null){var R=u.stateNode;try{var V=g.shared.hiddenCallbacks;if(V!==null)for(g.shared.hiddenCallbacks=null,g=0;g<V.length;g++)sg(V[g],R)}catch(Y){et(u,u.return,Y)}}a&&A&64&&gy(_),Wa(_,_.return);break;case 27:Ty(_);case 26:case 5:Zi(g,_,a),a&&u===null&&A&4&&_y(_),Wa(_,_.return);break;case 12:Zi(g,_,a);break;case 31:Zi(g,_,a),a&&A&4&&Ry(g,_);break;case 13:Zi(g,_,a),a&&A&4&&Iy(g,_);break;case 22:_.memoizedState===null&&Zi(g,_,a),Wa(_,_.return);break;case 30:break;default:Zi(g,_,a)}s=s.sibling}}function Bd(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&ka(a))}function Gd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ka(i))}function ni(i,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ny(i,s,a,u),s=s.sibling}function Ny(i,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ni(i,s,a,u),g&2048&&$a(9,s);break;case 1:ni(i,s,a,u);break;case 3:ni(i,s,a,u),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ka(i)));break;case 12:if(g&2048){ni(i,s,a,u),i=s.stateNode;try{var _=s.memoizedProps,A=_.id,R=_.onPostCommit;typeof R=="function"&&R(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){et(s,s.return,V)}}else ni(i,s,a,u);break;case 31:ni(i,s,a,u);break;case 13:ni(i,s,a,u);break;case 23:break;case 22:_=s.stateNode,A=s.alternate,s.memoizedState!==null?_._visibility&2?ni(i,s,a,u):Za(i,s):_._visibility&2?ni(i,s,a,u):(_._visibility|=2,Tr(i,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Bd(A,s);break;case 24:ni(i,s,a,u),g&2048&&Gd(s.alternate,s);break;default:ni(i,s,a,u)}}function Tr(i,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=i,A=s,R=a,V=u,Y=A.flags;switch(A.tag){case 0:case 11:case 15:Tr(_,A,R,V,g),$a(8,A);break;case 23:break;case 22:var W=A.stateNode;A.memoizedState!==null?W._visibility&2?Tr(_,A,R,V,g):Za(_,A):(W._visibility|=2,Tr(_,A,R,V,g)),g&&Y&2048&&Bd(A.alternate,A);break;case 24:Tr(_,A,R,V,g),g&&Y&2048&&Gd(A.alternate,A);break;default:Tr(_,A,R,V,g)}s=s.sibling}}function Za(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,u=s,g=u.flags;switch(u.tag){case 22:Za(a,u),g&2048&&Bd(u.alternate,u);break;case 24:Za(a,u),g&2048&&Gd(u.alternate,u);break;default:Za(a,u)}s=s.sibling}}var ja=8192;function Er(i,s,a){if(i.subtreeFlags&ja)for(i=i.child;i!==null;)xy(i,s,a),i=i.sibling}function xy(i,s,a){switch(i.tag){case 26:Er(i,s,a),i.flags&ja&&i.memoizedState!==null&&KC(a,ti,i.memoizedState,i.memoizedProps);break;case 5:Er(i,s,a);break;case 3:case 4:var u=ti;ti=nc(i.stateNode.containerInfo),Er(i,s,a),ti=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=ja,ja=16777216,Er(i,s,a),ja=u):Er(i,s,a));break;default:Er(i,s,a)}}function My(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function el(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Ft=u,Vy(u,i)}My(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dy(i),i=i.sibling}function Dy(i){switch(i.tag){case 0:case 11:case 15:el(i),i.flags&2048&&xo(9,i,i.return);break;case 3:el(i);break;case 12:el(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Hu(i)):el(i);break;default:el(i)}}function Hu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Ft=u,Vy(u,i)}My(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:xo(8,s,s.return),Hu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Hu(s));break;default:Hu(s)}i=i.sibling}}function Vy(i,s){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:xo(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ka(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ft=u;else e:for(a=i;Ft!==null;){u=Ft;var g=u.sibling,_=u.return;if(Ay(u),u===a){Ft=null;break e}if(g!==null){g.return=_,Ft=g;break e}Ft=_}}}var lC={getCacheForType:function(i){var s=Qt(Nt),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return Qt(Nt).controller.signal}},uC=typeof WeakMap=="function"?WeakMap:Map,$e=0,rt=null,Ve=null,Le=0,je=0,Rn=null,Mo=!1,Sr=!1,Fd=!1,ji=0,yt=0,Do=0,Vs=0,Hd=0,In=0,Ar=0,tl=null,gn=null,zd=!1,zu=0,Py=0,Yu=1/0,Ju=null,Vo=null,kt=0,Po=null,Cr=null,eo=0,Yd=0,Jd=null,Uy=null,nl=0,Kd=null;function wn(){return($e&2)!==0&&Le!==0?Le&-Le:$.T!==null?jd():Kl()}function Ly(){if(In===0)if((Le&536870912)===0||Ge){var i=rs;rs<<=1,(rs&3932160)===0&&(rs=262144),In=i}else In=536870912;return i=An.current,i!==null&&(i.flags|=32),In}function yn(i,s,a){(i===rt&&(je===2||je===9)||i.cancelPendingCommit!==null)&&(Rr(i,0),Uo(i,Le,In,!1)),as(i,a),(($e&2)===0||i!==rt)&&(i===rt&&(($e&2)===0&&(Vs|=a),yt===4&&Uo(i,Le,In,!1)),Ni(i))}function ky(i,s,a){if(($e&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&i.expiredLanes)===0||Jn(i,s),g=u?dC(i,s):Xd(i,s,!0),_=u;do{if(g===0){Sr&&!u&&Uo(i,s,0,!1);break}else{if(a=i.current.alternate,_&&!cC(a)){g=Xd(i,s,!1),_=!1;continue}if(g===2){if(_=s,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var R=i;g=tl;var V=R.current.memoizedState.isDehydrated;if(V&&(Rr(R,A).flags|=256),A=Xd(R,A,!1),A!==2){if(Fd&&!V){R.errorRecoveryDisabledLanes|=_,Vs|=_,g=4;break e}_=gn,gn=g,_!==null&&(gn===null?gn=_:gn.push.apply(gn,_))}g=A}if(_=!1,g!==2)continue}}if(g===1){Rr(i,0),Uo(i,s,0,!0);break}e:{switch(u=i,_=g,_){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Uo(u,s,In,!Mo);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=zu+300-rn(),10<g)){if(Uo(u,s,In,!Mo),fi(u,0,!0)!==0)break e;eo=s,u.timeoutHandle=p_(Oy.bind(null,u,a,gn,Ju,zd,s,In,Vs,Ar,Mo,_,"Throttled",-0,0),g);break e}Oy(u,a,gn,Ju,zd,s,In,Vs,Ar,Mo,_,null,-0,0)}}break}while(!0);Ni(i)}function Oy(i,s,a,u,g,_,A,R,V,Y,W,te,J,X){if(i.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},xy(s,_,te);var me=(_&62914560)===_?zu-rn():(_&4194048)===_?Py-rn():0;if(me=QC(te,me),me!==null){eo=_,i.cancelPendingCommit=me(Jy.bind(null,i,s,_,a,u,g,A,R,V,W,te,null,J,X)),Uo(i,_,A,!Y);return}}Jy(i,s,_,a,u,g,A,R,V)}function cC(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],_=g.getSnapshot;g=g.value;try{if(!En(_(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Uo(i,s,a,u){s&=~Hd,s&=~Vs,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var g=s;0<g;){var _=31-vt(g),A=1<<_;u[_]=-1,g&=~A}a!==0&&ls(i,a,s)}function Ku(){return($e&6)===0?(il(0),!1):!0}function Qd(){if(Ve!==null){if(je===0)var i=Ve.return;else i=Ve,Hi=Cs=null,cd(i),mr=null,qa=0,i=Ve;for(;i!==null;)my(i.alternate,i),i=i.return;Ve=null}}function Rr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,xC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),eo=0,Qd(),rt=i,Ve=a=Gi(i.current,null),Le=s,je=0,Rn=null,Mo=!1,Sr=Jn(i,s),Fd=!1,Ar=In=Hd=Vs=Do=yt=0,gn=tl=null,zd=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var g=31-vt(u),_=1<<g;s|=i[g],u&=~_}return ji=s,pu(),a}function qy(i,s){xe=null,$.H=Ka,s===pr||s===Su?(s=tg(),je=3):s===Zf?(s=tg(),je=4):je=s===Id?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Rn=s,Ve===null&&(yt=1,Lu(i,Pn(s,i.current)))}function By(){var i=An.current;return i===null?!0:(Le&4194048)===Le?On===null:(Le&62914560)===Le||(Le&536870912)!==0?i===On:!1}function Gy(){var i=$.H;return $.H=Ka,i===null?Ka:i}function Fy(){var i=$.A;return $.A=lC,i}function Qu(){yt=4,Mo||(Le&4194048)!==Le&&An.current!==null||(Sr=!0),(Do&134217727)===0&&(Vs&134217727)===0||rt===null||Uo(rt,Le,In,!1)}function Xd(i,s,a){var u=$e;$e|=2;var g=Gy(),_=Fy();(rt!==i||Le!==s)&&(Ju=null,Rr(i,s)),s=!1;var A=yt;e:do try{if(je!==0&&Ve!==null){var R=Ve,V=Rn;switch(je){case 8:Qd(),A=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(s=!0);var Y=je;if(je=0,Rn=null,Ir(i,R,V,Y),a&&Sr){A=0;break e}break;default:Y=je,je=0,Rn=null,Ir(i,R,V,Y)}}fC(),A=yt;break}catch(W){qy(i,W)}while(!0);return s&&i.shellSuspendCounter++,Hi=Cs=null,$e=u,$.H=g,$.A=_,Ve===null&&(rt=null,Le=0,pu()),A}function fC(){for(;Ve!==null;)Hy(Ve)}function dC(i,s){var a=$e;$e|=2;var u=Gy(),g=Fy();rt!==i||Le!==s?(Ju=null,Yu=rn()+500,Rr(i,s)):Sr=Jn(i,s);e:do try{if(je!==0&&Ve!==null){s=Ve;var _=Rn;t:switch(je){case 1:je=0,Rn=null,Ir(i,s,_,1);break;case 2:case 9:if(jm(_)){je=0,Rn=null,zy(s);break}s=function(){je!==2&&je!==9||rt!==i||(je=7),Ni(i)},_.then(s,s);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:jm(_)?(je=0,Rn=null,zy(s)):(je=0,Rn=null,Ir(i,s,_,7));break;case 5:var A=null;switch(Ve.tag){case 26:A=Ve.memoizedState;case 5:case 27:var R=Ve;if(A?N_(A):R.stateNode.complete){je=0,Rn=null;var V=R.sibling;if(V!==null)Ve=V;else{var Y=R.return;Y!==null?(Ve=Y,Xu(Y)):Ve=null}break t}}je=0,Rn=null,Ir(i,s,_,5);break;case 6:je=0,Rn=null,Ir(i,s,_,6);break;case 8:Qd(),yt=6;break e;default:throw Error(o(462))}}hC();break}catch(W){qy(i,W)}while(!0);return Hi=Cs=null,$.H=u,$.A=g,$e=a,Ve!==null?0:(rt=null,Le=0,pu(),yt)}function hC(){for(;Ve!==null&&!Rf();)Hy(Ve)}function Hy(i){var s=hy(i.alternate,i,ji);i.memoizedProps=i.pendingProps,s===null?Xu(i):Ve=s}function zy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=ay(a,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=ay(a,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:cd(s);default:my(a,s),s=Ve=Fm(s,ji),s=hy(a,s,ji)}i.memoizedProps=i.pendingProps,s===null?Xu(i):Ve=s}function Ir(i,s,a,u){Hi=Cs=null,cd(s),mr=null,qa=0;var g=s.return;try{if(tC(i,g,s,a,Le)){yt=1,Lu(i,Pn(a,i.current)),Ve=null;return}}catch(_){if(g!==null)throw Ve=g,_;yt=1,Lu(i,Pn(a,i.current)),Ve=null;return}s.flags&32768?(Ge||u===1?i=!0:Sr||(Le&536870912)!==0?i=!1:(Mo=i=!0,(u===2||u===9||u===3||u===6)&&(u=An.current,u!==null&&u.tag===13&&(u.flags|=16384))),Yy(s,i)):Xu(s)}function Xu(i){var s=i;do{if((s.flags&32768)!==0){Yy(s,Mo);return}i=s.return;var a=oC(s.alternate,s,ji);if(a!==null){Ve=a;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=i}while(s!==null);yt===0&&(yt=5)}function Yy(i,s){do{var a=sC(i.alternate,i);if(a!==null){a.flags&=32767,Ve=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=a}while(i!==null);yt=6,Ve=null}function Jy(i,s,a,u,g,_,A,R,V){i.cancelPendingCommit=null;do $u();while(kt!==0);if(($e&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(_=s.lanes|s.childLanes,_|=kf,bf(i,a,_,A,R,V),i===rt&&(Ve=rt=null,Le=0),Cr=s,Po=i,eo=a,Yd=_,Jd=g,Uy=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,yC(co,function(){return Wy(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,g=re.p,re.p=2,A=$e,$e|=4;try{rC(i,s,a)}finally{$e=A,re.p=g,$.T=u}}kt=1,Ky(),Qy(),Xy()}}function Ky(){if(kt===1){kt=0;var i=Po,s=Cr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var u=re.p;re.p=2;var g=$e;$e|=4;try{wy(s,i);var _=ah,A=Vm(i.containerInfo),R=_.focusedElem,V=_.selectionRange;if(A!==R&&R&&R.ownerDocument&&Dm(R.ownerDocument.documentElement,R)){if(V!==null&&Df(R)){var Y=V.start,W=V.end;if(W===void 0&&(W=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(W,R.value.length);else{var te=R.ownerDocument||document,J=te&&te.defaultView||window;if(J.getSelection){var X=J.getSelection(),me=R.textContent.length,Te=Math.min(V.start,me),ot=V.end===void 0?Te:Math.min(V.end,me);!X.extend&&Te>ot&&(A=ot,ot=Te,Te=A);var F=Mm(R,Te),k=Mm(R,ot);if(F&&k&&(X.rangeCount!==1||X.anchorNode!==F.node||X.anchorOffset!==F.offset||X.focusNode!==k.node||X.focusOffset!==k.offset)){var z=te.createRange();z.setStart(F.node,F.offset),X.removeAllRanges(),Te>ot?(X.addRange(z),X.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),X.addRange(z))}}}}for(te=[],X=R;X=X.parentNode;)X.nodeType===1&&te.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<te.length;R++){var j=te[R];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}lc=!!rh,ah=rh=null}finally{$e=g,re.p=u,$.T=a}}i.current=s,kt=2}}function Qy(){if(kt===2){kt=0;var i=Po,s=Cr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var u=re.p;re.p=2;var g=$e;$e|=4;try{Sy(i,s.alternate,s)}finally{$e=g,re.p=u,$.T=a}}kt=3}}function Xy(){if(kt===4||kt===3){kt=0,Bl();var i=Po,s=Cr,a=eo,u=Uy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?kt=5:(kt=0,Cr=Po=null,$y(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Vo=null),ki(a),s=s.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Yn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,g=re.p,re.p=2,$.T=null;try{for(var _=i.onRecoverableError,A=0;A<u.length;A++){var R=u[A];_(R.value,{componentStack:R.stack})}}finally{$.T=s,re.p=g}}(eo&3)!==0&&$u(),Ni(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Kd?nl++:(nl=0,Kd=i):nl=0,il(0)}}function $y(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,ka(s)))}function $u(){return Ky(),Qy(),Xy(),Wy()}function Wy(){if(kt!==5)return!1;var i=Po,s=Yd;Yd=0;var a=ki(eo),u=$.T,g=re.p;try{re.p=32>a?32:a,$.T=null,a=Jd,Jd=null;var _=Po,A=eo;if(kt=0,Cr=Po=null,eo=0,($e&6)!==0)throw Error(o(331));var R=$e;if($e|=4,Dy(_.current),Ny(_,_.current,A,a),$e=R,il(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Yn,_)}catch{}return!0}finally{re.p=g,$.T=u,$y(i,s)}}function Zy(i,s,a){s=Pn(a,s),s=Rd(i.stateNode,s,2),i=wo(i,s,2),i!==null&&(as(i,2),Ni(i))}function et(i,s,a){if(i.tag===3)Zy(i,i,a);else for(;s!==null;){if(s.tag===3){Zy(s,i,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vo===null||!Vo.has(u))){i=Pn(a,i),a=jg(2),u=wo(s,a,2),u!==null&&(ey(a,u,s,i),as(u,2),Ni(u));break}}s=s.return}}function $d(i,s,a){var u=i.pingCache;if(u===null){u=i.pingCache=new uC;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(Fd=!0,g.add(a),i=pC.bind(null,i,s,a),s.then(i,i))}function pC(i,s,a){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,rt===i&&(Le&a)===a&&(yt===4||yt===3&&(Le&62914560)===Le&&300>rn()-zu?($e&2)===0&&Rr(i,0):Hd|=a,Ar===Le&&(Ar=0)),Ni(i)}function jy(i,s){s===0&&(s=Jl()),i=Es(i,s),i!==null&&(as(i,s),Ni(i))}function mC(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),jy(i,a)}function gC(i,s){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),jy(i,a)}function yC(i,s){return Lt(i,s)}var Wu=null,wr=null,Wd=!1,Zu=!1,Zd=!1,Lo=0;function Ni(i){i!==wr&&i.next===null&&(wr===null?Wu=wr=i:wr=wr.next=i),Zu=!0,Wd||(Wd=!0,vC())}function il(i,s){if(!Zd&&Zu){Zd=!0;do for(var a=!1,u=Wu;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var A=u.suspendedLanes,R=u.pingedLanes;_=(1<<31-vt(42|i)+1)-1,_&=g&~(A&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,i_(u,_))}else _=Le,_=fi(u,u===rt?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Jn(u,_)||(a=!0,i_(u,_));u=u.next}while(a);Zd=!1}}function _C(){e_()}function e_(){Zu=Wd=!1;var i=0;Lo!==0&&NC()&&(i=Lo);for(var s=rn(),a=null,u=Wu;u!==null;){var g=u.next,_=t_(u,s);_===0?(u.next=null,a===null?Wu=g:a.next=g,g===null&&(wr=a)):(a=u,(i!==0||(_&3)!==0)&&(Zu=!0)),u=g}kt!==0&&kt!==5||il(i),Lo!==0&&(Lo=0)}function t_(i,s){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-vt(_),R=1<<A,V=g[A];V===-1?((R&a)===0||(R&u)!==0)&&(g[A]=wf(R,s)):V<=s&&(i.expiredLanes|=R),_&=~R}if(s=rt,a=Le,a=fi(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===s&&(je===2||je===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&uo(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Jn(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(u!==null&&uo(u),ki(a)){case 2:case 8:a=ha;break;case 32:a=co;break;case 268435456:a=Gl;break;default:a=co}return u=n_.bind(null,i),a=Lt(a,u),i.callbackPriority=s,i.callbackNode=a,s}return u!==null&&u!==null&&uo(u),i.callbackPriority=2,i.callbackNode=null,2}function n_(i,s){if(kt!==0&&kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if($u()&&i.callbackNode!==a)return null;var u=Le;return u=fi(i,i===rt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(ky(i,u,s),t_(i,rn()),i.callbackNode!=null&&i.callbackNode===a?n_.bind(null,i):null)}function i_(i,s){if($u())return null;ky(i,s,!0)}function vC(){MC(function(){($e&6)!==0?Lt(da,_C):e_()})}function jd(){if(Lo===0){var i=dr;i===0&&(i=ui,ui<<=1,(ui&261888)===0&&(ui=256)),Lo=i}return Lo}function o_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ws(""+i)}function s_(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function TC(i,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var _=o_((g[Bt]||null).action),A=u.submitter;A&&(s=(s=A[Bt]||null)?o_(s.formAction):A.getAttribute("formAction"),s!==null&&(_=s,A=null));var R=new Si("action","action",null,u,g);i.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Lo!==0){var V=A?s_(g,A):new FormData(g);vd(a,{pending:!0,data:V,method:g.method,action:_},null,V)}}else typeof _=="function"&&(R.preventDefault(),V=A?s_(g,A):new FormData(g),vd(a,{pending:!0,data:V,method:g.method,action:_},_,V))},currentTarget:g}]})}}for(var eh=0;eh<Lf.length;eh++){var th=Lf[eh],EC=th.toLowerCase(),SC=th[0].toUpperCase()+th.slice(1);ei(EC,"on"+SC)}ei(Lm,"onAnimationEnd"),ei(km,"onAnimationIteration"),ei(Om,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(OA,"onTransitionRun"),ei(qA,"onTransitionStart"),ei(BA,"onTransitionCancel"),ei(qm,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ol));function r_(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;e:{var _=void 0;if(s)for(var A=u.length-1;0<=A;A--){var R=u[A],V=R.instance,Y=R.currentTarget;if(R=R.listener,V!==_&&g.isPropagationStopped())break e;_=R,g.currentTarget=Y;try{_(g)}catch(W){hu(W)}g.currentTarget=null,_=V}else for(A=0;A<u.length;A++){if(R=u[A],V=R.instance,Y=R.currentTarget,R=R.listener,V!==_&&g.isPropagationStopped())break e;_=R,g.currentTarget=Y;try{_(g)}catch(W){hu(W)}g.currentTarget=null,_=V}}}}function Pe(i,s){var a=s[Js];a===void 0&&(a=s[Js]=new Set);var u=i+"__bubble";a.has(u)||(a_(s,i,2,!1),a.add(u))}function nh(i,s,a){var u=0;s&&(u|=4),a_(a,i,u,s)}var ju="_reactListening"+Math.random().toString(36).slice(2);function ih(i){if(!i[ju]){i[ju]=!0,ga.forEach(function(a){a!=="selectionchange"&&(AC.has(a)||nh(a,!1,i),nh(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[ju]||(s[ju]=!0,nh("selectionchange",!1,s))}}function a_(i,s,a,u){switch(L_(s)){case 2:var g=WC;break;case 8:g=ZC;break;default:g=_h}a=g.bind(null,s,a,i),g=void 0,!hs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(s,a,{capture:!0,passive:g}):i.addEventListener(s,a,!0):g!==void 0?i.addEventListener(s,a,{passive:g}):i.addEventListener(s,a,!1)}function oh(i,s,a,u,g){var _=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var R=u.stateNode.containerInfo;if(R===g)break;if(A===4)for(A=u.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;R!==null;){if(A=mi(R),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){u=_=A;continue e}R=R.parentNode}}u=u.return}yo(function(){var Y=_,W=xn(a),te=[];e:{var J=Bm.get(i);if(J!==void 0){var X=Si,me=i;switch(i){case"keypress":if(ms(a)===0)break e;case"keydown":case"keyup":X=cu;break;case"focusin":me="focus",X=ys;break;case"focusout":me="blur",X=ys;break;case"beforeblur":case"afterblur":X=ys;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=E;break;case Lm:case km:case Om:X=iu;break;case qm:X=w;break;case"scroll":case"scrollend":X=ba;break;case"wheel":X=K;break;case"copy":case"cut":case"paste":X=ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Bi;break;case"toggle":case"beforetoggle":X=Ne}var Te=(s&4)!==0,ot=!Te&&(i==="scroll"||i==="scrollend"),F=Te?J!==null?J+"Capture":null:J;Te=[];for(var k=Y,z;k!==null;){var j=k;if(z=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||z===null||F===null||(j=$n(k,F),j!=null&&Te.push(sl(k,j,z))),ot)break;k=k.return}0<Te.length&&(J=new X(J,me,null,a,W),te.push({event:J,listeners:Te}))}}if((s&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",J&&a!==Ra&&(me=a.relatedTarget||a.fromElement)&&(mi(me)||me[hi]))break e;if((X||J)&&(J=W.window===W?W:(J=W.ownerDocument)?J.defaultView||J.parentWindow:window,X?(me=a.relatedTarget||a.toElement,X=Y,me=me?mi(me):null,me!==null&&(ot=l(me),Te=me.tag,me!==ot||Te!==5&&Te!==27&&Te!==6)&&(me=null)):(X=null,me=Y),X!==me)){if(Te=Na,j="onMouseLeave",F="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Te=Bi,j="onPointerLeave",F="onPointerEnter",k="pointer"),ot=X==null?J:vn(X),z=me==null?J:vn(me),J=new Te(j,k+"leave",X,a,W),J.target=ot,J.relatedTarget=z,j=null,mi(W)===Y&&(Te=new Te(F,k+"enter",me,a,W),Te.target=z,Te.relatedTarget=ot,j=Te),ot=j,X&&me)t:{for(Te=CC,F=X,k=me,z=0,j=F;j;j=Te(j))z++;j=0;for(var _e=k;_e;_e=Te(_e))j++;for(;0<z-j;)F=Te(F),z--;for(;0<j-z;)k=Te(k),j--;for(;z--;){if(F===k||k!==null&&F===k.alternate){Te=F;break t}F=Te(F),k=Te(k)}Te=null}else Te=null;X!==null&&l_(te,J,X,Te,!1),me!==null&&ot!==null&&l_(te,ot,me,Te,!0)}}e:{if(J=Y?vn(Y):window,X=J.nodeName&&J.nodeName.toLowerCase(),X==="select"||X==="input"&&J.type==="file")var Ye=Rm;else if(Am(J))if(Im)Ye=UA;else{Ye=VA;var ge=DA}else X=J.nodeName,!X||X.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&$s(Y.elementType)&&(Ye=Rm):Ye=PA;if(Ye&&(Ye=Ye(i,Y))){Cm(te,Ye,a,W);break e}ge&&ge(i,J,Y),i==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&Sa(J,"number",J.value)}switch(ge=Y?vn(Y):window,i){case"focusin":(Am(ge)||ge.contentEditable==="true")&&(or=ge,Vf=Y,Pa=null);break;case"focusout":Pa=Vf=or=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,Pm(te,a,W);break;case"selectionchange":if(kA)break;case"keydown":case"keyup":Pm(te,a,W)}var Me;if(Xe)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else ir?_s(i,a)&&(ke="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Ri&&a.locale!=="ko"&&(ir||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&ir&&(Me=wa()):(Ei=W,Ia="value"in Ei?Ei.value:Ei.textContent,ir=!0)),ge=ec(Y,ke),0<ge.length&&(ke=new Ci(ke,i,null,a,W),te.push({event:ke,listeners:ge}),Me?ke.data=Me:(Me=nr(a),Me!==null&&(ke.data=Me)))),(Me=Dn?bA(i,a):NA(i,a))&&(ke=ec(Y,"onBeforeInput"),0<ke.length&&(ge=new Ci("onBeforeInput","beforeinput",null,a,W),te.push({event:ge,listeners:ke}),ge.data=Me)),TC(te,i,Y,a,W)}r_(te,s)})}function sl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function ec(i,s){for(var a=s+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=$n(i,a),g!=null&&u.unshift(sl(i,g,_)),g=$n(i,s),g!=null&&u.push(sl(i,g,_))),i.tag===3)return u;i=i.return}return[]}function CC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function l_(i,s,a,u,g){for(var _=s._reactName,A=[];a!==null&&a!==u;){var R=a,V=R.alternate,Y=R.stateNode;if(R=R.tag,V!==null&&V===u)break;R!==5&&R!==26&&R!==27||Y===null||(V=Y,g?(Y=$n(a,_),Y!=null&&A.unshift(sl(a,Y,V))):g||(Y=$n(a,_),Y!=null&&A.push(sl(a,Y,V)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var RC=/\r\n?/g,IC=/\u0000|\uFFFD/g;function u_(i){return(typeof i=="string"?i:""+i).replace(RC,`
`).replace(IC,"")}function c_(i,s){return s=u_(s),u_(i)===s}function it(i,s,a,u,g,_){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||dn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&dn(i,""+u);break;case"className":Tn(i,"class",u);break;case"tabIndex":Tn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(i,a,u);break;case"style":Ca(i,u,_);break;case"data":if(s!=="object"){Tn(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Ws(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(s!=="input"&&it(i,s,"name",g.name,g,null),it(i,s,"formEncType",g.formEncType,g,null),it(i,s,"formMethod",g.formMethod,g,null),it(i,s,"formTarget",g.formTarget,g,null)):(it(i,s,"encType",g.encType,g,null),it(i,s,"method",g.method,g,null),it(i,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Ws(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Xn);break;case"onScroll":u!=null&&Pe("scroll",i);break;case"onScrollEnd":u!=null&&Pe("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=Ws(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Pe("beforetoggle",i),Pe("toggle",i),Qs(i,"popover",u);break;case"xlinkActuate":bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":bt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":bt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":bt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":bt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qs(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=eu.get(a)||a,Qs(i,a,u))}}function sh(i,s,a,u,g,_){switch(a){case"style":Ca(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof u=="string"?dn(i,u):(typeof u=="number"||typeof u=="bigint")&&dn(i,""+u);break;case"onScroll":u!=null&&Pe("scroll",i);break;case"onScrollEnd":u!=null&&Pe("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ya.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),_=i[Bt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(s,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,u,g);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):Qs(i,a,u)}}}function $t(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",i),Pe("load",i);var u=!1,g=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:it(i,s,_,A,a,null)}}g&&it(i,s,"srcSet",a.srcSet,a,null),u&&it(i,s,"src",a.src,a,null);return;case"input":Pe("invalid",i);var R=_=A=g=null,V=null,Y=null;for(u in a)if(a.hasOwnProperty(u)){var W=a[u];if(W!=null)switch(u){case"name":g=W;break;case"type":A=W;break;case"checked":V=W;break;case"defaultChecked":Y=W;break;case"value":_=W;break;case"defaultValue":R=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,s));break;default:it(i,s,u,W,a,null)}}Wl(i,_,R,V,Y,A,g,!1);return;case"select":Pe("invalid",i),u=A=_=null;for(g in a)if(a.hasOwnProperty(g)&&(R=a[g],R!=null))switch(g){case"value":_=R;break;case"defaultValue":A=R;break;case"multiple":u=R;default:it(i,s,g,R,a,null)}s=_,a=A,i.multiple=!!u,s!=null?ho(i,!!u,s,!1):a!=null&&ho(i,!!u,a,!0);return;case"textarea":Pe("invalid",i),_=g=u=null;for(A in a)if(a.hasOwnProperty(A)&&(R=a[A],R!=null))switch(A){case"value":u=R;break;case"defaultValue":g=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(91));break;default:it(i,s,A,R,a,null)}po(i,u,g,_);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(u=a[V],u!=null))switch(V){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:it(i,s,V,u,a,null)}return;case"dialog":Pe("beforetoggle",i),Pe("toggle",i),Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":Pe("load",i);break;case"video":case"audio":for(u=0;u<ol.length;u++)Pe(ol[u],i);break;case"image":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"embed":case"source":case"link":Pe("error",i),Pe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(u=a[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:it(i,s,Y,u,a,null)}return;default:if($s(s)){for(W in a)a.hasOwnProperty(W)&&(u=a[W],u!==void 0&&sh(i,s,W,u,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(u=a[R],u!=null&&it(i,s,R,u,a,null))}function wC(i,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,A=null,R=null,V=null,Y=null,W=null;for(X in a){var te=a[X];if(a.hasOwnProperty(X)&&te!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":V=te;default:u.hasOwnProperty(X)||it(i,s,X,null,u,te)}}for(var J in u){var X=u[J];if(te=a[J],u.hasOwnProperty(J)&&(X!=null||te!=null))switch(J){case"type":_=X;break;case"name":g=X;break;case"checked":Y=X;break;case"defaultChecked":W=X;break;case"value":A=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,s));break;default:X!==te&&it(i,s,J,X,u,te)}}Xs(i,A,R,V,Y,W,_,g);return;case"select":X=A=R=J=null;for(_ in a)if(V=a[_],a.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":X=V;default:u.hasOwnProperty(_)||it(i,s,_,null,u,V)}for(g in u)if(_=u[g],V=a[g],u.hasOwnProperty(g)&&(_!=null||V!=null))switch(g){case"value":J=_;break;case"defaultValue":R=_;break;case"multiple":A=_;default:_!==V&&it(i,s,g,_,u,V)}s=R,a=A,u=X,J!=null?ho(i,!!a,J,!1):!!u!=!!a&&(s!=null?ho(i,!!a,s,!0):ho(i,!!a,a?[]:"",!1));return;case"textarea":X=J=null;for(R in a)if(g=a[R],a.hasOwnProperty(R)&&g!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:it(i,s,R,null,u,g)}for(A in u)if(g=u[A],_=a[A],u.hasOwnProperty(A)&&(g!=null||_!=null))switch(A){case"value":J=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==_&&it(i,s,A,g,u,_)}Zl(i,J,X);return;case"option":for(var me in a)if(J=a[me],a.hasOwnProperty(me)&&J!=null&&!u.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:it(i,s,me,null,u,J)}for(V in u)if(J=u[V],X=a[V],u.hasOwnProperty(V)&&J!==X&&(J!=null||X!=null))switch(V){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:it(i,s,V,J,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)J=a[Te],a.hasOwnProperty(Te)&&J!=null&&!u.hasOwnProperty(Te)&&it(i,s,Te,null,u,J);for(Y in u)if(J=u[Y],X=a[Y],u.hasOwnProperty(Y)&&J!==X&&(J!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,s));break;default:it(i,s,Y,J,u,X)}return;default:if($s(s)){for(var ot in a)J=a[ot],a.hasOwnProperty(ot)&&J!==void 0&&!u.hasOwnProperty(ot)&&sh(i,s,ot,void 0,u,J);for(W in u)J=u[W],X=a[W],!u.hasOwnProperty(W)||J===X||J===void 0&&X===void 0||sh(i,s,W,J,u,X);return}}for(var F in a)J=a[F],a.hasOwnProperty(F)&&J!=null&&!u.hasOwnProperty(F)&&it(i,s,F,null,u,J);for(te in u)J=u[te],X=a[te],!u.hasOwnProperty(te)||J===X||J==null&&X==null||it(i,s,te,J,u,X)}function f_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],_=g.transferSize,A=g.initiatorType,R=g.duration;if(_&&R&&f_(A)){for(A=0,R=g.responseEnd,u+=1;u<a.length;u++){var V=a[u],Y=V.startTime;if(Y>R)break;var W=V.transferSize,te=V.initiatorType;W&&f_(te)&&(V=V.responseEnd,A+=W*(V<R?1:(R-Y)/(V-Y)))}if(--u,s+=8*(_+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var rh=null,ah=null;function tc(i){return i.nodeType===9?i:i.ownerDocument}function d_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function lh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var uh=null;function NC(){var i=window.event;return i&&i.type==="popstate"?i===uh?!1:(uh=i,!0):(uh=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,xC=typeof clearTimeout=="function"?clearTimeout:void 0,m_=typeof Promise=="function"?Promise:void 0,MC=typeof queueMicrotask=="function"?queueMicrotask:typeof m_<"u"?function(i){return m_.resolve(null).then(i).catch(DC)}:p_;function DC(i){setTimeout(function(){throw i})}function ko(i){return i==="head"}function g_(i,s){var a=s,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),Mr(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")rl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,rl(a);for(var _=a.firstChild;_;){var A=_.nextSibling,R=_.nodeName;_[pi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&rl(i.ownerDocument.body);a=g}while(a);Mr(s)}function y_(i,s){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function ch(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ch(a),Ks(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function VC(i,s,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[pi])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=qn(i.nextSibling),i===null)break}return null}function PC(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=qn(i.nextSibling),i===null))return null;return i}function __(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=qn(i.nextSibling),i===null))return null;return i}function fh(i){return i.data==="$?"||i.data==="$~"}function dh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function UC(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function qn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var hh=null;function v_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return qn(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function T_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function E_(i,s,a){switch(s=tc(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function rl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Ks(i)}var Bn=new Map,S_=new Set;function nc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var to=re.d;re.d={f:LC,r:kC,D:OC,C:qC,L:BC,m:GC,X:HC,S:FC,M:zC};function LC(){var i=to.f(),s=Ku();return i||s}function kC(i){var s=Nn(i);s!==null&&s.tag===5&&s.type==="form"?qg(s):to.r(i)}var br=typeof document>"u"?null:document;function A_(i,s,a){var u=br;if(u&&typeof s=="string"&&s){var g=fn(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),S_.has(g)||(S_.add(g),i={rel:i,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),$t(s,"link",i),wt(s),u.head.appendChild(s)))}}function OC(i){to.D(i),A_("dns-prefetch",i,null)}function qC(i,s){to.C(i,s),A_("preconnect",i,s)}function BC(i,s,a){to.L(i,s,a);var u=br;if(u&&i&&s){var g='link[rel="preload"][as="'+fn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+fn(a.imageSizes)+'"]')):g+='[href="'+fn(i)+'"]';var _=g;switch(s){case"style":_=Nr(i);break;case"script":_=xr(i)}Bn.has(_)||(i=T({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),Bn.set(_,i),u.querySelector(g)!==null||s==="style"&&u.querySelector(al(_))||s==="script"&&u.querySelector(ll(_))||(s=u.createElement("link"),$t(s,"link",i),wt(s),u.head.appendChild(s)))}}function GC(i,s){to.m(i,s);var a=br;if(a&&i){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+fn(u)+'"][href="'+fn(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=xr(i)}if(!Bn.has(_)&&(i=T({rel:"modulepreload",href:i},s),Bn.set(_,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ll(_)))return}u=a.createElement("link"),$t(u,"link",i),wt(u),a.head.appendChild(u)}}}function FC(i,s,a){to.S(i,s,a);var u=br;if(u&&i){var g=gi(u).hoistableStyles,_=Nr(i);s=s||"default";var A=g.get(_);if(!A){var R={loading:0,preload:null};if(A=u.querySelector(al(_)))R.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":s},a),(a=Bn.get(_))&&ph(i,a);var V=A=u.createElement("link");wt(V),$t(V,"link",i),V._p=new Promise(function(Y,W){V.onload=Y,V.onerror=W}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,ic(A,s,u)}A={type:"stylesheet",instance:A,count:1,state:R},g.set(_,A)}}}function HC(i,s){to.X(i,s);var a=br;if(a&&i){var u=gi(a).hoistableScripts,g=xr(i),_=u.get(g);_||(_=a.querySelector(ll(g)),_||(i=T({src:i,async:!0},s),(s=Bn.get(g))&&mh(i,s),_=a.createElement("script"),wt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function zC(i,s){to.M(i,s);var a=br;if(a&&i){var u=gi(a).hoistableScripts,g=xr(i),_=u.get(g);_||(_=a.querySelector(ll(g)),_||(i=T({src:i,async:!0,type:"module"},s),(s=Bn.get(g))&&mh(i,s),_=a.createElement("script"),wt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function C_(i,s,a,u){var g=(g=be.current)?nc(g):null;if(!g)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Nr(a.href),a=gi(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Nr(a.href);var _=gi(g).hoistableStyles,A=_.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=g.querySelector(al(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Bn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(i,a),_||YC(g,i,a,A.state))),s&&u===null)throw Error(o(528,""));return A}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xr(a),a=gi(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Nr(i){return'href="'+fn(i)+'"'}function al(i){return'link[rel="stylesheet"]['+i+"]"}function R_(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function YC(i,s,a,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),$t(s,"link",a),wt(s),i.head.appendChild(s))}function xr(i){return'[src="'+fn(i)+'"]'}function ll(i){return"script[async]"+i}function I_(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+fn(a.href)+'"]');if(u)return s.instance=u,wt(u),u;var g=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),wt(u),$t(u,"style",g),ic(u,a.precedence,i),s.instance=u;case"stylesheet":g=Nr(a.href);var _=i.querySelector(al(g));if(_)return s.state.loading|=4,s.instance=_,wt(_),_;u=R_(a),(g=Bn.get(g))&&ph(u,g),_=(i.ownerDocument||i).createElement("link"),wt(_);var A=_;return A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),$t(_,"link",u),s.state.loading|=4,ic(_,a.precedence,i),s.instance=_;case"script":return _=xr(a.src),(g=i.querySelector(ll(_)))?(s.instance=g,wt(g),g):(u=a,(g=Bn.get(_))&&(u=T({},a),mh(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),wt(g),$t(g,"link",u),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ic(u,a.precedence,i));return s.instance}function ic(i,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,A=0;A<u.length;A++){var R=u[A];if(R.dataset.precedence===s)_=R;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function ph(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function mh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var oc=null;function w_(i,s,a){if(oc===null){var u=new Map,g=oc=new Map;g.set(a,u)}else g=oc,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var _=a[g];if(!(_[pi]||_[It]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(s)||"";A=i+A;var R=u.get(A);R?R.push(_):u.set(A,[_])}}return u}function b_(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function JC(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function N_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function KC(i,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Nr(u.href),_=s.querySelector(al(g));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=sc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=_,wt(_);return}_=s.ownerDocument||s,u=R_(u),(g=Bn.get(g))&&ph(u,g),_=_.createElement("link"),wt(_);var A=_;A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),$t(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=sc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var gh=0;function QC(i,s){return i.stylesheets&&i.count===0&&ac(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&ac(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+s);0<i.imgBytes&&gh===0&&(gh=62500*bC());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ac(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>gh?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ac(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var rc=null;function ac(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,rc=new Map,s.forEach(XC,i),rc=null,sc.call(i))}function XC(i,s){if(!(s.state.loading&4)){var a=rc.get(i);if(a)var u=a.get(null);else{a=new Map,rc.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var A=g[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}g=s.instance,A=g.getAttribute("data-precedence"),_=a.get(A)||u,_===u&&a.set(null,g),a.set(A,g),this.count++,u=sc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var ul={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function $C(i,s,a,u,g,_,A,R,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function x_(i,s,a,u,g,_,A,R,V,Y,W,te){return i=new $C(i,s,a,A,V,Y,W,te,R),s=1,_===!0&&(s|=24),_=Sn(3,null,null,s),i.current=_,_.stateNode=i,s=Xf(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:s},jf(_),i}function M_(i){return i?(i=ar,i):ar}function D_(i,s,a,u,g,_){g=M_(g),u.context===null?u.context=g:u.pendingContext=g,u=Io(s),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=wo(i,u,s),a!==null&&(yn(a,i,s),Ga(a,i,s))}function V_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function yh(i,s){V_(i,s),(i=i.alternate)&&V_(i,s)}function P_(i){if(i.tag===13||i.tag===31){var s=Es(i,67108864);s!==null&&yn(s,i,67108864),yh(i,67108864)}}function U_(i){if(i.tag===13||i.tag===31){var s=wn();s=us(s);var a=Es(i,s);a!==null&&yn(a,i,s),yh(i,s)}}var lc=!0;function WC(i,s,a,u){var g=$.T;$.T=null;var _=re.p;try{re.p=2,_h(i,s,a,u)}finally{re.p=_,$.T=g}}function ZC(i,s,a,u){var g=$.T;$.T=null;var _=re.p;try{re.p=8,_h(i,s,a,u)}finally{re.p=_,$.T=g}}function _h(i,s,a,u){if(lc){var g=vh(u);if(g===null)oh(i,s,u,uc,a),k_(i,u);else if(eR(g,i,s,a,u))u.stopPropagation();else if(k_(i,u),s&4&&-1<jC.indexOf(i)){for(;g!==null;){var _=Nn(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ci(_.pendingLanes);if(A!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var V=1<<31-vt(A);R.entanglements[1]|=V,A&=~V}Ni(_),($e&6)===0&&(Yu=rn()+500,il(0))}}break;case 31:case 13:R=Es(_,2),R!==null&&yn(R,_,2),Ku(),yh(_,2)}if(_=vh(u),_===null&&oh(i,s,u,uc,a),_===g)break;g=_}g!==null&&u.stopPropagation()}else oh(i,s,u,null,a)}}function vh(i){return i=xn(i),Th(i)}var uc=null;function Th(i){if(uc=null,i=mi(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=c(s),i!==null)return i;i=null}else if(a===31){if(i=d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return uc=i,null}function L_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ss()){case da:return 2;case ha:return 8;case co:case If:return 32;case Gl:return 268435456;default:return 32}default:return 32}}var Eh=!1,Oo=null,qo=null,Bo=null,cl=new Map,fl=new Map,Go=[],jC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k_(i,s){switch(i){case"focusin":case"focusout":Oo=null;break;case"dragenter":case"dragleave":qo=null;break;case"mouseover":case"mouseout":Bo=null;break;case"pointerover":case"pointerout":cl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(s.pointerId)}}function dl(i,s,a,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},s!==null&&(s=Nn(s),s!==null&&P_(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function eR(i,s,a,u,g){switch(s){case"focusin":return Oo=dl(Oo,i,s,a,u,g),!0;case"dragenter":return qo=dl(qo,i,s,a,u,g),!0;case"mouseover":return Bo=dl(Bo,i,s,a,u,g),!0;case"pointerover":var _=g.pointerId;return cl.set(_,dl(cl.get(_)||null,i,s,a,u,g)),!0;case"gotpointercapture":return _=g.pointerId,fl.set(_,dl(fl.get(_)||null,i,s,a,u,g)),!0}return!1}function O_(i){var s=mi(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){i.blockedOn=s,Kn(i.priority,function(){U_(a)});return}}else if(s===31){if(s=d(a),s!==null){i.blockedOn=s,Kn(i.priority,function(){U_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function cc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=vh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Ra=u,a.target.dispatchEvent(u),Ra=null}else return s=Nn(a),s!==null&&P_(s),i.blockedOn=a,!1;s.shift()}return!0}function q_(i,s,a){cc(i)&&a.delete(s)}function tR(){Eh=!1,Oo!==null&&cc(Oo)&&(Oo=null),qo!==null&&cc(qo)&&(qo=null),Bo!==null&&cc(Bo)&&(Bo=null),cl.forEach(q_),fl.forEach(q_)}function fc(i,s){i.blockedOn===s&&(i.blockedOn=null,Eh||(Eh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,tR)))}var dc=null;function B_(i){dc!==i&&(dc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){dc===i&&(dc=null);for(var s=0;s<i.length;s+=3){var a=i[s],u=i[s+1],g=i[s+2];if(typeof u!="function"){if(Th(u||a)===null)continue;break}var _=Nn(a);_!==null&&(i.splice(s,3),s-=3,vd(_,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Mr(i){function s(V){return fc(V,i)}Oo!==null&&fc(Oo,i),qo!==null&&fc(qo,i),Bo!==null&&fc(Bo,i),cl.forEach(s),fl.forEach(s);for(var a=0;a<Go.length;a++){var u=Go[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Go.length&&(a=Go[0],a.blockedOn===null);)O_(a),a.blockedOn===null&&Go.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],_=a[u+1],A=g[Bt]||null;if(typeof _=="function")A||B_(a);else if(A){var R=null;if(_&&_.hasAttribute("formAction")){if(g=_,A=_[Bt]||null)R=A.formAction;else if(Th(g)!==null)continue}else R=A.action;typeof R=="function"?a[u+1]=R:(a.splice(u,3),u-=3),B_(a)}}}function G_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Sh(i){this._internalRoot=i}hc.prototype.render=Sh.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=wn();D_(a,u,i,s,null,null)},hc.prototype.unmount=Sh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;D_(i.current,2,null,i,null,null),Ku(),s[hi]=null}};function hc(i){this._internalRoot=i}hc.prototype.unstable_scheduleHydration=function(i){if(i){var s=Kl();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Go.length&&s!==0&&s<Go[a].priority;a++);Go.splice(a,0,i),a===0&&O_(i)}};var F_=e.version;if(F_!=="19.2.3")throw Error(o(527,F_,"19.2.3"));re.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var nR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{Yn=pc.inject(nR),Yt=pc}catch{}}return pl.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,u="",g=Xg,_=$g,A=Wg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=x_(i,1,!1,null,null,a,u,null,g,_,A,G_),i[hi]=s.current,ih(i),new Sh(s)},pl.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var u=!1,g="",_=Xg,A=$g,R=Wg,V=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),s=x_(i,1,!0,s,a??null,u,g,V,_,A,R,G_),s.context=M_(null),a=s.current,u=wn(),u=us(u),g=Io(u),g.callback=null,wo(a,g,u),a=u,s.current.lanes=a,as(s,a),Ni(s),i[hi]=s.current,ih(i),new hc(s)},pl.version="19.2.3",pl}var Z_;function hR(){if(Z_)return Rh.exports;Z_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rh.exports=dR(),Rh.exports}var pR=hR();const mR=HT(pR),gR=()=>{};var j_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=function(n){const e=[];let t=0;for(let o=0;o<n.length;o++){let r=n.charCodeAt(o);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++o)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},yR=function(n){const e=[];let t=0,o=0;for(;t<n.length;){const r=n[t++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],d=n[t++],y=((r&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(y>>10)),e[o++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],c=n[t++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},YT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,d=c?n[r+1]:0,y=r+2<n.length,m=y?n[r+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,I=m&63;y||(I=64,c||(S=64)),o.push(t[v],t[T],t[S],t[I])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||d==null||m==null||T==null)throw new _R;const S=l<<2|d>>4;if(o.push(S),m!==64){const I=d<<4&240|m>>2;if(o.push(I),T!==64){const L=m<<6&192|T;o.push(L)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vR=function(n){const e=zT(n);return YT.encodeByteArray(e,!0)},Pc=function(n){return vR(n).replace(/\./g,"")},TR=function(n){try{return YT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=()=>ER().__FIREBASE_DEFAULTS__,AR=()=>{if(typeof process>"u"||typeof j_>"u")return;const n=j_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&TR(n[1]);return e&&JSON.parse(e)},Rp=()=>{try{return gR()||SR()||AR()||CR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RR=n=>{var e,t;return(t=(e=Rp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},IR=n=>{const e=RR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},JT=()=>{var n;return(n=Rp())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bR(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Pc(JSON.stringify(t)),Pc(JSON.stringify(c)),""].join(".")}const El={};function xR(){const n={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?n.emulator.push(e):n.prod.push(e);return n}function MR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ev=!1;function DR(n,e){if(typeof window>"u"||typeof document>"u"||!Ip(window.location.host)||El[n]===e||El[n]||ev)return;El[n]=e;function t(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=xR().prod.length>0;function c(){const S=document.getElementById(o);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{ev=!0,c()},S}function v(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=MR(o),I=t("text"),L=document.getElementById(I)||document.createElement("span"),B=t("learnmore"),D=document.getElementById(B)||document.createElement("a"),Q=t("preprendIcon"),oe=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;d(Z),v(D,B);const se=m();y(oe,Q),Z.append(oe,L,D,se),document.body.appendChild(Z)}l?(L.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PR(){var e;const n=(e=Rp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UR(){return!PR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LR(){try{return typeof indexedDB=="object"}catch{return!1}}function kR(){return new Promise((n,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(o),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="FirebaseError";class jr extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=OR,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,KT.prototype.create)}}class KT{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?qR(l,o):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new jr(r,d,o)}}function qR(n,e){return n.replace(BR,(t,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const BR=/\{\$([^}]+)}/g;function Uc(n,e){if(n===e)return!0;const t=Object.keys(n),o=Object.keys(e);for(const r of t){if(!o.includes(r))return!1;const l=n[r],c=e[r];if(tv(l)&&tv(c)){if(!Uc(l,c))return!1}else if(l!==c)return!1}for(const r of o)if(!t.includes(r))return!1;return!0}function tv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(n){return n&&n._delegate?n._delegate:n}class Il{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new wR;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HR(e))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=Ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ps){return this.instances.has(e)}getOptions(e=Ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&c.resolve(r)}return r}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const l=this.instances.get(o);return l&&e(l,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const r of o)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:FR(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Ps){return this.component?this.component.multipleInstances?e:Ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FR(n){return n===Ps?void 0:n}function HR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const YR={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},JR=ze.INFO,KR={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},QR=(n,e,...t)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),r=KR[e];if(r)console[r](`[${o}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class QT{constructor(e){this.name=e,this._logLevel=JR,this._logHandler=QR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const XR=(n,e)=>e.some(t=>n instanceof t);let nv,iv;function $R(){return nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WR(){return iv||(iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XT=new WeakMap,Hh=new WeakMap,$T=new WeakMap,Nh=new WeakMap,wp=new WeakMap;function ZR(n){const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Yo(n.result)),r()},c=()=>{o(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&XT.set(t,n)}).catch(()=>{}),wp.set(e,n),e}function jR(n){if(Hh.has(n))return;const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{o(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Hh.set(n,e)}let zh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$T.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function eI(n){zh=n(zh)}function tI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=n.call(xh(this),e,...t);return $T.set(o,e.sort?e.sort():[e]),Yo(o)}:WR().includes(n)?function(...e){return n.apply(xh(this),e),Yo(XT.get(this))}:function(...e){return Yo(n.apply(xh(this),e))}}function nI(n){return typeof n=="function"?tI(n):(n instanceof IDBTransaction&&jR(n),XR(n,$R())?new Proxy(n,zh):n)}function Yo(n){if(n instanceof IDBRequest)return ZR(n);if(Nh.has(n))return Nh.get(n);const e=nI(n);return e!==n&&(Nh.set(n,e),wp.set(e,n)),e}const xh=n=>wp.get(n);function iI(n,e,{blocked:t,upgrade:o,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),d=Yo(c);return o&&c.addEventListener("upgradeneeded",y=>{o(Yo(c.result),y.oldVersion,y.newVersion,Yo(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),d.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const oI=["get","getKey","getAll","getAllKeys","count"],sI=["put","add","delete","clear"],Mh=new Map;function ov(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mh.get(e))return Mh.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,r=sI.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(r||oI.includes(t)))return;const l=async function(c,...d){const y=this.transaction(c,r?"readwrite":"readonly");let m=y.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),r&&y.done]))[0]};return Mh.set(e,l),l}eI(n=>({...n,get:(e,t,o)=>ov(e,t)||n.get(e,t,o),has:(e,t)=>!!ov(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aI(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function aI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yh="@firebase/app",sv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new QT("@firebase/app"),lI="@firebase/app-compat",uI="@firebase/analytics-compat",cI="@firebase/analytics",fI="@firebase/app-check-compat",dI="@firebase/app-check",hI="@firebase/auth",pI="@firebase/auth-compat",mI="@firebase/database",gI="@firebase/data-connect",yI="@firebase/database-compat",_I="@firebase/functions",vI="@firebase/functions-compat",TI="@firebase/installations",EI="@firebase/installations-compat",SI="@firebase/messaging",AI="@firebase/messaging-compat",CI="@firebase/performance",RI="@firebase/performance-compat",II="@firebase/remote-config",wI="@firebase/remote-config-compat",bI="@firebase/storage",NI="@firebase/storage-compat",xI="@firebase/firestore",MI="@firebase/ai",DI="@firebase/firestore-compat",VI="firebase",PI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="[DEFAULT]",UI={[Yh]:"fire-core",[lI]:"fire-core-compat",[cI]:"fire-analytics",[uI]:"fire-analytics-compat",[dI]:"fire-app-check",[fI]:"fire-app-check-compat",[hI]:"fire-auth",[pI]:"fire-auth-compat",[mI]:"fire-rtdb",[gI]:"fire-data-connect",[yI]:"fire-rtdb-compat",[_I]:"fire-fn",[vI]:"fire-fn-compat",[TI]:"fire-iid",[EI]:"fire-iid-compat",[SI]:"fire-fcm",[AI]:"fire-fcm-compat",[CI]:"fire-perf",[RI]:"fire-perf-compat",[II]:"fire-rc",[wI]:"fire-rc-compat",[bI]:"fire-gcs",[NI]:"fire-gcs-compat",[xI]:"fire-fst",[DI]:"fire-fst-compat",[MI]:"fire-vertex","fire-js":"fire-js",[VI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,LI=new Map,Kh=new Map;function rv(n,e){try{n.container.addComponent(e)}catch(t){no.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function kc(n){const e=n.name;if(Kh.has(e))return no.debug(`There were multiple attempts to register component ${e}.`),!1;Kh.set(e,n);for(const t of Lc.values())rv(t,n);for(const t of LI.values())rv(t,n);return!0}function kI(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function OI(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jo=new KT("app","Firebase",qI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Il("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=PI;function WT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const o={name:Jh,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw Jo.create("bad-app-name",{appName:String(r)});if(t||(t=JT()),!t)throw Jo.create("no-options");const l=Lc.get(r);if(l){if(Uc(t,l.options)&&Uc(o,l.config))return l;throw Jo.create("duplicate-app",{appName:r})}const c=new zR(r);for(const y of Kh.values())c.addComponent(y);const d=new BI(t,o,c);return Lc.set(r,d),d}function FI(n=Jh){const e=Lc.get(n);if(!e&&n===Jh&&JT())return WT();if(!e)throw Jo.create("no-app",{appName:n});return e}function qr(n,e,t){let o=UI[n]??n;t&&(o+=`-${t}`);const r=o.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${o}" with version "${e}":`];r&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),no.warn(c.join(" "));return}kc(new Il(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="firebase-heartbeat-database",zI=1,wl="firebase-heartbeat-store";let Dh=null;function ZT(){return Dh||(Dh=iI(HI,zI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jo.create("idb-open",{originalErrorMessage:n.message})})),Dh}async function YI(n){try{const t=(await ZT()).transaction(wl),o=await t.objectStore(wl).get(jT(n));return await t.done,o}catch(e){if(e instanceof jr)no.warn(e.message);else{const t=Jo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});no.warn(t.message)}}}async function av(n,e){try{const o=(await ZT()).transaction(wl,"readwrite");await o.objectStore(wl).put(e,jT(n)),await o.done}catch(t){if(t instanceof jr)no.warn(t.message);else{const o=Jo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});no.warn(o.message)}}}function jT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=1024,KI=30;class QI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $I(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=lv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>KI){const c=WI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){no.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lv(),{heartbeatsToSend:o,unsentEntries:r}=XI(this._heartbeatsCache.heartbeats),l=Pc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return no.warn(t),""}}}function lv(){return new Date().toISOString().substring(0,10)}function XI(n,e=JI){const t=[];let o=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),uv(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),uv(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class $I{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LR()?kR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await YI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function uv(n){return Pc(JSON.stringify({version:2,heartbeats:n})).length}function WI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let o=1;o<n.length;o++)n[o].date<t&&(t=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(n){kc(new Il("platform-logger",e=>new rI(e),"PRIVATE")),kc(new Il("heartbeat",e=>new QI(e),"PRIVATE")),qr(Yh,sv,n),qr(Yh,sv,"esm2020"),qr("fire-js","")}ZI("");var jI="firebase",ew="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(jI,ew,"app");var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ko,eE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,N){function b(){}b.prototype=N.prototype,x.F=N.prototype,x.prototype=new b,x.prototype.constructor=x,x.D=function(U,P,G){for(var M=Array(arguments.length-2),De=2;De<arguments.length;De++)M[De-2]=arguments[De];return N.prototype[P].apply(U,M)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,N,b){b||(b=0);const U=Array(16);if(typeof N=="string")for(var P=0;P<16;++P)U[P]=N.charCodeAt(b++)|N.charCodeAt(b++)<<8|N.charCodeAt(b++)<<16|N.charCodeAt(b++)<<24;else for(P=0;P<16;++P)U[P]=N[b++]|N[b++]<<8|N[b++]<<16|N[b++]<<24;N=x.g[0],b=x.g[1],P=x.g[2];let G=x.g[3],M;M=N+(G^b&(P^G))+U[0]+3614090360&4294967295,N=b+(M<<7&4294967295|M>>>25),M=G+(P^N&(b^P))+U[1]+3905402710&4294967295,G=N+(M<<12&4294967295|M>>>20),M=P+(b^G&(N^b))+U[2]+606105819&4294967295,P=G+(M<<17&4294967295|M>>>15),M=b+(N^P&(G^N))+U[3]+3250441966&4294967295,b=P+(M<<22&4294967295|M>>>10),M=N+(G^b&(P^G))+U[4]+4118548399&4294967295,N=b+(M<<7&4294967295|M>>>25),M=G+(P^N&(b^P))+U[5]+1200080426&4294967295,G=N+(M<<12&4294967295|M>>>20),M=P+(b^G&(N^b))+U[6]+2821735955&4294967295,P=G+(M<<17&4294967295|M>>>15),M=b+(N^P&(G^N))+U[7]+4249261313&4294967295,b=P+(M<<22&4294967295|M>>>10),M=N+(G^b&(P^G))+U[8]+1770035416&4294967295,N=b+(M<<7&4294967295|M>>>25),M=G+(P^N&(b^P))+U[9]+2336552879&4294967295,G=N+(M<<12&4294967295|M>>>20),M=P+(b^G&(N^b))+U[10]+4294925233&4294967295,P=G+(M<<17&4294967295|M>>>15),M=b+(N^P&(G^N))+U[11]+2304563134&4294967295,b=P+(M<<22&4294967295|M>>>10),M=N+(G^b&(P^G))+U[12]+1804603682&4294967295,N=b+(M<<7&4294967295|M>>>25),M=G+(P^N&(b^P))+U[13]+4254626195&4294967295,G=N+(M<<12&4294967295|M>>>20),M=P+(b^G&(N^b))+U[14]+2792965006&4294967295,P=G+(M<<17&4294967295|M>>>15),M=b+(N^P&(G^N))+U[15]+1236535329&4294967295,b=P+(M<<22&4294967295|M>>>10),M=N+(P^G&(b^P))+U[1]+4129170786&4294967295,N=b+(M<<5&4294967295|M>>>27),M=G+(b^P&(N^b))+U[6]+3225465664&4294967295,G=N+(M<<9&4294967295|M>>>23),M=P+(N^b&(G^N))+U[11]+643717713&4294967295,P=G+(M<<14&4294967295|M>>>18),M=b+(G^N&(P^G))+U[0]+3921069994&4294967295,b=P+(M<<20&4294967295|M>>>12),M=N+(P^G&(b^P))+U[5]+3593408605&4294967295,N=b+(M<<5&4294967295|M>>>27),M=G+(b^P&(N^b))+U[10]+38016083&4294967295,G=N+(M<<9&4294967295|M>>>23),M=P+(N^b&(G^N))+U[15]+3634488961&4294967295,P=G+(M<<14&4294967295|M>>>18),M=b+(G^N&(P^G))+U[4]+3889429448&4294967295,b=P+(M<<20&4294967295|M>>>12),M=N+(P^G&(b^P))+U[9]+568446438&4294967295,N=b+(M<<5&4294967295|M>>>27),M=G+(b^P&(N^b))+U[14]+3275163606&4294967295,G=N+(M<<9&4294967295|M>>>23),M=P+(N^b&(G^N))+U[3]+4107603335&4294967295,P=G+(M<<14&4294967295|M>>>18),M=b+(G^N&(P^G))+U[8]+1163531501&4294967295,b=P+(M<<20&4294967295|M>>>12),M=N+(P^G&(b^P))+U[13]+2850285829&4294967295,N=b+(M<<5&4294967295|M>>>27),M=G+(b^P&(N^b))+U[2]+4243563512&4294967295,G=N+(M<<9&4294967295|M>>>23),M=P+(N^b&(G^N))+U[7]+1735328473&4294967295,P=G+(M<<14&4294967295|M>>>18),M=b+(G^N&(P^G))+U[12]+2368359562&4294967295,b=P+(M<<20&4294967295|M>>>12),M=N+(b^P^G)+U[5]+4294588738&4294967295,N=b+(M<<4&4294967295|M>>>28),M=G+(N^b^P)+U[8]+2272392833&4294967295,G=N+(M<<11&4294967295|M>>>21),M=P+(G^N^b)+U[11]+1839030562&4294967295,P=G+(M<<16&4294967295|M>>>16),M=b+(P^G^N)+U[14]+4259657740&4294967295,b=P+(M<<23&4294967295|M>>>9),M=N+(b^P^G)+U[1]+2763975236&4294967295,N=b+(M<<4&4294967295|M>>>28),M=G+(N^b^P)+U[4]+1272893353&4294967295,G=N+(M<<11&4294967295|M>>>21),M=P+(G^N^b)+U[7]+4139469664&4294967295,P=G+(M<<16&4294967295|M>>>16),M=b+(P^G^N)+U[10]+3200236656&4294967295,b=P+(M<<23&4294967295|M>>>9),M=N+(b^P^G)+U[13]+681279174&4294967295,N=b+(M<<4&4294967295|M>>>28),M=G+(N^b^P)+U[0]+3936430074&4294967295,G=N+(M<<11&4294967295|M>>>21),M=P+(G^N^b)+U[3]+3572445317&4294967295,P=G+(M<<16&4294967295|M>>>16),M=b+(P^G^N)+U[6]+76029189&4294967295,b=P+(M<<23&4294967295|M>>>9),M=N+(b^P^G)+U[9]+3654602809&4294967295,N=b+(M<<4&4294967295|M>>>28),M=G+(N^b^P)+U[12]+3873151461&4294967295,G=N+(M<<11&4294967295|M>>>21),M=P+(G^N^b)+U[15]+530742520&4294967295,P=G+(M<<16&4294967295|M>>>16),M=b+(P^G^N)+U[2]+3299628645&4294967295,b=P+(M<<23&4294967295|M>>>9),M=N+(P^(b|~G))+U[0]+4096336452&4294967295,N=b+(M<<6&4294967295|M>>>26),M=G+(b^(N|~P))+U[7]+1126891415&4294967295,G=N+(M<<10&4294967295|M>>>22),M=P+(N^(G|~b))+U[14]+2878612391&4294967295,P=G+(M<<15&4294967295|M>>>17),M=b+(G^(P|~N))+U[5]+4237533241&4294967295,b=P+(M<<21&4294967295|M>>>11),M=N+(P^(b|~G))+U[12]+1700485571&4294967295,N=b+(M<<6&4294967295|M>>>26),M=G+(b^(N|~P))+U[3]+2399980690&4294967295,G=N+(M<<10&4294967295|M>>>22),M=P+(N^(G|~b))+U[10]+4293915773&4294967295,P=G+(M<<15&4294967295|M>>>17),M=b+(G^(P|~N))+U[1]+2240044497&4294967295,b=P+(M<<21&4294967295|M>>>11),M=N+(P^(b|~G))+U[8]+1873313359&4294967295,N=b+(M<<6&4294967295|M>>>26),M=G+(b^(N|~P))+U[15]+4264355552&4294967295,G=N+(M<<10&4294967295|M>>>22),M=P+(N^(G|~b))+U[6]+2734768916&4294967295,P=G+(M<<15&4294967295|M>>>17),M=b+(G^(P|~N))+U[13]+1309151649&4294967295,b=P+(M<<21&4294967295|M>>>11),M=N+(P^(b|~G))+U[4]+4149444226&4294967295,N=b+(M<<6&4294967295|M>>>26),M=G+(b^(N|~P))+U[11]+3174756917&4294967295,G=N+(M<<10&4294967295|M>>>22),M=P+(N^(G|~b))+U[2]+718787259&4294967295,P=G+(M<<15&4294967295|M>>>17),M=b+(G^(P|~N))+U[9]+3951481745&4294967295,x.g[0]=x.g[0]+N&4294967295,x.g[1]=x.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+G&4294967295}o.prototype.v=function(x,N){N===void 0&&(N=x.length);const b=N-this.blockSize,U=this.C;let P=this.h,G=0;for(;G<N;){if(P==0)for(;G<=b;)r(this,x,G),G+=this.blockSize;if(typeof x=="string"){for(;G<N;)if(U[P++]=x.charCodeAt(G++),P==this.blockSize){r(this,U),P=0;break}}else for(;G<N;)if(U[P++]=x[G++],P==this.blockSize){r(this,U),P=0;break}}this.h=P,this.o+=N},o.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var N=1;N<x.length-8;++N)x[N]=0;N=this.o*8;for(var b=x.length-8;b<x.length;++b)x[b]=N&255,N/=256;for(this.v(x),x=Array(16),N=0,b=0;b<4;++b)for(let U=0;U<32;U+=8)x[N++]=this.g[b]>>>U&255;return x};function l(x,N){var b=d;return Object.prototype.hasOwnProperty.call(b,x)?b[x]:b[x]=N(x)}function c(x,N){this.h=N;const b=[];let U=!0;for(let P=x.length-1;P>=0;P--){const G=x[P]|0;U&&G==N||(b[P]=G,U=!1)}this.g=b}var d={};function y(x){return-128<=x&&x<128?l(x,function(N){return new c([N|0],N<0?-1:0)}):new c([x|0],x<0?-1:0)}function m(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return D(m(-x));const N=[];let b=1;for(let U=0;x>=b;U++)N[U]=x/b|0,b*=4294967296;return new c(N,0)}function v(x,N){if(x.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(x.charAt(0)=="-")return D(v(x.substring(1),N));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=m(Math.pow(N,8));let U=T;for(let G=0;G<x.length;G+=8){var P=Math.min(8,x.length-G);const M=parseInt(x.substring(G,G+P),N);P<8?(P=m(Math.pow(N,P)),U=U.j(P).add(m(M))):(U=U.j(b),U=U.add(m(M)))}return U}var T=y(0),S=y(1),I=y(16777216);n=c.prototype,n.m=function(){if(B(this))return-D(this).m();let x=0,N=1;for(let b=0;b<this.g.length;b++){const U=this.i(b);x+=(U>=0?U:4294967296+U)*N,N*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(L(this))return"0";if(B(this))return"-"+D(this).toString(x);const N=m(Math.pow(x,6));var b=this;let U="";for(;;){const P=se(b,N).g;b=Q(b,P.j(N));let G=((b.g.length>0?b.g[0]:b.h)>>>0).toString(x);if(b=P,L(b))return G+U;for(;G.length<6;)G="0"+G;U=G+U}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function L(x){if(x.h!=0)return!1;for(let N=0;N<x.g.length;N++)if(x.g[N]!=0)return!1;return!0}function B(x){return x.h==-1}n.l=function(x){return x=Q(this,x),B(x)?-1:L(x)?0:1};function D(x){const N=x.g.length,b=[];for(let U=0;U<N;U++)b[U]=~x.g[U];return new c(b,~x.h).add(S)}n.abs=function(){return B(this)?D(this):this},n.add=function(x){const N=Math.max(this.g.length,x.g.length),b=[];let U=0;for(let P=0;P<=N;P++){let G=U+(this.i(P)&65535)+(x.i(P)&65535),M=(G>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);U=M>>>16,G&=65535,M&=65535,b[P]=M<<16|G}return new c(b,b[b.length-1]&-2147483648?-1:0)};function Q(x,N){return x.add(D(N))}n.j=function(x){if(L(this)||L(x))return T;if(B(this))return B(x)?D(this).j(D(x)):D(D(this).j(x));if(B(x))return D(this.j(D(x)));if(this.l(I)<0&&x.l(I)<0)return m(this.m()*x.m());const N=this.g.length+x.g.length,b=[];for(var U=0;U<2*N;U++)b[U]=0;for(U=0;U<this.g.length;U++)for(let P=0;P<x.g.length;P++){const G=this.i(U)>>>16,M=this.i(U)&65535,De=x.i(P)>>>16,at=x.i(P)&65535;b[2*U+2*P]+=M*at,oe(b,2*U+2*P),b[2*U+2*P+1]+=G*at,oe(b,2*U+2*P+1),b[2*U+2*P+1]+=M*De,oe(b,2*U+2*P+1),b[2*U+2*P+2]+=G*De,oe(b,2*U+2*P+2)}for(x=0;x<N;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=N;x<2*N;x++)b[x]=0;return new c(b,0)};function oe(x,N){for(;(x[N]&65535)!=x[N];)x[N+1]+=x[N]>>>16,x[N]&=65535,N++}function Z(x,N){this.g=x,this.h=N}function se(x,N){if(L(N))throw Error("division by zero");if(L(x))return new Z(T,T);if(B(x))return N=se(D(x),N),new Z(D(N.g),D(N.h));if(B(N))return N=se(x,D(N)),new Z(D(N.g),N.h);if(x.g.length>30){if(B(x)||B(N))throw Error("slowDivide_ only works with positive integers.");for(var b=S,U=N;U.l(x)<=0;)b=fe(b),U=fe(U);var P=ue(b,1),G=ue(U,1);for(U=ue(U,2),b=ue(b,2);!L(U);){var M=G.add(U);M.l(x)<=0&&(P=P.add(b),G=M),U=ue(U,1),b=ue(b,1)}return N=Q(x,P.j(N)),new Z(P,N)}for(P=T;x.l(N)>=0;){for(b=Math.max(1,Math.floor(x.m()/N.m())),U=Math.ceil(Math.log(b)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),G=m(b),M=G.j(N);B(M)||M.l(x)>0;)b-=U,G=m(b),M=G.j(N);L(G)&&(G=S),P=P.add(G),x=Q(x,M)}return new Z(P,x)}n.B=function(x){return se(this,x).h},n.and=function(x){const N=Math.max(this.g.length,x.g.length),b=[];for(let U=0;U<N;U++)b[U]=this.i(U)&x.i(U);return new c(b,this.h&x.h)},n.or=function(x){const N=Math.max(this.g.length,x.g.length),b=[];for(let U=0;U<N;U++)b[U]=this.i(U)|x.i(U);return new c(b,this.h|x.h)},n.xor=function(x){const N=Math.max(this.g.length,x.g.length),b=[];for(let U=0;U<N;U++)b[U]=this.i(U)^x.i(U);return new c(b,this.h^x.h)};function fe(x){const N=x.g.length+1,b=[];for(let U=0;U<N;U++)b[U]=x.i(U)<<1|x.i(U-1)>>>31;return new c(b,x.h)}function ue(x,N){const b=N>>5;N%=32;const U=x.g.length-b,P=[];for(let G=0;G<U;G++)P[G]=N>0?x.i(G+b)>>>N|x.i(G+b+1)<<32-N:x.i(G+b);return new c(P,x.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,eE=o,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,Ko=c}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tE,yl,nE,Ic,Qh,iE,oE,sE;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var E=0;E<p.length;++E){var C=p[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=t(this);function r(p,E){if(E)e:{var C=o;p=p.split(".");for(var w=0;w<p.length-1;w++){var H=p[w];if(!(H in C))break e;C=C[H]}p=p[p.length-1],w=C[p],E=E(w),E!=w&&E!=null&&e(C,p,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(E){var C=[],w;for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&C.push([w,E[w]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function y(p,E,C){return p.call.apply(p.bind,arguments)}function m(p,E,C){return m=y,m.apply(null,arguments)}function v(p,E){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),p.apply(this,w)}}function T(p,E){function C(){}C.prototype=E.prototype,p.Z=E.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(w,H,K){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return E.prototype[H].apply(w,ae)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function I(p){const E=p.length;if(E>0){const C=Array(E);for(let w=0;w<E;w++)C[w]=p[w];return C}return[]}function L(p,E){for(let w=1;w<arguments.length;w++){const H=arguments[w];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=p.length||0;const K=H.length||0;p.length=C+K;for(let ae=0;ae<K;ae++)p[C+ae]=H[ae]}else p.push(H)}}class B{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function D(p){c.setTimeout(()=>{throw p},0)}function Q(){var p=x;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class oe{constructor(){this.h=this.g=null}add(E,C){const w=Z.get();w.set(E,C),this.h?this.h.next=w:this.g=w,this.h=w}}var Z=new B(()=>new se,p=>p.reset());class se{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ue=!1,x=new oe,N=()=>{const p=Promise.resolve(void 0);fe=()=>{p.then(b)}};function b(){for(var p;p=Q();){try{p.h.call(p.g)}catch(C){D(C)}var E=Z;E.j(p),E.h<100&&(E.h++,p.next=E.g,E.g=p)}ue=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};c.addEventListener("test",C,E),c.removeEventListener("test",C,E)}catch{}return p})();function M(p){return/^[\s\xa0]*$/.test(p)}function De(p,E){P.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,E)}T(De,P),De.prototype.init=function(p,E){const C=this.type=p.type,w=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget,E||(C=="mouseover"?E=p.fromElement:C=="mouseout"&&(E=p.toElement)),this.relatedTarget=E,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),$=0;function re(p,E,C,w,H){this.listener=p,this.proxy=null,this.src=E,this.type=C,this.capture=!!w,this.ha=H,this.key=++$,this.da=this.fa=!1}function ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Be(p,E,C){for(const w in p)E.call(C,p[w],w,p)}function Qe(p,E){for(const C in p)E.call(void 0,p[C],C,p)}function O(p){const E={};for(const C in p)E[C]=p[C];return E}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(p,E){let C,w;for(let H=1;H<arguments.length;H++){w=arguments[H];for(C in w)p[C]=w[C];for(let K=0;K<ee.length;K++)C=ee[K],Object.prototype.hasOwnProperty.call(w,C)&&(p[C]=w[C])}}function de(p){this.src=p,this.g={},this.h=0}de.prototype.add=function(p,E,C,w,H){const K=p.toString();p=this.g[K],p||(p=this.g[K]=[],this.h++);const ae=be(p,E,w,H);return ae>-1?(E=p[ae],C||(E.fa=!1)):(E=new re(E,this.src,K,!!w,H),E.fa=C,p.push(E)),E};function Ee(p,E){const C=E.type;if(C in p.g){var w=p.g[C],H=Array.prototype.indexOf.call(w,E,void 0),K;(K=H>=0)&&Array.prototype.splice.call(w,H,1),K&&(ye(E),p.g[C].length==0&&(delete p.g[C],p.h--))}}function be(p,E,C,w){for(let H=0;H<p.length;++H){const K=p[H];if(!K.da&&K.listener==E&&K.capture==!!C&&K.ha==w)return H}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),_t={};function lt(p,E,C,w,H){if(Array.isArray(E)){for(let K=0;K<E.length;K++)lt(p,E[K],C,w,H);return null}return C=fa(C),p&&p[at]?p.J(E,C,d(w)?!!w.capture:!1,H):Ae(p,E,C,!1,w,H)}function Ae(p,E,C,w,H,K){if(!E)throw Error("Invalid event type");const ae=d(H)?!!H.capture:!!H;let Ne=os(p);if(Ne||(p[Ue]=Ne=new de(p)),C=Ne.add(E,C,w,ae,K),C.proxy)return C;if(w=st(),C.proxy=w,w.src=p,w.listener=C,p.addEventListener)G||(H=ae),H===void 0&&(H=!1),p.addEventListener(E.toString(),w,H);else if(p.attachEvent)p.attachEvent(li(E.toString()),w);else if(p.addListener&&p.removeListener)p.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function st(){function p(C){return E.call(p.src,p.listener,C)}const E=ua;return p}function lo(p,E,C,w,H){if(Array.isArray(E))for(var K=0;K<E.length;K++)lo(p,E[K],C,w,H);else w=d(w)?!!w.capture:!!w,C=fa(C),p&&p[at]?(p=p.i,K=String(E).toString(),K in p.g&&(E=p.g[K],C=be(E,C,w,H),C>-1&&(ye(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete p.g[K],p.h--)))):p&&(p=os(p))&&(E=p.g[E.toString()],p=-1,E&&(p=be(E,C,w,H)),(C=p>-1?E[p]:null)&&zs(C))}function zs(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[at])Ee(E.i,p);else{var C=p.type,w=p.proxy;E.removeEventListener?E.removeEventListener(C,w,p.capture):E.detachEvent?E.detachEvent(li(C),w):E.addListener&&E.removeListener&&E.removeListener(w),(C=os(E))?(Ee(C,p),C.h==0&&(C.src=null,E[Ue]=null)):ye(p)}}}function li(p){return p in _t?_t[p]:_t[p]="on"+p}function ua(p,E){if(p.da)p=!0;else{E=new De(E,this);const C=p.listener,w=p.ha||p.src;p.fa&&zs(p),p=C.call(w,E)}return p}function os(p){return p=p[Ue],p instanceof de?p:null}var ca="__closure_events_fn_"+(Math.random()*1e9>>>0);function fa(p){return typeof p=="function"?p:(p[ca]||(p[ca]=function(E){return p.handleEvent(E)}),p[ca])}function Ct(){U.call(this),this.i=new de(this),this.M=this,this.G=null}T(Ct,U),Ct.prototype[at]=!0,Ct.prototype.removeEventListener=function(p,E,C,w){lo(this,p,E,C,w)};function Lt(p,E){var C,w=p.G;if(w)for(C=[];w;w=w.G)C.push(w);if(p=p.M,w=E.type||E,typeof E=="string")E=new P(E,p);else if(E instanceof P)E.target=E.target||p;else{var H=E;E=new P(w,p),le(E,H)}H=!0;let K,ae;if(C)for(ae=C.length-1;ae>=0;ae--)K=E.g=C[ae],H=uo(K,w,!0,E)&&H;if(K=E.g=p,H=uo(K,w,!0,E)&&H,H=uo(K,w,!1,E)&&H,C)for(ae=0;ae<C.length;ae++)K=E.g=C[ae],H=uo(K,w,!1,E)&&H}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var p=this.i;for(const E in p.g){const C=p.g[E];for(let w=0;w<C.length;w++)ye(C[w]);delete p.g[E],p.h--}}this.G=null},Ct.prototype.J=function(p,E,C,w){return this.i.add(String(p),E,!1,C,w)},Ct.prototype.K=function(p,E,C,w){return this.i.add(String(p),E,!0,C,w)};function uo(p,E,C,w){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();let H=!0;for(let K=0;K<E.length;++K){const ae=E[K];if(ae&&!ae.da&&ae.capture==C){const Ne=ae.listener,Tt=ae.ha||ae.src;ae.fa&&Ee(p.i,ae),H=Ne.call(Tt,w)!==!1&&H}}return H&&!w.defaultPrevented}function Rf(p,E){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(p,E||0)}function Bl(p){p.g=Rf(()=>{p.g=null,p.i&&(p.i=!1,Bl(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class rn extends U{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Bl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(p){U.call(this),this.h=p,this.g={}}T(ss,U);var da=[];function ha(p){Be(p.g,function(E,C){this.g.hasOwnProperty(C)&&zs(E)},p),p.g={}}ss.prototype.N=function(){ss.Z.N.call(this),ha(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var co=c.JSON.stringify,If=c.JSON.parse,Gl=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Fl(){}function Hl(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){P.call(this,"d")}T(Yt,P);function bn(){P.call(this,"c")}T(bn,P);var vt={},zl=null;function Ys(){return zl=zl||new Ct}vt.Ia="serverreachability";function Yl(p){P.call(this,vt.Ia,p)}T(Yl,P);function ui(p){const E=Ys();Lt(E,new Yl(E))}vt.STAT_EVENT="statevent";function rs(p,E){P.call(this,vt.STAT_EVENT,p),this.stat=E}T(rs,P);function Rt(p){const E=Ys();Lt(E,new rs(E,p))}vt.Ja="timingevent";function ci(p,E){P.call(this,vt.Ja,p),this.size=E}T(ci,P);function fi(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},E)}function Jn(){this.g=!0}Jn.prototype.ua=function(){this.g=!1};function wf(p,E,C,w,H,K){p.info(function(){if(p.g)if(K){var ae="",Ne=K.split("&");for(let Xe=0;Xe<Ne.length;Xe++){var Tt=Ne[Xe].split("=");if(Tt.length>1){const ht=Tt[0];Tt=Tt[1];const Dn=ht.split("_");ae=Dn.length>=2&&Dn[1]=="type"?ae+(ht+"="+Tt+"&"):ae+(ht+"=redacted&")}}}else ae=null;else ae=K;return"XMLHTTP REQ ("+w+") [attempt "+H+"]: "+E+`
`+C+`
`+ae})}function Jl(p,E,C,w,H,K,ae){p.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+H+"]: "+E+`
`+C+`
`+K+" "+ae})}function di(p,E,C,w){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+bf(p,C)+(w?" "+w:"")})}function as(p,E){p.info(function(){return"TIMEOUT: "+E})}Jn.prototype.info=function(){};function bf(p,E){if(!p.g)return E;if(!E)return null;try{const K=JSON.parse(E);if(K){for(p=0;p<K.length;p++)if(Array.isArray(K[p])){var C=K[p];if(!(C.length<2)){var w=C[1];if(Array.isArray(w)&&!(w.length<1)){var H=w[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ae=1;ae<w.length;ae++)w[ae]=""}}}}return co(K)}catch{return E}}var ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ma;function us(){}T(us,Fl),us.prototype.g=function(){return new XMLHttpRequest},ma=new us;function ki(p){return encodeURIComponent(String(p))}function Kl(p){var E=1;p=p.split(":");const C=[];for(;E>0&&p.length;)C.push(p.shift()),E--;return p.length&&C.push(p.join(":")),C}function Kn(p,E,C,w){this.j=p,this.i=E,this.l=C,this.S=w||1,this.V=new ss(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var It={},Bt={};function hi(p,E,C){p.M=1,p.A=cs(bt(E)),p.u=C,p.R=!0,Js(p,null)}function Js(p,E){p.F=Date.now(),pi(p),p.B=bt(p.A);var C=p.B,w=p.S;Array.isArray(w)||(w=[String(w)]),$s(C.i,"t",w),p.C=0,C=p.j.L,p.h=new Qn,p.g=lu(p.j,C?E:null,!p.u),p.P>0&&(p.O=new rn(m(p.Y,p,p.g),p.P)),E=p.V,C=p.g,w=p.ba;var H="readystatechange";Array.isArray(H)||(H&&(da[0]=H.toString()),H=da);for(let K=0;K<H.length;K++){const ae=lt(C,H[K],w||E.handleEvent,!1,E.h||E);if(!ae)break;E.g[ae.key]=ae}E=p.J?O(p.J):{},p.u?(p.v||(p.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,E)):(p.v="GET",p.g.ea(p.B,p.v,null,E)),ui(),wf(p.i,p.v,p.B,p.l,p.S,p.u)}Kn.prototype.ba=function(p){p=p.target;const E=this.O;E&&Wn(p)==3?E.j():this.Y(p)},Kn.prototype.Y=function(p){try{if(p==this.g)e:{const Ne=Wn(this.g),Tt=this.g.ya(),Xe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Ne!=4||Tt==7||(Tt==8||Xe<=0?ui(3):ui(2)),mi(this);var E=this.g.ca();this.X=E;var C=Nf(this);if(this.o=E==200,Jl(this.i,this.v,this.B,this.l,this.S,Ne,E),this.o){if(this.U&&!this.L){t:{if(this.g){var w,H=this.g;if((w=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(w)){var K=w;break t}}K=null}if(p=K)di(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,p);else{this.o=!1,this.m=3,Rt(12),vn(this),Nn(this);break e}}if(this.R){p=!0;let ht;for(;!this.K&&this.C<C.length;)if(ht=Xl(this,C),ht==Bt){Ne==4&&(this.m=4,Rt(14),p=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==It){this.m=4,Rt(15),di(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else di(this.i,this.l,ht,null),gi(this,ht);if(Ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||C.length!=0||this.h.h||(this.m=1,Rt(16),p=!1),this.o=this.o&&p,!p)di(this.i,this.l,C,"[Invalid Chunked Response]"),vn(this),Nn(this);else if(C.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),xa(ae),ae.P=!0,Rt(11))}}else di(this.i,this.l,C,null),gi(this,C);Ne==4&&vn(this),this.o&&!this.K&&(Ne==4?ou(this.j,this):(this.o=!1,pi(this)))}else qi(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),vn(this),Nn(this)}}}catch{}finally{}};function Nf(p){if(!Ql(p))return p.g.la();const E=Jt(p.g);if(E==="")return"";let C="";const w=E.length,H=Wn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return vn(p),Nn(p),"";p.h.i=new c.TextDecoder}for(let K=0;K<w;K++)p.h.h=!0,C+=p.h.i.decode(E[K],{stream:!(H&&K==w-1)});return E.length=0,p.h.g+=C,p.C=0,p.h.g}function Ql(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Xl(p,E){var C=p.C,w=E.indexOf(`
`,C);return w==-1?Bt:(C=Number(E.substring(C,w)),isNaN(C)?It:(w+=1,w+C>E.length?Bt:(E=E.slice(w,w+C),p.C=w+C,E)))}Kn.prototype.cancel=function(){this.K=!0,vn(this)};function pi(p){p.T=Date.now()+p.H,Ks(p,p.H)}function Ks(p,E){if(p.D!=null)throw Error("WatchDog timer not null");p.D=fi(m(p.aa,p),E)}function mi(p){p.D&&(c.clearTimeout(p.D),p.D=null)}Kn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(as(this.i,this.B),this.M!=2&&(ui(),Rt(17)),vn(this),this.m=2,Nn(this)):Ks(this,this.T-p)};function Nn(p){p.j.I==0||p.K||ou(p.j,p)}function vn(p){mi(p);var E=p.O;E&&typeof E.dispose=="function"&&E.dispose(),p.O=null,ha(p.V),p.g&&(E=p.g,p.g=null,E.abort(),E.dispose())}function gi(p,E){try{var C=p.j;if(C.I!=0&&(C.g==p||_i(C.h,p))){if(!p.L&&_i(C.h,p)&&C.I==3){try{var w=C.Ba.g.parse(E)}catch{w=null}if(Array.isArray(w)&&w.length==3){var H=w;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)tr(C),vo(C);else break e;ys(C),Rt(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=fi(m(C.Va,C),6e3));yi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ci(C,11)}else if((p.L||C.g==p)&&tr(C),!M(E))for(H=C.Ba.g.parse(E),E=0;E<H.length;E++){let Xe=H[E];const ht=Xe[0];if(!(ht<=C.K))if(C.K=ht,Xe=Xe[1],C.I==2)if(Xe[0]=="c"){C.M=Xe[1],C.ba=Xe[2];const Dn=Xe[3];Dn!=null&&(C.ka=Dn,C.j.info("VER="+C.ka));const Ri=Xe[4];Ri!=null&&(C.za=Ri,C.j.info("SVER="+C.za));const Zn=Xe[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(w=1.5*Zn,C.O=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const jn=p.g;if(jn){const _s=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_s){var K=w.h;K.g||_s.indexOf("spdy")==-1&&_s.indexOf("quic")==-1&&_s.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(_a(K,K.h),K.h=null))}if(w.G){const nr=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;nr&&(w.wa=nr,Ze(w.J,w.G,nr))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),w=C;var ae=p;if(w.na=au(w,w.L?w.ba:null,w.W),ae.L){va(w.h,ae);var Ne=ae,Tt=w.O;Tt&&(Ne.H=Tt),Ne.D&&(mi(Ne),pi(Ne)),w.g=ae}else nu(w);C.i.length>0&&Ai(C)}else Xe[0]!="stop"&&Xe[0]!="close"||Ci(C,7);else C.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Ci(C,7):ba(C):Xe[0]!="noop"&&C.l&&C.l.qa(Xe),C.A=0)}}ui(4)}catch{}}var wt=class{constructor(p,E){this.g=p,this.map=E}};function ga(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ya(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function yi(p){return p.h?1:p.g?p.g.size:0}function _i(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function _a(p,E){p.g?p.g.add(E):p.h=E}function va(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}ga.prototype.cancel=function(){if(this.i=Ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ta(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const C of p.g.values())E=E.concat(C.G);return E}return I(p.i)}var $l=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qs(p,E){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const w=p[C].indexOf("=");let H,K=null;w>=0?(H=p[C].substring(0,w),K=p[C].substring(w+1)):H=p[C],E(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Tn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;p instanceof Tn?(this.l=p.l,Gt(this,p.j),this.o=p.o,this.g=p.g,fo(this,p.u),this.h=p.h,Ea(this,eu(p.i)),this.m=p.m):p&&(E=String(p).match($l))?(this.l=!1,Gt(this,E[1]||"",!0),this.o=vi(E[2]||""),this.g=vi(E[3]||"",!0),fo(this,E[4]),this.h=vi(E[5]||"",!0),Ea(this,E[6]||"",!0),this.m=vi(E[7]||"")):(this.l=!1,this.i=new po(null,this.l))}Tn.prototype.toString=function(){const p=[];var E=this.j;E&&p.push(fs(E,Xs,!0),":");var C=this.g;return(C||E=="file")&&(p.push("//"),(E=this.o)&&p.push(fs(E,Xs,!0),"@"),p.push(ki(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(fs(C,C.charAt(0)=="/"?Sa:Wl,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",fs(C,Zl)),p.join("")},Tn.prototype.resolve=function(p){const E=bt(this);let C=!!p.j;C?Gt(E,p.j):C=!!p.o,C?E.o=p.o:C=!!p.g,C?E.g=p.g:C=p.u!=null;var w=p.h;if(C)fo(E,p.u);else if(C=!!p.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var H=E.h.lastIndexOf("/");H!=-1&&(w=E.h.slice(0,H+1)+w)}if(H=w,H==".."||H==".")w="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){w=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let ae=0;ae<H.length;){const Ne=H[ae++];Ne=="."?w&&ae==H.length&&K.push(""):Ne==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),w&&ae==H.length&&K.push("")):(K.push(Ne),w=!0)}w=K.join("/")}else w=H}return C?E.h=w:C=p.i.toString()!=="",C?Ea(E,eu(p.i)):C=!!p.m,C&&(E.m=p.m),E};function bt(p){return new Tn(p)}function Gt(p,E,C){p.j=C?vi(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function fo(p,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);p.u=E}else p.u=null}function Ea(p,E,C){E instanceof po?(p.i=E,Ws(p.i,p.l)):(C||(E=fs(E,ho)),p.i=new po(E,p.l))}function Ze(p,E,C){p.i.set(E,C)}function cs(p){return Ze(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function vi(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function fs(p,E,C){return typeof p=="string"?(p=encodeURI(p).replace(E,fn),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function fn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Xs=/[#\/\?@]/g,Wl=/[#\?:]/g,Sa=/[#\?]/g,ho=/[#\?@]/g,Zl=/#/g;function po(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function dn(p){p.g||(p.g=new Map,p.h=0,p.i&&Qs(p.i,function(E,C){p.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=po.prototype,n.add=function(p,E){dn(this),this.i=null,p=mo(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(E),this.h+=1,this};function jl(p,E){dn(p),E=mo(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function Aa(p,E){return dn(p),E=mo(p,E),p.g.has(E)}n.forEach=function(p,E){dn(this),this.g.forEach(function(C,w){C.forEach(function(H){p.call(E,H,w,this)},this)},this)};function Ca(p,E){dn(p);let C=[];if(typeof E=="string")Aa(p,E)&&(C=C.concat(p.g.get(mo(p,E))));else for(p=Array.from(p.g.values()),E=0;E<p.length;E++)C=C.concat(p[E]);return C}n.set=function(p,E){return dn(this),this.i=null,p=mo(this,p),Aa(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=Ca(this,p),p.length>0?String(p[0]):E):E};function $s(p,E,C){jl(p,E),C.length>0&&(p.i=null,p.g.set(mo(p,E),I(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(let w=0;w<E.length;w++){var C=E[w];const H=ki(C);C=Ca(this,C);for(let K=0;K<C.length;K++){let ae=H;C[K]!==""&&(ae+="="+ki(C[K])),p.push(ae)}}return this.i=p.join("&")};function eu(p){const E=new po;return E.i=p.i,p.g&&(E.g=new Map(p.g),E.h=p.h),E}function mo(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function Ws(p,E){E&&!p.j&&(dn(p),p.i=null,p.g.forEach(function(C,w){const H=w.toLowerCase();w!=H&&(jl(this,w),$s(this,H,C))},p)),p.j=E}function Xn(p,E){const C=new Jn;if(c.Image){const w=new Image;w.onload=v(xn,C,"TestLoadImage: loaded",!0,E,w),w.onerror=v(xn,C,"TestLoadImage: error",!1,E,w),w.onabort=v(xn,C,"TestLoadImage: abort",!1,E,w),w.ontimeout=v(xn,C,"TestLoadImage: timeout",!1,E,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=p}else E(!1)}function Ra(p,E){const C=new Jn,w=new AbortController,H=setTimeout(()=>{w.abort(),xn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:w.signal}).then(K=>{clearTimeout(H),K.ok?xn(C,"TestPingServer: ok",!0,E):xn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),xn(C,"TestPingServer: error",!1,E)})}function xn(p,E,C,w,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),w(C)}catch{}}function go(){this.g=new Gl}function Ti(p){this.i=p.Sb||null,this.h=p.ab||!1}T(Ti,Fl),Ti.prototype.g=function(){return new ds(this.i,this.h)};function ds(p,E){Ct.call(this),this.H=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ds,Ct),n=ds.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=E,this.readyState=1,$n(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(E.body=p),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zs(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zs(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?yo(this):$n(this),this.readyState==3&&Zs(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,yo(this))},n.Na=function(p){this.g&&(this.response=p,yo(this))},n.ga=function(){this.g&&yo(this)};function yo(p){p.readyState=4,p.l=null,p.j=null,p.B=null,$n(p)}n.setRequestHeader=function(p,E){this.A.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=E.next();return p.join(`\r
`)};function $n(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Mn(p){let E="";return Be(p,function(C,w){E+=w,E+=":",E+=C,E+=`\r
`}),E}function hs(p,E,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Mn(C),typeof p=="string"?C!=null&&ki(C):Ze(p,E,C))}function tt(p){Ct.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(tt,Ct);var Ei=/^https?$/i,Ia=["POST","PUT"];n=tt.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,E,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ma.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(K){ps(this,K);return}if(p=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var H in w)C.set(H,w[H]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())C.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(K=>K.toLowerCase()=="content-type"),H=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(Ia,E,void 0)>=0)||w||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ae]of C)this.g.setRequestHeader(K,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(K){ps(this,K)}};function ps(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.o=5,wa(p),Oi(p)}function wa(p){p.A||(p.A=!0,Lt(p,"complete"),Lt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Lt(this,"complete"),Lt(this,"abort"),Oi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),tt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ms(this):this.Xa())},n.Xa=function(){ms(this)};function ms(p){if(p.h&&typeof l<"u"){if(p.v&&Wn(p)==4)setTimeout(p.Ca.bind(p),0);else if(Lt(p,"readystatechange"),Wn(p)==4){p.h=!1;try{const K=p.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var w;if(w=K===0){let ae=String(p.D).match($l)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),w=!Ei.test(ae?ae.toLowerCase():"")}C=w}if(C)Lt(p,"complete"),Lt(p,"success");else{p.o=6;try{var H=Wn(p)>2?p.g.statusText:""}catch{H=""}p.l=H+" ["+p.ca()+"]",wa(p)}}finally{Oi(p)}}}}function Oi(p,E){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,E||Lt(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Wn(p){return p.g?p.g.readyState:0}n.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),If(E)}};function Jt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function qi(p){const E={};p=(p.g&&Wn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<p.length;w++){if(M(p[w]))continue;var C=Kl(p[w]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const K=E[H]||[];E[H]=K,K.push(C)}Qe(E,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(p,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||E}function _o(p){this.za=0,this.i=[],this.j=new Jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,p),this.Za=Si("retryDelaySeedMs",1e4,p),this.Ta=Si("forwardChannelMaxRetries",2,p),this.va=Si("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ga(p&&p.concurrentRequestLimit),this.Ba=new go,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_o.prototype,n.ka=8,n.I=1,n.connect=function(p,E,C,w){Rt(0),this.W=p,this.H=E||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.J=au(this,null,this.W),Ai(this)};function ba(p){if(js(p),p.I==3){var E=p.V++,C=bt(p.J);if(Ze(C,"SID",p.M),Ze(C,"RID",E),Ze(C,"TYPE","terminate"),gs(p,C),E=new Kn(p,p.j,E),E.M=2,E.A=cs(bt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=E.A,C=!0),C||(E.g=lu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),pi(E)}ru(p)}function vo(p){p.g&&(xa(p),p.g.cancel(),p.g=null)}function js(p){vo(p),p.v&&(c.clearTimeout(p.v),p.v=null),tr(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function Ai(p){if(!ya(p.h)&&!p.m){p.m=!0;var E=p.Ea;fe||N(),ue||(fe(),ue=!0),x.add(E,p),p.D=0}}function er(p,E){return yi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=E.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=fi(m(p.Ea,p,E),su(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const H=new Kn(this,this.j,p);let K=this.o;if(this.U&&(K?(K=O(K),le(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(E+=w,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=tu(this,H,E),C=bt(this.J),Ze(C,"RID",p),Ze(C,"CVER",22),this.G&&Ze(C,"X-HTTP-Session-Id",this.G),gs(this,C),K&&(this.R?E="headers="+ki(Mn(K))+"&"+E:this.u&&hs(C,this.u,K)),_a(this.h,H),this.Ra&&Ze(C,"TYPE","init"),this.S?(Ze(C,"$req",E),Ze(C,"SID","null"),H.U=!0,hi(H,C,null)):hi(H,C,E),this.I=2}}else this.I==3&&(p?Na(this,p):this.i.length==0||ya(this.h)||Na(this))};function Na(p,E){var C;E?C=E.l:C=p.V++;const w=bt(p.J);Ze(w,"SID",p.M),Ze(w,"RID",C),Ze(w,"AID",p.K),gs(p,w),p.u&&p.o&&hs(w,p.u,p.o),C=new Kn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),E&&(p.i=E.G.concat(p.i)),E=tu(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),_a(p.h,C),hi(C,w,E)}function gs(p,E){p.H&&Be(p.H,function(C,w){Ze(E,w,C)}),p.l&&Be({},function(C,w){Ze(E,w,C)})}function tu(p,E,C){C=Math.min(p.i.length,C);const w=p.l?m(p.l.Ka,p.l,p):null;e:{var H=p.i;let Ne=-1;for(;;){const Tt=["count="+C];Ne==-1?C>0?(Ne=H[0].g,Tt.push("ofs="+Ne)):Ne=0:Tt.push("ofs="+Ne);let Xe=!0;for(let ht=0;ht<C;ht++){var K=H[ht].g;const Dn=H[ht].map;if(K-=Ne,K<0)Ne=Math.max(0,H[ht].g-100),Xe=!1;else try{K="req"+K+"_"||"";try{var ae=Dn instanceof Map?Dn:Object.entries(Dn);for(const[Ri,Zn]of ae){let jn=Zn;d(Zn)&&(jn=co(Zn)),Tt.push(K+Ri+"="+encodeURIComponent(jn))}}catch(Ri){throw Tt.push(K+"type="+encodeURIComponent("_badmap")),Ri}}catch{w&&w(Dn)}}if(Xe){ae=Tt.join("&");break e}}ae=void 0}return p=p.i.splice(0,C),E.G=p,ae}function nu(p){if(!p.g&&!p.v){p.Y=1;var E=p.Da;fe||N(),ue||(fe(),ue=!0),x.add(E,p),p.A=0}}function ys(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=fi(m(p.Da,p),su(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,iu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=fi(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),vo(this),iu(this))};function xa(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function iu(p){p.g=new Kn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var E=bt(p.na);Ze(E,"RID","rpc"),Ze(E,"SID",p.M),Ze(E,"AID",p.K),Ze(E,"CI",p.F?"0":"1"),!p.F&&p.ia&&Ze(E,"TO",p.ia),Ze(E,"TYPE","xmlhttp"),gs(p,E),p.u&&p.o&&hs(E,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=cs(bt(E)),C.u=null,C.R=!0,Js(C,p)}n.Va=function(){this.C!=null&&(this.C=null,vo(this),ys(this),Rt(19))};function tr(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function ou(p,E){var C=null;if(p.g==E){tr(p),xa(p),p.g=null;var w=2}else if(_i(p.h,E))C=E.G,va(p.h,E),w=1;else return;if(p.I!=0){if(E.o)if(w==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var H=p.D;w=Ys(),Lt(w,new ci(w,C)),Ai(p)}else nu(p);else if(H=E.m,H==3||H==0&&E.X>0||!(w==1&&er(p,E)||w==2&&ys(p)))switch(C&&C.length>0&&(E=p.h,E.i=E.i.concat(C)),H){case 1:Ci(p,5);break;case 4:Ci(p,10);break;case 3:Ci(p,6);break;default:Ci(p,2)}}}function su(p,E){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*E}function Ci(p,E){if(p.j.info("Error code "+E),E==2){var C=m(p.bb,p),w=p.Ua;const H=!w;w=new Tn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gt(w,"https"),cs(w),H?Xn(w.toString(),C):Ra(w.toString(),C)}else Rt(2);p.I=0,p.l&&p.l.pa(E),ru(p),js(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function ru(p){if(p.I=0,p.ja=[],p.l){const E=Ta(p.h);(E.length!=0||p.i.length!=0)&&(L(p.ja,E),L(p.ja,p.i),p.h.i.length=0,I(p.i),p.i.length=0),p.l.oa()}}function au(p,E,C){var w=C instanceof Tn?bt(C):new Tn(C);if(w.g!="")E&&(w.g=E+"."+w.g),fo(w,w.u);else{var H=c.location;w=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;const K=new Tn(null);w&&Gt(K,w),E&&(K.g=E),H&&fo(K,H),C&&(K.h=C),w=K}return C=p.G,E=p.wa,C&&E&&Ze(w,C,E),Ze(w,"VER",p.ka),gs(p,w),w}function lu(p,E,C){if(E&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Aa&&!p.ma?new tt(new Ti({ab:C})):new tt(p.ma),E.Fa(p.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}n=uu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function To(){}To.prototype.g=function(p,E){return new an(p,E)};function an(p,E){Ct.call(this),this.g=new _o(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(p?p["X-WebChannel-Client-Profile"]=E.sa:p={"X-WebChannel-Client-Profile":E.sa}),this.g.U=p,(p=E&&E.Qb)&&!M(p)&&(this.g.u=p),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!M(E)&&(this.g.G=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new Bi(this)}T(an,Ct),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){ba(this.g)},an.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=co(p),p=C);E.i.push(new wt(E.Ya++,p)),E.I==3&&Ai(E)},an.prototype.N=function(){this.g.l=null,delete this.j,ba(this.g),delete this.g,an.Z.N.call(this)};function cu(p){Yt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const C in E){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}T(cu,Yt);function fu(){bn.call(this),this.status=1}T(fu,bn);function Bi(p){this.g=p}T(Bi,uu),Bi.prototype.ra=function(){Lt(this.g,"a")},Bi.prototype.qa=function(p){Lt(this.g,new cu(p))},Bi.prototype.pa=function(p){Lt(this.g,new fu)},Bi.prototype.oa=function(){Lt(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,sE=function(){return new To},oE=function(){return Ys()},iE=vt,Qh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,Ic=ls,pa.COMPLETE="complete",nE=pa,Hl.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,yl=Hl,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,tE=tt}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const fv="@firebase/firestore",dv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new QT("@firebase/firestore");function Dr(){return ks.logLevel}function pe(n,...e){if(ks.logLevel<=ze.DEBUG){const t=e.map(bp);ks.debug(`Firestore (${ea}): ${n}`,...t)}}function io(n,...e){if(ks.logLevel<=ze.ERROR){const t=e.map(bp);ks.error(`Firestore (${ea}): ${n}`,...t)}}function Jr(n,...e){if(ks.logLevel<=ze.WARN){const t=e.map(bp);ks.warn(`Firestore (${ea}): ${n}`,...t)}}function bp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,rE(n,o,t)}function rE(n,e,t){let o=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw io(o),new Error(o)}function We(n,e,t,o){let r="Unexpected state";typeof t=="string"?r=t:o=t,n||rE(e,r,o)}function we(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class nw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class iw{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let o=this.i;const r=y=>this.i!==o?(o=this.i,t(y)):Promise.resolve();let l=new Qo;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qo,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},d=y=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>d(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?d(y):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qo)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(We(typeof o.accessToken=="string",31837,{l:o}),new aE(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class ow{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sw{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new ow(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rw{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,OI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const o=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<n;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const r=aw(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<t&&(o+=e.charAt(r[l]%62))}return o}}function Oe(n,e){return n<e?-1:n>e?1:0}function Xh(n,e){const t=Math.min(n.length,e.length);for(let o=0;o<t;o++){const r=n.charAt(o),l=e.charAt(o);if(r!==l)return Vh(r)===Vh(l)?Oe(r,l):Vh(r)?1:-1}return Oe(n.length,e.length)}const lw=55296,uw=57343;function Vh(n){const e=n.charCodeAt(0);return e>=lw&&e<=uw}function Kr(n,e,t){return n.length===e.length&&n.every(((o,r)=>t(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="__name__";class xi{constructor(e,t,o){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&Se(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let r=0;r<o;r++){const l=xi.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const o=xi.isNumericId(e),r=xi.isNumericId(t);return o&&!r?-1:!o&&r?1:o&&r?xi.extractNumericId(e).compare(xi.extractNumericId(t)):Xh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ko.fromString(e.substring(4,e.length-2))}}class ut extends xi{construct(e,t,o){return new ut(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((r=>r.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const cw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends xi{construct(e,t,o){return new Zt(e,t,o)}static isValidIdentifier(e){return cw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pv}static keyField(){return new Zt([pv])}static fromServerFormat(e){const t=[];let o="",r=0;const l=()=>{if(o.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let c=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=y,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(o+=d,r++):(l(),r++)}if(l(),c)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ut.fromString(e))}static fromName(e){return new ve(ut.fromString(e).popFirst(5))}static empty(){return new ve(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(n,e,t){if(!t)throw new he(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fw(n,e,t,o){if(e===!0&&o===!0)throw new he(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mv(n){if(!ve.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gv(n){if(ve.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function nf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function Qr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nf(n);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ul(n,e){if(!uE(n))throw new he(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const r=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){t=`JSON missing required field: '${o}'`;break}const c=n[o];if(r&&typeof c!==r){t=`JSON field '${o}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${o}' field to equal '${l.value}'`;break}}if(t)throw new he(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=-62135596800,_v=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*_v);return new dt(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yv)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_v}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ul(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Ut("string",dt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new dt(0,0))}static max(){return new Re(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=-1;function dw(n,e){const t=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,r=Re.fromTimestamp(o===1e9?new dt(t+1,0):new dt(t,o));return new $o(r,ve.empty(),e)}function hw(n){return new $o(n.readTime,n.key,bl)}class $o{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new $o(Re.min(),ve.empty(),bl)}static max(){return new $o(Re.max(),ve.empty(),bl)}}function pw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==mw)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,o)=>{t(e)}))}static reject(e){return new ie(((t,o)=>{o(e)}))}static waitFor(e){return new ie(((t,o)=>{let r=0,l=0,c=!1;e.forEach((d=>{++r,d.next((()=>{++l,c&&l===r&&t()}),(y=>o(y)))})),c=!0,l===r&&t()}))}static or(e){let t=ie.resolve(!1);for(const o of e)t=t.next((r=>r?ie.resolve(r):o()));return t}static forEach(e,t){const o=[];return e.forEach(((r,l)=>{o.push(t.call(this,r,l))})),this.waitFor(o)}static mapArray(e,t){return new ie(((o,r)=>{const l=e.length,c=new Array(l);let d=0;for(let y=0;y<l;y++){const m=y;t(e[m]).next((v=>{c[m]=v,++d,d===l&&o(c)}),(v=>r(v)))}}))}static doWhile(e,t){return new ie(((o,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):o()};l()}))}}function yw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function na(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}of.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=-1;function sf(n){return n==null}function Oc(n){return n===0&&1/n==-1/0}function _w(n){return typeof n=="number"&&Number.isInteger(n)&&!Oc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="";function vw(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vv(e)),e=Tw(n.get(t),e);return vv(e)}function Tw(n,e){let t=e;const o=n.length;for(let r=0;r<o;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case cE:t+="";break;default:t+=l}}return t}function vv(n){return n+cE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return t+o.left.size;r<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gc(this.root,e,this.comparator,!0)}}class gc{constructor(e,t,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,o,r,l){this.key=e,this.value=t,this.color=o??Wt.RED,this.left=r??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,r,l){return new Wt(e??this.key,t??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,o),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Wt.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,o,r,l){return this}insert(e,t,o){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ev(this.data.getIterator())}getIteratorFrom(e){return new Ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class Ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new ii([])}unionWith(e){let t=new qt(Zt.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kr(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new dE("Invalid base64 string: "+l):l}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const Ew=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=Ew.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zo(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="server_timestamp",pE="__type__",mE="__previous_value__",gE="__local_write_time__";function Mp(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[pE])==null?void 0:o.stringValue)===hE}function rf(n){const e=n.mapValue.fields[mE];return Mp(e)?rf(e):e}function Nl(n){const e=Wo(n.mapValue.fields[gE].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,o,r,l,c,d,y,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=y,this.useFetchStreams=m,this.isUsingEmulator=v}}const qc="(default)";class xl{constructor(e,t){this.projectId=e,this.database=t||qc}static empty(){return new xl("","")}get isDefaultDatabase(){return this.database===qc}isEqual(e){return e instanceof xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="__type__",Aw="__max__",yc={mapValue:{}},_E="__vector__",Bc="value";function jo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mp(n)?4:Rw(n)?9007199254740991:Cw(n)?10:11:Se(28295,{value:n})}function Li(n,e){if(n===e)return!0;const t=jo(n);if(t!==jo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nl(n).isEqual(Nl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Wo(r.timestampValue),d=Wo(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return Zo(r.bytesValue).isEqual(Zo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return At(r.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(r.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return At(r.integerValue)===At(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=At(r.doubleValue),d=At(l.doubleValue);return c===d?Oc(c)===Oc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Kr(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},d=l.mapValue.fields||{};if(Tv(c)!==Tv(d))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(d[y]===void 0||!Li(c[y],d[y])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function Ml(n,e){return(n.values||[]).find((t=>Li(t,e)))!==void 0}function Xr(n,e){if(n===e)return 0;const t=jo(n),o=jo(e);if(t!==o)return Oe(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=At(l.integerValue||l.doubleValue),y=At(c.integerValue||c.doubleValue);return d<y?-1:d>y?1:d===y?0:isNaN(d)?isNaN(y)?0:-1:1})(n,e);case 3:return Sv(n.timestampValue,e.timestampValue);case 4:return Sv(Nl(n),Nl(e));case 5:return Xh(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Zo(l),y=Zo(c);return d.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),y=c.split("/");for(let m=0;m<d.length&&m<y.length;m++){const v=Oe(d[m],y[m]);if(v!==0)return v}return Oe(d.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Oe(At(l.latitude),At(c.latitude));return d!==0?d:Oe(At(l.longitude),At(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Av(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,I,L,B;const d=l.fields||{},y=c.fields||{},m=(S=d[Bc])==null?void 0:S.arrayValue,v=(I=y[Bc])==null?void 0:I.arrayValue,T=Oe(((L=m==null?void 0:m.values)==null?void 0:L.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return T!==0?T:Av(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===yc.mapValue&&c===yc.mapValue)return 0;if(l===yc.mapValue)return 1;if(c===yc.mapValue)return-1;const d=l.fields||{},y=Object.keys(d),m=c.fields||{},v=Object.keys(m);y.sort(),v.sort();for(let T=0;T<y.length&&T<v.length;++T){const S=Xh(y[T],v[T]);if(S!==0)return S;const I=Xr(d[y[T]],m[v[T]]);if(I!==0)return I}return Oe(y.length,v.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Sv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Wo(n),o=Wo(e),r=Oe(t.seconds,o.seconds);return r!==0?r:Oe(t.nanos,o.nanos)}function Av(n,e){const t=n.values||[],o=e.values||[];for(let r=0;r<t.length&&r<o.length;++r){const l=Xr(t[r],o[r]);if(l)return l}return Oe(t.length,o.length)}function $r(n){return $h(n)}function $h(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const o=Wo(t);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Zo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let o="[",r=!0;for(const l of t.values||[])r?r=!1:o+=",",o+=$h(l);return o+"]"})(n.arrayValue):"mapValue"in n?(function(t){const o=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of o)l?l=!1:r+=",",r+=`${c}:${$h(t.fields[c])}`;return r+"}"})(n.mapValue):Se(61005,{value:n})}function wc(n){switch(jo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(n);return e?16+wc(e):16;case 5:return 2*n.stringValue.length;case 6:return Zo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((r,l)=>r+wc(l)),0)})(n.arrayValue);case 10:case 11:return(function(o){let r=0;return qs(o.fields,((l,c)=>{r+=l.length+wc(c)})),r})(n.mapValue);default:throw Se(13486,{value:n})}}function Cv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wh(n){return!!n&&"integerValue"in n}function Dp(n){return!!n&&"arrayValue"in n}function Rv(n){return!!n&&"nullValue"in n}function Iv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bc(n){return!!n&&"mapValue"in n}function Cw(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[yE])==null?void 0:o.stringValue)===_E}function Sl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return qs(n.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Sl(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sl(n.arrayValue.values[t]);return e}return{...n}}function Rw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Aw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!bc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(t)}setAll(e){let t=Zt.emptyPath(),o={},r=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const y=this.getFieldsMap(t);this.applyChanges(y,o,r),o={},r=[],t=d.popLast()}c?o[d.lastSegment()]=Sl(c):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,o,r)}delete(e){const t=this.field(e.popLast());bc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=t.mapValue.fields[e.get(o)];bc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,o){qs(t,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new Gn(Sl(this.value))}}function vE(n){const e=[];return qs(n.fields,((t,o)=>{const r=new Zt([t]);if(bc(o)){const l=vE(o.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,o,r,l,c,d){this.key=e,this.documentType=t,this.version=o,this.readTime=r,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new on(e,0,Re.min(),Re.min(),Re.min(),Gn.empty(),0)}static newFoundDocument(e,t,o,r){return new on(e,1,t,Re.min(),o,r,0)}static newNoDocument(e,t){return new on(e,2,t,Re.min(),Re.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Re.min(),Re.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t){this.position=e,this.inclusive=t}}function wv(n,e,t){let o=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?o=ve.comparator(ve.fromName(c.referenceValue),t.key):o=Xr(c,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function bv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Iw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{}class Pt extends TE{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new bw(e,t,o):t==="array-contains"?new Mw(e,o):t==="in"?new Dw(e,o):t==="not-in"?new Vw(e,o):t==="array-contains-any"?new Pw(e,o):new Pt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new Nw(e,o):new xw(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xr(t,this.value)):t!==null&&jo(this.value)===jo(t)&&this.matchesComparison(Xr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends TE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ri(e,t)}matches(e){return EE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function EE(n){return n.op==="and"}function SE(n){return ww(n)&&EE(n)}function ww(n){for(const e of n.filters)if(e instanceof ri)return!1;return!0}function Zh(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+$r(n.value);if(SE(n))return n.filters.map((e=>Zh(e))).join(",");{const e=n.filters.map((t=>Zh(t))).join(",");return`${n.op}(${e})`}}function AE(n,e){return n instanceof Pt?(function(o,r){return r instanceof Pt&&o.op===r.op&&o.field.isEqual(r.field)&&Li(o.value,r.value)})(n,e):n instanceof ri?(function(o,r){return r instanceof ri&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,c,d)=>l&&AE(c,r.filters[d])),!0):!1})(n,e):void Se(19439)}function CE(n){return n instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$r(t.value)}`})(n):n instanceof ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(CE).join(" ,")+"}"})(n):"Filter"}class bw extends Pt{constructor(e,t,o){super(e,t,o),this.key=ve.fromName(o.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nw extends Pt{constructor(e,t){super(e,"in",t),this.keys=RE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class xw extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=RE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function RE(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>ve.fromName(o.referenceValue)))}class Mw extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dp(t)&&Ml(t.arrayValue,this.value)}}class Dw extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ml(this.value.arrayValue,t)}}class Vw extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ml(this.value.arrayValue,t)}}class Pw extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>Ml(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,t=null,o=[],r=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Nv(n,e=null,t=[],o=[],r=null,l=null,c=null){return new Uw(n,e,t,o,r,l,c)}function Vp(n){const e=we(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>Zh(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>$r(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>$r(o))).join(",")),e.Te=t}return e.Te}function Pp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Iw(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!AE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bv(n.startAt,e.startAt)&&bv(n.endAt,e.endAt)}function jh(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t=null,o=[],r=[],l=null,c="F",d=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Lw(n,e,t,o,r,l,c,d){return new ia(n,e,t,o,r,l,c,d)}function IE(n){return new ia(n)}function xv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wE(n){return n.collectionGroup!==null}function Al(n){const e=we(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new qt(Zt.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Dl(l,o))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new Dl(Zt.keyField(),o))}return e.Ie}function Mi(n){const e=we(n);return e.Ee||(e.Ee=kw(e,Al(n))),e.Ee}function kw(n,e){if(n.limitType==="F")return Nv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Dl(r.field,l)}));const t=n.endAt?new Gc(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Gc(n.startAt.position,n.startAt.inclusive):null;return Nv(n.path,n.collectionGroup,e,n.filters,n.limit,t,o)}}function ep(n,e){const t=n.filters.concat([e]);return new ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fc(n,e,t){return new ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function af(n,e){return Pp(Mi(n),Mi(e))&&n.limitType===e.limitType}function bE(n){return`${Vp(Mi(n))}|lt:${n.limitType}`}function Vr(n){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((r=>CE(r))).join(", ")}]`),sf(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((r=>$r(r))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((r=>$r(r))).join(",")),`Target(${o})`})(Mi(n))}; limitType=${n.limitType})`}function lf(n,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):ve.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(n,e)&&(function(o,r){for(const l of Al(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(o,r){return!(o.startAt&&!(function(c,d,y){const m=wv(c,d,y);return c.inclusive?m<=0:m<0})(o.startAt,Al(o),r)||o.endAt&&!(function(c,d,y){const m=wv(c,d,y);return c.inclusive?m>=0:m>0})(o.endAt,Al(o),r))})(n,e)}function Ow(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NE(n){return(e,t)=>{let o=!1;for(const r of Al(n)){const l=qw(r,e,t);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function qw(n,e,t){const o=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,c,d){const y=c.data.field(l),m=d.data.field(l);return y!==null&&m!==null?Xr(y,m):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[t]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,((t,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return fE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=new mt(ve.comparator);function oo(){return Bw}const xE=new mt(ve.comparator);function _l(...n){let e=xE;for(const t of n)e=e.insert(t.key,t);return e}function ME(n){let e=xE;return n.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function Ls(){return Cl()}function DE(){return Cl()}function Cl(){return new Bs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Gw=new mt(ve.comparator),Fw=new qt(ve.comparator);function qe(...n){let e=Fw;for(const t of n)e=e.add(t);return e}const Hw=new qt(Oe);function zw(){return Hw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(e)?"-0":e}}function VE(n){return{integerValue:""+n}}function Yw(n,e){return _w(e)?VE(e):Up(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this._=void 0}}function Jw(n,e,t){return n instanceof Hc?(function(r,l){const c={fields:{[pE]:{stringValue:hE},[gE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Mp(l)&&(l=rf(l)),l&&(c.fields[mE]=l),{mapValue:c}})(t,e):n instanceof Vl?UE(n,e):n instanceof Pl?LE(n,e):(function(r,l){const c=PE(r,l),d=Mv(c)+Mv(r.Ae);return Wh(c)&&Wh(r.Ae)?VE(d):Up(r.serializer,d)})(n,e)}function Kw(n,e,t){return n instanceof Vl?UE(n,e):n instanceof Pl?LE(n,e):t}function PE(n,e){return n instanceof zc?(function(o){return Wh(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class Hc extends uf{}class Vl extends uf{constructor(e){super(),this.elements=e}}function UE(n,e){const t=kE(e);for(const o of n.elements)t.some((r=>Li(r,o)))||t.push(o);return{arrayValue:{values:t}}}class Pl extends uf{constructor(e){super(),this.elements=e}}function LE(n,e){let t=kE(e);for(const o of n.elements)t=t.filter((r=>!Li(r,o)));return{arrayValue:{values:t}}}class zc extends uf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Mv(n){return At(n.integerValue||n.doubleValue)}function kE(n){return Dp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Qw(n,e){return n.field.isEqual(e.field)&&(function(o,r){return o instanceof Vl&&r instanceof Vl||o instanceof Pl&&r instanceof Pl?Kr(o.elements,r.elements,Li):o instanceof zc&&r instanceof zc?Li(o.Ae,r.Ae):o instanceof Hc&&r instanceof Hc})(n.transform,e.transform)}class Xw{constructor(e,t){this.version=e,this.transformResults=t}}class Di{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Di}static exists(e){return new Di(void 0,e)}static updateTime(e){return new Di(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cf{}function OE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new BE(n.key,Di.none()):new Ll(n.key,n.data,Di.none());{const t=n.data,o=Gn.empty();let r=new qt(Zt.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?o.delete(l):o.set(l,c),r=r.add(l)}return new Gs(n.key,o,new ii(r.toArray()),Di.none())}}function $w(n,e,t){n instanceof Ll?(function(r,l,c){const d=r.value.clone(),y=Vv(r.fieldTransforms,l,c.transformResults);d.setAll(y),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Gs?(function(r,l,c){if(!Nc(r.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Vv(r.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(qE(r)),y.setAll(d),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Rl(n,e,t,o){return n instanceof Ll?(function(l,c,d,y){if(!Nc(l.precondition,c))return d;const m=l.value.clone(),v=Pv(l.fieldTransforms,y,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,o):n instanceof Gs?(function(l,c,d,y){if(!Nc(l.precondition,c))return d;const m=Pv(l.fieldTransforms,y,c),v=c.data;return v.setAll(qE(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,o):(function(l,c,d){return Nc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function Ww(n,e){let t=null;for(const o of n.fieldTransforms){const r=e.data.field(o.field),l=PE(o.transform,r||null);l!=null&&(t===null&&(t=Gn.empty()),t.set(o.field,l))}return t||null}function Dv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&Kr(o,r,((l,c)=>Qw(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ll extends cf{constructor(e,t,o,r=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gs extends cf{constructor(e,t,o,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function qE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=n.data.field(t);e.set(t,o)}})),e}function Vv(n,e,t){const o=new Map;We(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,d=e.data.field(l.field);o.set(l.field,Kw(c,d,t[r]))}return o}function Pv(n,e,t){const o=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);o.set(r.field,Jw(l,c,e))}return o}class BE extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zw extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t,o,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&$w(l,e,o[r])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Rl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Rl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=DE();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(r.key)?null:d;const y=OE(c,d);y!==null&&o.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Re.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Kr(this.mutations,e.mutations,((t,o)=>Dv(t,o)))&&Kr(this.baseMutations,e.baseMutations,((t,o)=>Dv(t,o)))}}class Lp{constructor(e,t,o,r){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=r}static from(e,t,o){We(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let r=(function(){return Gw})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,o[c].version);return new Lp(e,t,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,He;function nb(n){switch(n){case ne.OK:return Se(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function GE(n){if(n===void 0)return io("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Vt.OK:return ne.OK;case Vt.CANCELLED:return ne.CANCELLED;case Vt.UNKNOWN:return ne.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return ne.INTERNAL;case Vt.UNAVAILABLE:return ne.UNAVAILABLE;case Vt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Vt.NOT_FOUND:return ne.NOT_FOUND;case Vt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Vt.ABORTED:return ne.ABORTED;case Vt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Vt.DATA_LOSS:return ne.DATA_LOSS;default:return Se(39323,{code:n})}}(He=Vt||(Vt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new Ko([4294967295,4294967295],0);function Uv(n){const e=ib().encode(n),t=new eE;return t.update(e),new Uint8Array(t.digest())}function Lv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ko([t,o],0),new Ko([r,l],0)]}class kp{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new vl(`Invalid padding: ${t}`);if(o<0)throw new vl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new vl(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new vl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ko.fromNumber(this.ge)}ye(e,t,o){let r=e.add(t.multiply(Ko.fromNumber(o)));return r.compare(ob)===1&&(r=new Ko([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Uv(e),[o,r]=Lv(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);if(!this.we(c))return!1}return!0}static create(e,t,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new kp(l,r,t);return o.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Uv(e),[o,r]=Lv(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,o,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const r=new Map;return r.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new ff(Re.min(),r,new mt(Oe),oo(),qe())}}class kl{constructor(e,t,o,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new kl(o,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t,o,r){this.be=e,this.removedTargetIds=t,this.key=o,this.De=r}}class FE{constructor(e,t){this.targetId=e,this.Ce=t}}class HE{constructor(e,t,o=jt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=r}}class kv{constructor(){this.ve=0,this.Fe=Ov(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),o=qe();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:o=o.add(r);break;default:Se(38017,{changeType:l})}})),new kl(this.Me,this.xe,e,t,o)}qe(){this.Oe=!1,this.Fe=Ov()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sb{constructor(e){this.Ge=e,this.ze=new Map,this.je=oo(),this.Je=_c(),this.He=_c(),this.Ye=new mt(Oe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,o=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(jh(l))if(o===0){const c=new ve(l.path);this.et(t,c,on.newNoDocument(c,Re.min()))}else We(o===1,20013,{expectedCount:o});else{const c=this._t(t);if(c!==o){const d=this.ut(e),y=d?this.ct(d,e,c):1;if(y!==0){this.it(t);const m=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=t;let c,d;try{c=Zo(o).toUint8Array()}catch(y){if(y instanceof dE)return Jr("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{d=new kp(c,r,l)}catch(y){return Jr(y instanceof vl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return d.ge===0?null:d}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let r=0;return o.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&jh(d.target)){const y=new ve(d.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,on.newNoDocument(y,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let o=qe();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((y=>{const m=this.ot(y);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new ff(e,t,this.Ye,this.je,o);return this.je=oo(),this.Je=_c(),this.He=_c(),this.Ye=new mt(Oe),r}Xe(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,o),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new kv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new qt(Oe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new qt(Oe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function _c(){return new mt(ve.comparator)}function Ov(){return new mt(ve.comparator)}const rb={asc:"ASCENDING",desc:"DESCENDING"},ab={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lb={and:"AND",or:"OR"};class ub{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tp(n,e){return n.useProto3Json||sf(e)?e:{value:e}}function Yc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cb(n,e){return Yc(n,e.toTimestamp())}function Vi(n){return We(!!n,49232),Re.fromTimestamp((function(t){const o=Wo(t);return new dt(o.seconds,o.nanos)})(n))}function Op(n,e){return np(n,e).canonicalString()}function np(n,e){const t=(function(r){return new ut(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function YE(n){const e=ut.fromString(n);return We($E(e),10190,{key:e.toString()}),e}function ip(n,e){return Op(n.databaseId,e.path)}function Ph(n,e){const t=YE(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(KE(t))}function JE(n,e){return Op(n.databaseId,e)}function fb(n){const e=YE(n);return e.length===4?ut.emptyPath():KE(e)}function op(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KE(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qv(n,e,t){return{name:ip(n,e),fields:t.value.mapValue.fields}}function db(n,e){let t;if("targetChange"in e){e.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Se(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(We(v===void 0||typeof v=="string",58123),jt.fromBase64String(v||"")):(We(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const v=m.code===void 0?ne.UNKNOWN:GE(m.code);return new he(v,m.message||"")})(c);t=new HE(o,r,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=Ph(n,o.document.name),l=Vi(o.document.updateTime),c=o.document.createTime?Vi(o.document.createTime):Re.min(),d=new Gn({mapValue:{fields:o.document.fields}}),y=on.newFoundDocument(r,l,c,d),m=o.targetIds||[],v=o.removedTargetIds||[];t=new xc(m,v,y.key,y)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=Ph(n,o.document),l=o.readTime?Vi(o.readTime):Re.min(),c=on.newNoDocument(r,l),d=o.removedTargetIds||[];t=new xc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=Ph(n,o.document),l=o.removedTargetIds||[];t=new xc([],l,r,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,c=new tb(r,l),d=o.targetId;t=new FE(d,c)}}return t}function hb(n,e){let t;if(e instanceof Ll)t={update:qv(n,e.key,e.value)};else if(e instanceof BE)t={delete:ip(n,e.key)};else if(e instanceof Gs)t={update:qv(n,e.key,e.data),updateMask:Sb(e.fieldMask)};else{if(!(e instanceof Zw))return Se(16599,{Vt:e.type});t={verify:ip(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(l,c){const d=c.transform;if(d instanceof Hc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Vl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Pl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof zc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Se(20930,{transform:c.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:cb(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(n,e.precondition)),t}function pb(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?Vi(r.updateTime):Vi(l);return c.isEqual(Re.min())&&(c=Vi(l)),new Xw(c,r.transformResults||[])})(t,e)))):[]}function mb(n,e){return{documents:[JE(n,e.path)]}}function gb(n,e){const t={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=JE(n,r);const l=(function(m){if(m.length!==0)return XE(ri.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:Pr(S.field),direction:vb(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=tp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function yb(n){let e=fb(n.parent);const t=n.structuredQuery,o=t.from?t.from.length:0;let r=null;if(o>0){We(o===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=QE(T);return S instanceof ri&&SE(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(L){return new Dl(Ur(L.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,sf(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(T){const S=!!T.before,I=T.values||[];return new Gc(I,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const S=!T.before,I=T.values||[];return new Gc(I,S)})(t.endAt)),Lw(e,r,c,l,d,"F",y,m)}function _b(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function QE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=Ur(t.unaryFilter.field);return Pt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Ur(t.unaryFilter.field);return Pt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ur(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ur(t.unaryFilter.field);return Pt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pt.create(Ur(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ri.create(t.compositeFilter.filters.map((o=>QE(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function vb(n){return rb[n]}function Tb(n){return ab[n]}function Eb(n){return lb[n]}function Pr(n){return{fieldPath:n.canonicalString()}}function Ur(n){return Zt.fromServerFormat(n.fieldPath)}function XE(n){return n instanceof Pt?(function(t){if(t.op==="=="){if(Iv(t.value))return{unaryFilter:{field:Pr(t.field),op:"IS_NAN"}};if(Rv(t.value))return{unaryFilter:{field:Pr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Iv(t.value))return{unaryFilter:{field:Pr(t.field),op:"IS_NOT_NAN"}};if(Rv(t.value))return{unaryFilter:{field:Pr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pr(t.field),op:Tb(t.op),value:t.value}}})(n):n instanceof ri?(function(t){const o=t.getFilters().map((r=>XE(r)));return o.length===1?o[0]:{compositeFilter:{op:Eb(t.op),filters:o}}})(n):Se(54877,{filter:n})}function Sb(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $E(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t,o,r,l=Re.min(),c=Re.min(),d=jt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=y}withSequenceNumber(e){return new Ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.yt=e}}function Cb(n){const e=yb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.Cn=new Ib}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve($o.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve($o.min())}updateCollectionGroup(e,t,o){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class Ib{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t]||new qt(ut.comparator),l=!r.has(o);return this.index[t]=r.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t];return r&&r.has(o)}getEntries(e){return(this.index[e]||new qt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WE=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(WE,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wr(0)}static cr(){return new Wr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="LruGarbageCollector",wb=1048576;function Fv([n,e],[t,o]){const r=Oe(n,t);return r===0?Oe(e,o):r}class bb{constructor(e){this.Ir=e,this.buffer=new qt(Fv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Fv(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Nb{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(Gv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){na(t)?pe(Gv,"Ignoring IndexedDB error during garbage collection: ",t):await ta(t)}await this.Vr(3e5)}))}}class xb{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(of.ce);const o=new bb(t);return this.mr.forEachTarget(e,(r=>o.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>o.Ar(r))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.mr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Bv)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let o,r,l,c,d,y,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(o=T,d=Date.now(),this.removeTargets(e,o,t)))).next((T=>(l=T,y=Date.now(),this.removeOrphanedDocuments(e,o)))).next((T=>(m=Date.now(),Dr()<=ze.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(d-c)+`ms
	Removed ${l} targets in `+(y-d)+`ms
	Removed ${T} documents in `+(m-y)+`ms
Total Duration: ${m-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function Mb(n,e){return new xb(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.changes=new Bs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?ie.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t,o,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(o!==null&&Rl(o.mutation,r,ii.empty(),dt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,qe()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=qe()){const r=Ls();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,o).next((l=>{let c=_l();return l.forEach(((d,y)=>{c=c.insert(d,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const o=Ls();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,qe())))}populateOverlays(e,t,o){const r=[];return o.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,o,r){let l=oo();const c=Cl(),d=(function(){return Cl()})();return t.forEach(((y,m)=>{const v=o.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof Gs)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Rl(v.mutation,m,v.mutation.getFieldMask(),dt.now())):c.set(m.key,ii.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>d.set(m,new Vb(v,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const o=Cl();let r=new mt(((c,d)=>c-d)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((y=>{const m=t.get(y);if(m===null)return;let v=o.get(y)||ii.empty();v=d.applyToLocalView(m,v),o.set(y,v);const T=(r.get(d.batchId)||qe()).add(y);r=r.insert(d.batchId,T)}))})).next((()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const y=d.getNext(),m=y.key,v=y.value,T=DE();v.forEach((S=>{if(!l.has(S)){const I=OE(t.get(S),o.get(S));I!==null&&T.set(S,I),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,T))}return ie.waitFor(c)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,r){return(function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,r):this.getDocumentsMatchingCollectionQuery(e,t,o,r)}getNextDocuments(e,t,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,r-l.size):ie.resolve(Ls());let d=bl,y=l;return c.next((m=>ie.forEach(m,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{y=y.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,y,m,qe()))).next((v=>({batchId:d,changes:ME(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((o=>{let r=_l();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,r){const l=t.collectionGroup;let c=_l();return this.indexManager.getCollectionParents(e,l).next((d=>ie.forEach(d,(y=>{const m=(function(T,S){return new ia(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,r).next((v=>{v.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,r)))).next((c=>{l.forEach(((y,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,on.newInvalidDocument(v)))}));let d=_l();return c.forEach(((y,m)=>{const v=l.get(y);v!==void 0&&Rl(v.mutation,m,ii.empty(),dt.now()),lf(t,m)&&(d=d.insert(y,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Vi(r.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:Cb(r.bundledQuery),readTime:Vi(r.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.overlays=new mt(ve.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Ls();return ie.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((r,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,o){const r=this.qr.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(o)),ie.resolve()}getOverlaysForCollection(e,t,o){const r=Ls(),l=t.length+1,c=new ve(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const y=d.getNext().value,m=y.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&y.largestBatchId>o&&r.set(y.getKey(),y)}return ie.resolve(r)}getOverlaysForCollectionGroup(e,t,o,r){let l=new mt(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>o){let v=l.get(m.largestBatchId);v===null&&(v=Ls(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Ls(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=r)););return ie.resolve(d)}St(e,t,o){const r=this.overlays.get(o.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(o.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(o.key,new eb(t,o));let l=this.qr.get(t);l===void 0&&(l=qe(),this.qr.set(t,l)),this.qr.set(t,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.Qr=new qt(Ht.$r),this.Ur=new qt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const o=new Ht(e,t);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((o=>this.removeReference(o,t)))}jr(e){const t=new ve(new ut([])),o=new Ht(t,e),r=new Ht(t,e+1),l=[];return this.Ur.forEachInRange([o,r],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new ut([])),o=new Ht(t,e),r=new Ht(t,e+1);let l=qe();return this.Ur.forEachInRange([o,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ht(e,0),o=this.Qr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Oe(e.Yr,t.Yr)}static Kr(e,t){return Oe(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Ht.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new jw(l,t,o,r);this.mutationQueue.push(c);for(const d of r)this.Zr=this.Zr.add(new Ht(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,r=this.ei(o),l=r<0?0:r;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?xp:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Ht(t,0),r=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([o,r],(c=>{const d=this.Xr(c.Yr);l.push(d)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new qt(Oe);return t.forEach((r=>{const l=new Ht(r,0),c=new Ht(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{o=o.add(d.Yr)}))})),ie.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,r=o.length+1;let l=o;ve.isDocumentKey(l)||(l=l.child(""));const c=new Ht(new ve(l),0);let d=new qt(Oe);return this.Zr.forEachWhile((y=>{const m=y.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(d=d.add(y.Yr)),!0)}),c),ie.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((o=>{const r=this.Xr(o);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return ie.forEach(t.mutations,(r=>{const l=new Ht(r.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,t){const o=new Ht(t,0),r=this.Zr.firstAfterOrEqual(o);return ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.ri=e,this.docs=(function(){return new mt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,r=this.docs.get(o),l=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ie.resolve(o?o.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let o=oo();return t.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():on.newInvalidDocument(r))})),ie.resolve(o)}getDocumentsMatchingQuery(e,t,o,r){let l=oo();const c=t.path,d=new ve(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(d);for(;y.hasNext();){const{key:m,value:{document:v}}=y.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||pw(hw(v),o)<=0||(r.has(v.key)||lf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,o,r){Se(9500)}ii(e,t){return ie.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new Bb(this)}getSize(e){return ie.resolve(this.size)}}class Bb extends Db{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(o)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.persistence=e,this.si=new Bs((t=>Vp(t)),Pp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new qp,this.targetCount=0,this.ai=Wr.ur()}forEachTarget(e,t){return this.si.forEach(((o,r)=>t(r))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Wr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,o){let r=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&o.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),ie.waitFor(l).next((()=>r))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const o=this.si.get(t)||null;return ie.resolve(o)}addMatchingKeys(e,t,o){return this._i.Wr(t,o),ie.resolve()}removeMatchingKeys(e,t,o){this._i.zr(t,o);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const o=this._i.Hr(t);return ie.resolve(o)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t){this.ui={},this.overlays={},this.ci=new of(0),this.li=!1,this.li=!0,this.hi=new kb,this.referenceDelegate=e(this),this.Pi=new Gb(this),this.indexManager=new Rb,this.remoteDocumentCache=(function(r){return new qb(r)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new Ab(t),this.Ii=new Ub(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.ui[e.toKey()];return o||(o=new Ob(t,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,o){pe("MemoryPersistence","Starting transaction:",e);const r=new Fb(this.ci.next());return this.referenceDelegate.Ei(),o(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,t))))}}class Fb extends gw{constructor(e){super(),this.currentSequenceNumber=e}}class Bp{constructor(e){this.persistence=e,this.Ri=new qp,this.Vi=null}static mi(e){return new Bp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.fi.delete(o.toString()),ie.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.fi.add(o.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>o.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(o=>{const r=ve.fromPath(o);return this.gi(e,r).next((l=>{l||t.removeEntry(r,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((o=>{o?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Jc{constructor(e,t){this.persistence=e,this.pi=new Bs((o=>vw(o.path)),((o,r)=>o.isEqual(r))),this.garbageCollector=Mb(this,t)}static mi(e,t){return new Jc(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((r=>o+r))))}wr(e){let t=0;return this.pr(e,(o=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((o,r)=>this.br(e,o,r).next((l=>l?ie.resolve():t(r)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((d=>{d||(o++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.pi.set(o,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,o){return this.pi.set(o,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wc(e.data.value)),t}br(e,t,o){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return ie.resolve(r!==void 0&&r>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,o,r){this.targetId=e,this.fromCache=t,this.Es=o,this.ds=r}static As(e,t){let o=qe(),r=qe();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Gp(e,t.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return UR()?8:yw(VR())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,r){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,r,o).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Hb;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,o,r){return o.documentReadCount<this.fs?(Dr()<=ze.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Vr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Dr()<=ze.DEBUG&&pe("QueryEngine","Query:",Vr(t),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.gs*r?(Dr()<=ze.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Vr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):ie.resolve())}ys(e,t){if(xv(t))return ie.resolve(null);let o=Mi(t);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Fc(t,null,"F"),o=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const c=qe(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,o).next((y=>{const m=this.Ds(t,d);return this.Cs(t,m,c,y.readTime)?this.ys(e,Fc(t,null,"F")):this.vs(e,m,t,y)}))))})))))}ws(e,t,o,r){return xv(t)||r.isEqual(Re.min())?ie.resolve(null):this.ps.getDocuments(e,o).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,o,r)?ie.resolve(null):(Dr()<=ze.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Vr(t)),this.vs(e,c,t,dw(r,bl)).next((d=>d)))}))}Ds(e,t){let o=new qt(NE(e));return t.forEach(((r,l)=>{lf(e,l)&&(o=o.add(l))})),o}Cs(e,t,o,r){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,o){return Dr()<=ze.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Vr(t)),this.ps.getDocumentsMatchingQuery(e,t,$o.min(),o)}vs(e,t,o,r){return this.ps.getDocumentsMatchingQuery(e,o,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="LocalStore",Yb=3e8;class Jb{constructor(e,t,o,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new mt(Oe),this.xs=new Bs((l=>Vp(l)),Pp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Kb(n,e,t,o){return new Jb(n,e,t,o)}async function jE(n,e){const t=we(n);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return t.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(o)))).next((l=>{const c=[],d=[];let y=qe();for(const m of r){c.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}return t.localDocuments.getDocuments(o,y).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function Qb(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,y,m,v){const T=m.batch,S=T.keys();let I=ie.resolve();return S.forEach((L=>{I=I.next((()=>v.getEntry(y,L))).next((B=>{const D=m.docVersions.get(L);We(D!==null,48541),B.version.compareTo(D)<0&&(T.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),v.addEntry(B)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(y,T)))})(t,o,e,l).next((()=>l.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let y=qe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(y=y.add(d.batch.mutations[m].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(o,r)))}))}function eS(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Xb(n,e){const t=we(n),o=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const d=[];e.targetChanges.forEach(((v,T)=>{const S=r.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,T))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(jt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,o)),r=r.insert(T,I),(function(B,D,Q){return B.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=Yb?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,I,v)&&d.push(t.Pi.updateTargetData(l,I))}));let y=oo(),m=qe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push($b(l,c,e.documentUpdates).next((v=>{y=v.ks,m=v.qs}))),!o.isEqual(Re.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(v)}return ie.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,m))).next((()=>y))})).then((l=>(t.Ms=r,l)))}function $b(n,e,t){let o=qe(),r=qe();return t.forEach((l=>o=o.add(l))),e.getEntries(n,o).next((l=>{let c=oo();return t.forEach(((d,y)=>{const m=l.get(d);y.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),y.isNoDocument()&&y.version.isEqual(Re.min())?(e.removeEntry(d,y.readTime),c=c.insert(d,y)):!m.isValidDocument()||y.version.compareTo(m.version)>0||y.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(y),c=c.insert(d,y)):pe(Fp,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",y.version)})),{ks:c,qs:r}}))}function Wb(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=xp),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function Zb(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return t.Pi.getTargetData(o,e).next((l=>l?(r=l,ie.resolve(r)):t.Pi.allocateTargetId(o).next((c=>(r=new Ho(e,c,"TargetPurposeListen",o.currentSequenceNumber),t.Pi.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=t.Ms.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(o.targetId,o),t.xs.set(e,o.targetId)),o}))}async function sp(n,e,t){const o=we(n),r=o.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,(c=>o.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!na(c))throw c;pe(Fp,`Failed to update sequence numbers for target ${e}: ${c}`)}o.Ms=o.Ms.remove(e),o.xs.delete(r.target)}function Hv(n,e,t){const o=we(n);let r=Re.min(),l=qe();return o.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,m,v){const T=we(y),S=T.xs.get(v);return S!==void 0?ie.resolve(T.Ms.get(S)):T.Pi.getTargetData(m,v)})(o,c,Mi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(c,d.targetId).next((y=>{l=y}))})).next((()=>o.Fs.getDocumentsMatchingQuery(c,e,t?r:Re.min(),t?l:qe()))).next((d=>(jb(o,Ow(e),d),{documents:d,Qs:l})))))}function jb(n,e,t){let o=n.Os.get(e)||Re.min();t.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),n.Os.set(e,o)}class zv{constructor(){this.activeTargetIds=zw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e1{constructor(){this.Mo=new zv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,o){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new zv,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="ConnectivityMonitor";class Jv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(Yv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(Yv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function rp(){return vc===null?vc=(function(){return 268435456+Math.round(2147483648*Math.random())})():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="RestConnection",n1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class i1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${o}/databases/${r}`,this.Wo=this.databaseId.database===qc?`project_id=${o}`:`project_id=${o}&database_id=${r}`}Go(e,t,o,r,l){const c=rp(),d=this.zo(e,t.toUriEncodedString());pe(Uh,`Sending RPC '${e}' ${c}:`,d,o);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,r,l);const{host:m}=new URL(d),v=Ip(m);return this.Jo(e,d,y,o,v).then((T=>(pe(Uh,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Jr(Uh,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",o),T}))}Ho(e,t,o,r,l,c){return this.Go(e,t,o,r,l)}jo(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ea})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),o&&o.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const o=n1[e];return`${this.Uo}/v1/${t}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class s1 extends i1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,o,r,l){const c=rp();return new Promise(((d,y)=>{const m=new tE;m.setWithCredentials(!0),m.listenOnce(nE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Ic.NO_ERROR:const T=m.getResponseJson();pe(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Ic.TIMEOUT:pe(tn,`RPC '${e}' ${c} timed out`),y(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:const S=m.getStatus();if(pe(tn,`RPC '${e}' ${c} failed with status:`,S,"response text:",m.getResponseText()),S>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const L=I==null?void 0:I.error;if(L&&L.status&&L.message){const B=(function(Q){const oe=Q.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(oe)>=0?oe:ne.UNKNOWN})(L.status);y(new he(B,L.message))}else y(new he(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else y(new he(ne.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{pe(tn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(r);pe(tn,`RPC '${e}' ${c} sending request:`,r),m.send(t,"POST",v,o,15)}))}T_(e,t,o){const r=rp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=sE(),d=oE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(y.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,o),y.encodeInitMessageHeaders=!0;const v=l.join("");pe(tn,`Creating RPC '${e}' stream ${r}: ${v}`,y);const T=c.createWebChannel(v,y);this.I_(T);let S=!1,I=!1;const L=new o1({Yo:D=>{I?pe(tn,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(S||(pe(tn,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),pe(tn,`RPC '${e}' stream ${r} sending:`,D),T.send(D))},Zo:()=>T.close()}),B=(D,Q,oe)=>{D.listen(Q,(Z=>{try{oe(Z)}catch(se){setTimeout((()=>{throw se}),0)}}))};return B(T,yl.EventType.OPEN,(()=>{I||(pe(tn,`RPC '${e}' stream ${r} transport opened.`),L.o_())})),B(T,yl.EventType.CLOSE,(()=>{I||(I=!0,pe(tn,`RPC '${e}' stream ${r} transport closed`),L.a_(),this.E_(T))})),B(T,yl.EventType.ERROR,(D=>{I||(I=!0,Jr(tn,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),L.a_(new he(ne.UNAVAILABLE,"The operation could not be completed")))})),B(T,yl.EventType.MESSAGE,(D=>{var Q;if(!I){const oe=D.data[0];We(!!oe,16349);const Z=oe,se=(Z==null?void 0:Z.error)||((Q=Z[0])==null?void 0:Q.error);if(se){pe(tn,`RPC '${e}' stream ${r} received error:`,se);const fe=se.status;let ue=(function(b){const U=Vt[b];if(U!==void 0)return GE(U)})(fe),x=se.message;ue===void 0&&(ue=ne.INTERNAL,x="Unknown error status: "+fe+" with message "+se.message),I=!0,L.a_(new he(ue,x)),T.close()}else pe(tn,`RPC '${e}' stream ${r} received:`,oe),L.u_(oe)}})),B(d,iE.STAT_EVENT,(D=>{D.stat===Qh.PROXY?pe(tn,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===Qh.NOPROXY&&pe(tn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n){return new ub(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t,o=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=o,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-o);r>0&&pe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="PersistentStream";class nS{constructor(e,t,o,r,l,c,d,y){this.Mi=e,this.S_=o,this.b_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(io(t.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.D_===t&&this.G_(o,r)}),(o=>{e((()=>{const r=new he(ne.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(r)}))}))}G_(e,t){const o=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{o((()=>this.z_(r)))})),this.stream.onMessage((r=>{o((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(Kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(Kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class r1 extends nS{constructor(e,t,o,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=db(this.serializer,e),o=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?Vi(c.readTime):Re.min()})(e);return this.listener.H_(t,o)}Y_(e){const t={};t.database=op(this.serializer),t.addTarget=(function(l,c){let d;const y=c.target;if(d=jh(y)?{documents:mb(l,y)}:{query:gb(l,y).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=zE(l,c.resumeToken);const m=tp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Re.min())>0){d.readTime=Yc(l,c.snapshotVersion.toTimestamp());const m=tp(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const o=_b(this.serializer,e);o&&(t.labels=o),this.q_(t)}Z_(e){const t={};t.database=op(this.serializer),t.removeTarget=e,this.q_(t)}}class a1 extends nS{constructor(e,t,o,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,r,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=pb(e.writeResults,e.commitTime),o=Vi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=op(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>hb(this.serializer,o)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{}class u1 extends l1{constructor(e,t,o,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,o,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,np(t,o),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ne.UNKNOWN,l.toString())}))}Ho(e,t,o,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,np(t,o),r,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class c1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(io(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="RemoteStore";class f1{constructor(e,t,o,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{o.enqueueAndForget((async()=>{Fs(this)&&(pe(Os,"Restarting streams for network reachability change."),await(async function(y){const m=we(y);m.Ea.add(4),await Ol(m),m.Ra.set("Unknown"),m.Ea.delete(4),await hf(m)})(this))}))})),this.Ra=new c1(o,r)}}async function hf(n){if(Fs(n))for(const e of n.da)await e(!0)}async function Ol(n){for(const e of n.da)await e(!1)}function iS(n,e){const t=we(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jp(t)?Yp(t):oa(t).O_()&&zp(t,e))}function Hp(n,e){const t=we(n),o=oa(t);t.Ia.delete(e),o.O_()&&oS(t,e),t.Ia.size===0&&(o.O_()?o.L_():Fs(t)&&t.Ra.set("Unknown"))}function zp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oa(n).Y_(e)}function oS(n,e){n.Va.Ue(e),oa(n).Z_(e)}function Yp(n){n.Va=new sb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),oa(n).start(),n.Ra.ua()}function Jp(n){return Fs(n)&&!oa(n).x_()&&n.Ia.size>0}function Fs(n){return we(n).Ea.size===0}function sS(n){n.Va=void 0}async function d1(n){n.Ra.set("Online")}async function h1(n){n.Ia.forEach(((e,t)=>{zp(n,e)}))}async function p1(n,e){sS(n),Jp(n)?(n.Ra.ha(e),Yp(n)):n.Ra.set("Unknown")}async function m1(n,e,t){if(n.Ra.set("Online"),e instanceof HE&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.Ia.delete(d),r.Va.removeTarget(d))})(n,e)}catch(o){pe(Os,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Kc(n,o)}else if(e instanceof xc?n.Va.Ze(e):e instanceof FE?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{const o=await eS(n.localStore);t.compareTo(o)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((y,m)=>{if(y.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(y.resumeToken,c))}})),d.targetMismatches.forEach(((y,m)=>{const v=l.Ia.get(y);if(!v)return;l.Ia.set(y,v.withResumeToken(jt.EMPTY_BYTE_STRING,v.snapshotVersion)),oS(l,y);const T=new Ho(v.target,y,m,v.sequenceNumber);zp(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(o){pe(Os,"Failed to raise snapshot:",o),await Kc(n,o)}}async function Kc(n,e,t){if(!na(e))throw e;n.Ea.add(1),await Ol(n),n.Ra.set("Offline"),t||(t=()=>eS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Os,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hf(n)}))}function rS(n,e){return e().catch((t=>Kc(n,t,e)))}async function pf(n){const e=we(n),t=es(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xp;for(;g1(e);)try{const r=await Wb(e.localStore,o);if(r===null){e.Ta.length===0&&t.L_();break}o=r.batchId,y1(e,r)}catch(r){await Kc(e,r)}aS(e)&&lS(e)}function g1(n){return Fs(n)&&n.Ta.length<10}function y1(n,e){n.Ta.push(e);const t=es(n);t.O_()&&t.X_&&t.ea(e.mutations)}function aS(n){return Fs(n)&&!es(n).x_()&&n.Ta.length>0}function lS(n){es(n).start()}async function _1(n){es(n).ra()}async function v1(n){const e=es(n);for(const t of n.Ta)e.ea(t.mutations)}async function T1(n,e,t){const o=n.Ta.shift(),r=Lp.from(o,e,t);await rS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await pf(n)}async function E1(n,e){e&&es(n).X_&&await(async function(o,r){if((function(c){return nb(c)&&c!==ne.ABORTED})(r.code)){const l=o.Ta.shift();es(o).B_(),await rS(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await pf(o)}})(n,e),aS(n)&&lS(n)}async function Qv(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),pe(Os,"RemoteStore received new credentials");const o=Fs(t);t.Ea.add(3),await Ol(t),o&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hf(t)}async function S1(n,e){const t=we(n);e?(t.Ea.delete(2),await hf(t)):e||(t.Ea.add(2),await Ol(t),t.Ra.set("Unknown"))}function oa(n){return n.ma||(n.ma=(function(t,o,r){const l=we(t);return l.sa(),new r1(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:d1.bind(null,n),t_:h1.bind(null,n),r_:p1.bind(null,n),H_:m1.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Jp(n)?Yp(n):n.Ra.set("Unknown")):(await n.ma.stop(),sS(n))}))),n.ma}function es(n){return n.fa||(n.fa=(function(t,o,r){const l=we(t);return l.sa(),new a1(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:_1.bind(null,n),r_:E1.bind(null,n),ta:v1.bind(null,n),na:T1.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await pf(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Os,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,o,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new Qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,r,l){const c=Date.now()+o,d=new Kp(e,t,c,r,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(n,e){if(io("AsyncQueue",`${e}: ${n}`),na(n))return new he(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{static emptySet(e){return new Br(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||ve.comparator(t.key,o.key):(t,o)=>ve.comparator(t.key,o.key),this.keyedMap=_l(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new Br;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.ga=new mt(ve.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class Zr{constructor(e,t,o,r,l,c,d,y,m){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=y,this.hasCachedResults=m}static fromInitialDocuments(e,t,o,r,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Zr(e,t,Br.emptySet(t),c,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==o[r].type||!t[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class C1{constructor(){this.queries=$v(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const r=we(t),l=r.queries;r.queries=$v(),l.forEach(((c,d)=>{for(const y of d.Sa)y.onError(o)}))})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function $v(){return new Bs((n=>bE(n)),af)}async function R1(n,e){const t=we(n);let o=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(o=2):(l=new A1,o=e.Da()?0:1);try{switch(o){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const d=Qp(c,`Initialization of query '${Vr(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Xp(t)}async function I1(n,e){const t=we(n),o=e.query;let r=3;const l=t.queries.get(o);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function w1(n,e){const t=we(n);let o=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(r)&&(o=!0);c.wa=r}}o&&Xp(t)}function b1(n,e,t){const o=we(n),r=o.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);o.queries.delete(e)}function Xp(n){n.Ca.forEach((e=>{e.next()}))}var ap,Wv;(Wv=ap||(ap={})).Ma="default",Wv.Cache="cache";class N1{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new Zr(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.key=e}}class cS{constructor(e){this.key=e}}class x1{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=NE(e),this.tu=new Br(this.eu)}get nu(){return this.Ya}ru(e,t){const o=t?t.iu:new Xv,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,d=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,T)=>{const S=r.get(v),I=lf(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),B=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let D=!1;S&&I?S.data.isEqual(I.data)?L!==B&&(o.track({type:3,doc:I}),D=!0):this.su(S,I)||(o.track({type:2,doc:I}),D=!0,(y&&this.eu(I,y)>0||m&&this.eu(I,m)<0)&&(d=!0)):!S&&I?(o.track({type:0,doc:I}),D=!0):S&&!I&&(o.track({type:1,doc:S}),D=!0,(y||m)&&(d=!0)),D&&(I?(c=c.add(I),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),o.track({type:1,doc:v})}return{tu:c,iu:o,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,T)=>(function(I,L){const B=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:D})}};return B(I)-B(L)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(o),r=r??!1;const d=t&&!r?this._u():[],y=this.Xa.size===0&&this.current&&!r?1:0,m=y!==this.Za;return this.Za=y,c.length!==0||m?{snapshot:new Zr(this.query,e.tu,l,c,e.mutatedKeys,y===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const t=[];return e.forEach((o=>{this.Xa.has(o)||t.push(new cS(o))})),this.Xa.forEach((o=>{e.has(o)||t.push(new uS(o))})),t}cu(e){this.Ya=e.Qs,this.Xa=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $p="SyncEngine";class M1{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class D1{constructor(e){this.key=e,this.hu=!1}}class V1{constructor(e,t,o,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Bs((d=>bE(d)),af),this.Iu=new Map,this.Eu=new Set,this.du=new mt(ve.comparator),this.Au=new Map,this.Ru=new qp,this.Vu={},this.mu=new Map,this.fu=Wr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function P1(n,e,t=!0){const o=gS(n);let r;const l=o.Tu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await fS(o,e,t,!0),r}async function U1(n,e){const t=gS(n);await fS(t,e,!0,!1)}async function fS(n,e,t,o){const r=await Zb(n.localStore,Mi(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return o&&(d=await L1(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&iS(n.remoteStore,r),d}async function L1(n,e,t,o,r){n.pu=(T,S,I)=>(async function(B,D,Q,oe){let Z=D.view.ru(Q);Z.Cs&&(Z=await Hv(B.localStore,D.query,!1).then((({documents:x})=>D.view.ru(x,Z))));const se=oe&&oe.targetChanges.get(D.targetId),fe=oe&&oe.targetMismatches.get(D.targetId)!=null,ue=D.view.applyChanges(Z,B.isPrimaryClient,se,fe);return jv(B,D.targetId,ue.au),ue.snapshot})(n,T,S,I);const l=await Hv(n.localStore,e,!0),c=new x1(e,l.Qs),d=c.ru(l.documents),y=kl.createSynthesizedTargetChangeForCurrentChange(t,o&&n.onlineState!=="Offline",r),m=c.applyChanges(d,n.isPrimaryClient,y);jv(n,t,m.au);const v=new M1(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function k1(n,e,t){const o=we(n),r=o.Tu.get(e),l=o.Iu.get(r.targetId);if(l.length>1)return o.Iu.set(r.targetId,l.filter((c=>!af(c,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await sp(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),t&&Hp(o.remoteStore,r.targetId),lp(o,r.targetId)})).catch(ta)):(lp(o,r.targetId),await sp(o.localStore,r.targetId,!0))}async function O1(n,e){const t=we(n),o=t.Tu.get(e),r=t.Iu.get(o.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Hp(t.remoteStore,o.targetId))}async function q1(n,e,t){const o=J1(n);try{const r=await(function(c,d){const y=we(c),m=dt.now(),v=d.reduce(((I,L)=>I.add(L.key)),qe());let T,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let L=oo(),B=qe();return y.Ns.getEntries(I,v).next((D=>{L=D,L.forEach(((Q,oe)=>{oe.isValidDocument()||(B=B.add(Q))}))})).next((()=>y.localDocuments.getOverlayedDocuments(I,L))).next((D=>{T=D;const Q=[];for(const oe of d){const Z=Ww(oe,T.get(oe.key).overlayedDocument);Z!=null&&Q.push(new Gs(oe.key,Z,vE(Z.value.mapValue),Di.exists(!0)))}return y.mutationQueue.addMutationBatch(I,m,Q,d)})).next((D=>{S=D;const Q=D.applyToLocalDocumentSet(T,B);return y.documentOverlayCache.saveOverlays(I,D.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:ME(T)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(c,d,y){let m=c.Vu[c.currentUser.toKey()];m||(m=new mt(Oe)),m=m.insert(d,y),c.Vu[c.currentUser.toKey()]=m})(o,r.batchId,t),await ql(o,r.changes),await pf(o.remoteStore)}catch(r){const l=Qp(r,"Failed to persist write");t.reject(l)}}async function dS(n,e){const t=we(n);try{const o=await Xb(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&(We(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?We(c.hu,14607):r.removedDocuments.size>0&&(We(c.hu,42227),c.hu=!1))})),await ql(t,o,e)}catch(o){await ta(o)}}function Zv(n,e,t){const o=we(n);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const r=[];o.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(c,d){const y=we(c);y.onlineState=d;let m=!1;y.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(d)&&(m=!0)})),m&&Xp(y)})(o.eventManager,e),r.length&&o.Pu.H_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function B1(n,e,t){const o=we(n);o.sharedClientState.updateQueryState(e,"rejected",t);const r=o.Au.get(e),l=r&&r.key;if(l){let c=new mt(ve.comparator);c=c.insert(l,on.newNoDocument(l,Re.min()));const d=qe().add(l),y=new ff(Re.min(),new Map,new mt(Oe),c,d);await dS(o,y),o.du=o.du.remove(l),o.Au.delete(e),Wp(o)}else await sp(o.localStore,e,!1).then((()=>lp(o,e,t))).catch(ta)}async function G1(n,e){const t=we(n),o=e.batch.batchId;try{const r=await Qb(t.localStore,e);pS(t,o,null),hS(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await ql(t,r)}catch(r){await ta(r)}}async function F1(n,e,t){const o=we(n);try{const r=await(function(c,d){const y=we(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return y.mutationQueue.lookupMutationBatch(m,d).next((T=>(We(T!==null,37113),v=T.keys(),y.mutationQueue.removeMutationBatch(m,T)))).next((()=>y.mutationQueue.performConsistencyCheck(m))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>y.localDocuments.getDocuments(m,v)))}))})(o.localStore,e);pS(o,e,t),hS(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await ql(o,r)}catch(r){await ta(r)}}function hS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function pS(n,e,t){const o=we(n);let r=o.Vu[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),o.Vu[o.currentUser.toKey()]=r}}function lp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Iu.get(e))n.Tu.delete(o),t&&n.Pu.yu(o,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((o=>{n.Ru.containsKey(o)||mS(n,o)}))}function mS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Hp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Wp(n))}function jv(n,e,t){for(const o of t)o instanceof uS?(n.Ru.addReference(o.key,e),H1(n,o)):o instanceof cS?(pe($p,"Document no longer in limbo: "+o.key),n.Ru.removeReference(o.key,e),n.Ru.containsKey(o.key)||mS(n,o.key)):Se(19791,{wu:o})}function H1(n,e){const t=e.key,o=t.path.canonicalString();n.du.get(t)||n.Eu.has(o)||(pe($p,"New document in limbo: "+t),n.Eu.add(o),Wp(n))}function Wp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(ut.fromString(e)),o=n.fu.next();n.Au.set(o,new D1(t)),n.du=n.du.insert(t,o),iS(n.remoteStore,new Ho(Mi(IE(t.path)),o,"TargetPurposeLimboResolution",of.ce))}}async function ql(n,e,t){const o=we(n),r=[],l=[],c=[];o.Tu.isEmpty()||(o.Tu.forEach(((d,y)=>{c.push(o.pu(y,e,t).then((m=>{var v;if((m||t)&&o.isPrimaryClient){const T=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:v.current;o.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(m){r.push(m);const T=Gp.As(y.targetId,m);l.push(T)}})))})),await Promise.all(c),o.Pu.H_(r),await(async function(y,m){const v=we(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ie.forEach(m,(S=>ie.forEach(S.Es,(I=>v.persistence.referenceDelegate.addReference(T,S.targetId,I))).next((()=>ie.forEach(S.ds,(I=>v.persistence.referenceDelegate.removeReference(T,S.targetId,I)))))))))}catch(T){if(!na(T))throw T;pe(Fp,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const I=v.Ms.get(S),L=I.snapshotVersion,B=I.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(S,B)}}})(o.localStore,l))}async function z1(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){pe($p,"User change. New user:",e.toKey());const o=await jE(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((y=>{y.reject(new he(ne.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await ql(t,o.Ls)}}function Y1(n,e){const t=we(n),o=t.Au.get(e);if(o&&o.hu)return qe().add(o.key);{let r=qe();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const d=t.Tu.get(c);r=r.unionWith(d.view.nu)}return r}}function gS(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=B1.bind(null,e),e.Pu.H_=w1.bind(null,e.eventManager),e.Pu.yu=b1.bind(null,e.eventManager),e}function J1(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F1.bind(null,e),e}class Qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Kb(this.persistence,new zb,e.initialUser,this.serializer)}Cu(e){return new ZE(Bp.mi,this.serializer)}Du(e){return new e1}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qc.provider={build:()=>new Qc};class K1 extends Qc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof Jc,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new Nb(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new ZE((o=>Jc.mi(o,t)),this.serializer)}}class up{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>Zv(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=z1.bind(null,this.syncEngine),await S1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new C1})()}createDatastore(e){const t=df(e.databaseInfo.databaseId),o=(function(l){return new s1(l)})(e.databaseInfo);return(function(l,c,d,y){return new u1(l,c,d,y)})(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,r,l,c,d){return new f1(o,r,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Zv(this.syncEngine,t,0)),(function(){return Jv.v()?new Jv:new t1})())}createSyncEngine(e,t){return(function(r,l,c,d,y,m,v){const T=new V1(r,l,c,d,y,m);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=we(r);pe(Os,"RemoteStore shutting down."),l.Ea.add(5),await Ol(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="FirestoreClient";class X1{constructor(e,t,o,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=Np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async c=>{pe(ts,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(o,(c=>(pe(ts,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=Qp(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function kh(n,e){n.asyncQueue.verifyOperationInProgress(),pe(ts,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let o=t.initialUser;n.setCredentialChangeListener((async r=>{o.isEqual(r)||(await jE(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function e0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await $1(n);pe(ts,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((o=>Qv(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,r)=>Qv(e.remoteStore,r))),n._onlineComponents=e}async function $1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(ts,"Using user provided OfflineComponentProvider");try{await kh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Jr("Error using user provided cache. Falling back to memory cache: "+t),await kh(n,new Qc)}}else pe(ts,"Using default OfflineComponentProvider"),await kh(n,new K1(void 0));return n._offlineComponents}async function yS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(ts,"Using user provided OnlineComponentProvider"),await e0(n,n._uninitializedComponentsProvider._online)):(pe(ts,"Using default OnlineComponentProvider"),await e0(n,new up))),n._onlineComponents}function W1(n){return yS(n).then((e=>e.syncEngine))}async function Z1(n){const e=await yS(n),t=e.eventManager;return t.onListen=P1.bind(null,e.syncEngine),t.onUnlisten=k1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=U1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=O1.bind(null,e.syncEngine),t}function j1(n,e,t={}){const o=new Qo;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,y,m){const v=new Q1({next:S=>{v.Nu(),c.enqueueAndForget((()=>I1(l,T))),S.fromCache&&y.source==="server"?m.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new N1(d,v,{includeMetadataChanges:!0,qa:!0});return R1(l,T)})(await Z1(n),n.asyncQueue,e,t,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="firestore.googleapis.com",n0=!0;class i0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vS,this.ssl=n0}else this.host=e.host,this.ssl=e.ssl??n0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wb)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_S(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mf{constructor(e,t,o,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new tw;switch(o.type){case"firstParty":return new sw(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=t0.get(t);o&&(pe("ComponentProvider","Removing Datastore"),t0.delete(t),o.terminate())})(this),Promise.resolve()}}function eN(n,e,t,o={}){var m;n=Qr(n,mf);const r=Ip(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(bR(`https://${d}`),DR("Firestore",!0)),l.host!==vS&&l.host!==d&&Jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:d,ssl:r,emulatorOptions:o};if(!Uc(y,c)&&(n._setSettings(y),o.mockUserToken)){let v,T;if(typeof o.mockUserToken=="string")v=o.mockUserToken,T=nn.MOCK_USER;else{v=NR(o.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new he(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new nn(S)}n._authCredentials=new nw(new aE(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class Ot{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(Ul(t,Ot._jsonSchema))return new Ot(e,o||null,new ve(ut.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Ut("string",Ot._jsonSchemaVersion),referencePath:Ut("string")};class Xo extends ns{constructor(e,t,o){super(e,t,IE(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new ve(e))}withConverter(e){return new Xo(this.firestore,e,this._path)}}function gf(n,e,...t){if(n=Yr(n),lE("collection","path",e),n instanceof mf){const o=ut.fromString(e,...t);return gv(o),new Xo(n,null,o)}{if(!(n instanceof Ot||n instanceof Xo))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ut.fromString(e,...t));return gv(o),new Xo(n.firestore,null,o)}}function Zp(n,e,...t){if(n=Yr(n),arguments.length===1&&(e=Np.newId()),lE("doc","path",e),n instanceof mf){const o=ut.fromString(e,...t);return mv(o),new Ot(n,null,new ve(o))}{if(!(n instanceof Ot||n instanceof Xo))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ut.fromString(e,...t));return mv(o),new Ot(n.firestore,n instanceof Xo?n.converter:null,new ve(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="AsyncQueue";class s0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tS(this,"async_queue_retry"),this._c=()=>{const o=Lh();o&&pe(o0,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!na(e))throw e;pe(o0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,io("INTERNAL UNHANDLED ERROR: ",r0(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Kp.createAndSchedule(this,e,t,o,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Se(47125,{Pc:r0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function r0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class yf extends mf{constructor(e,t,o,r){super(e,t,o,r),this.type="firestore",this._queue=new s0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s0(e),this._firestoreClient=void 0,await e}}}function tN(n,e){const t=typeof n=="object"?n:FI(),o=typeof n=="string"?n:qc,r=kI(t,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=IR("firestore");l&&eN(r,...l)}return r}function TS(n){if(n._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nN(n),n._firestoreClient}function nN(n){var o,r,l;const e=n._freezeSettings(),t=(function(d,y,m,v){return new Sw(d,y,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,_S(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((o=n._app)==null?void 0:o.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new X1(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const y=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(jt.fromBase64String(e))}catch(t){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ul(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:Ut("string",Fn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Ul(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:Ut("string",Pi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ul(e,Ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ui(e.vectorValues);throw new he(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:Ut("string",Ui._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=/^__.*__$/;class oN{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ll(e,this.data,t,this.fieldTransforms)}}function SS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class em{constructor(e,t,o,r,l,c){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new em({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.Vc({path:t,fc:!1});return o.gc(e),o}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.Vc({path:t,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(SS(this.Ac)&&iN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class sN{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||df(e)}Cc(e,t,o,r=!1){return new em({Ac:e,methodName:t,Dc:o,path:Zt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tm(n){const e=n._freezeSettings(),t=df(n._databaseId);return new sN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AS(n,e,t,o,r,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);IS("Data must be an object, but it was:",c,o);const d=CS(o,c);let y,m;if(l.merge)y=new ii(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const S=aN(e,T,t);if(!c.contains(S))throw new he(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);uN(v,S)||v.push(S)}y=new ii(v),m=c.fieldTransforms.filter((T=>y.covers(T.field)))}else y=null,m=c.fieldTransforms;return new oN(new Gn(d),y,m)}function rN(n,e,t,o=!1){return nm(t,n.Cc(o?4:3,e))}function nm(n,e){if(RS(n=Yr(n)))return IS("Unsupported field value:",e,n),CS(n,e);if(n instanceof ES)return(function(o,r){if(!SS(r.Ac))throw r.Sc(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,r){const l=[];let c=0;for(const d of o){let y=nm(d,r.wc(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(n,e)}return(function(o,r){if((o=Yr(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return Yw(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=dt.fromDate(o);return{timestampValue:Yc(r.serializer,l)}}if(o instanceof dt){const l=new dt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Yc(r.serializer,l)}}if(o instanceof Pi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Fn)return{bytesValue:zE(r.serializer,o._byteString)};if(o instanceof Ot){const l=r.databaseId,c=o.firestore._databaseId;if(!c.isEqual(l))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Op(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof Ui)return(function(c,d){return{mapValue:{fields:{[yE]:{stringValue:_E},[Bc]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return Up(d.serializer,m)}))}}}}}})(o,r);throw r.Sc(`Unsupported field value: ${nf(o)}`)})(n,e)}function CS(n,e){const t={};return fE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(n,((o,r)=>{const l=nm(r,e.mc(o));l!=null&&(t[o]=l)})),{mapValue:{fields:t}}}function RS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof Pi||n instanceof Fn||n instanceof Ot||n instanceof ES||n instanceof Ui)}function IS(n,e,t){if(!RS(t)||!uE(t)){const o=nf(t);throw o==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+o)}}function aN(n,e,t){if((e=Yr(e))instanceof jp)return e._internalPath;if(typeof e=="string")return wS(n,e);throw Xc("Field path arguments must be of type string or ",n,!1,void 0,t)}const lN=new RegExp("[~\\*/\\[\\]]");function wS(n,e,t){if(e.search(lN)>=0)throw Xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jp(...e.split("."))._internalPath}catch{throw Xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xc(n,e,t,o,r){const l=o&&!o.isEmpty(),c=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${o}`),c&&(y+=` in document ${r}`),y+=")"),new he(ne.INVALID_ARGUMENT,d+n+y)}function uN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,t,o,r,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(im("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cN extends bS{data(){return super.data()}}function im(n,e){return typeof e=="string"?wS(n,e):e instanceof jp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class om{}class sm extends om{}function dN(n,e,...t){let o=[];e instanceof om&&o.push(e),o=o.concat(t),(function(l){const c=l.filter((y=>y instanceof am)).length,d=l.filter((y=>y instanceof rm)).length;if(c>1||c>0&&d>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const r of o)n=r._apply(n);return n}class rm extends sm{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new rm(e,t,o)}_apply(e){const t=this._parse(e);return NS(e._query,t),new ns(e.firestore,e.converter,ep(e._query,t))}_parse(e){const t=tm(e.firestore);return(function(l,c,d,y,m,v,T){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){l0(T,v);const L=[];for(const B of T)L.push(a0(y,l,B));S={arrayValue:{values:L}}}else S=a0(y,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||l0(T,v),S=rN(d,c,T,v==="in"||v==="not-in");return Pt.create(m,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class am extends om{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new am(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let c=r;const d=l.getFlattenedFilters();for(const y of d)NS(c,y),c=ep(c,y)})(e._query,t),new ns(e.firestore,e.converter,ep(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lm extends sm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lm(e,t)}_apply(e){const t=(function(r,l,c){if(r.startAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dl(l,c)})(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,(function(r,l){const c=r.explicitOrderBy.concat([l]);return new ia(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function hN(n,e="asc"){const t=e,o=im("orderBy",n);return lm._create(o,t)}class um extends sm{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new um(e,t,o)}_apply(e){return new ns(e.firestore,e.converter,Fc(e._query,this._limit,this._limitType))}}function pN(n){return um._create("limit",n,"F")}function a0(n,e,t){if(typeof(t=Yr(t))=="string"){if(t==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wE(e)&&t.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(ut.fromString(t));if(!ve.isDocumentKey(o))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Cv(n,new ve(o))}if(t instanceof Ot)return Cv(n,t._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nf(t)}.`)}function l0(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NS(n,e){const t=(function(r,l){for(const c of r)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class mN{convertValue(e,t="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return qs(e,((r,l)=>{o[r]=this.convertValue(l,t)})),o}convertVectorValue(e){var o,r,l;const t=(l=(r=(o=e.fields)==null?void 0:o[Bc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>At(c.doubleValue)));return new Ui(t)}convertGeoPoint(e){return new Pi(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=rf(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const t=Wo(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=ut.fromString(e);We($E(o),9688,{name:e});const r=new xl(o.get(1),o.get(3)),l=new ve(o.popFirst(5));return r.isEqual(t)||io(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n,e,t){let o;return o=n?n.toFirestore(e):e,o}class Tc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gr extends bS{constructor(e,t,o,r,l,c){super(e,t,o,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(im("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Gr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Gr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gr._jsonSchema={type:Ut("string",Gr._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Mc extends Gr{data(e={}){return super.data(e)}}class Fr{constructor(e,t,o,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Tc(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new Mc(this._firestore,this._userDataWriter,o.key,o,new Tc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((d=>{const y=new Mc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Tc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const y=new Mc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Tc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:gN(d.type),doc:y,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}Fr._jsonSchemaVersion="firestore/querySnapshot/1.0",Fr._jsonSchema={type:Ut("string",Fr._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class yN extends mN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function cm(n){n=Qr(n,ns);const e=Qr(n.firestore,yf),t=TS(e),o=new yN(e);return fN(n._query),j1(t,n._query).then((r=>new Fr(e,o,n,r)))}function MS(n,e,t){n=Qr(n,Ot);const o=Qr(n.firestore,yf),r=xS(n.converter,e);return DS(o,[AS(tm(o),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Di.none())])}function _N(n,e){const t=Qr(n.firestore,yf),o=Zp(n),r=xS(n.converter,e);return DS(t,[AS(tm(n.firestore),"addDoc",o._key,r,n.converter!==null,{}).toMutation(o._key,Di.exists(!1))]).then((()=>o))}function DS(n,e){return(function(o,r){const l=new Qo;return o.asyncQueue.enqueueAndForget((async()=>q1(await W1(o),r,l))),l.promise})(TS(n),e)}(function(e,t=!0){(function(r){ea=r})(GI),kc(new Il("firestore",((o,{instanceIdentifier:r,options:l})=>{const c=o.getProvider("app").getImmediate(),d=new yf(new iw(o.getProvider("auth-internal")),new rw(c,o.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xl(m.options.projectId,v)})(c,r),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),qr(fv,dv,e),qr(fv,dv,"esm2020")})();const vN={apiKey:"AIzaSyDCq97GmqK_wxMOrjLasErr84dFR_0fS94",authDomain:"mirror-sensei.firebaseapp.com",projectId:"mirror-sensei",storageBucket:"mirror-sensei.firebasestorage.app",messagingSenderId:"125849822127",appId:"1:125849822127:web:862f6ff539afb97f5f855a"},TN=WT(vN),sa=tN(TN),EN=async(n,e,t)=>{const o=`${n}_${e}`.replace(/\s+/g,"_");await MS(Zp(sa,"adminPrompts",o),{category:n,subCategory:e,prompt:t,updatedAt:Date.now()})},VS=async()=>(await cm(gf(sa,"adminPrompts"))).docs.map(e=>({id:e.id,...e.data()})),SN=async(n,e)=>{const t=n.replace(/\s+/g,"_");await MS(Zp(sa,"levelPrompts",t),{level:n,prompt:e,updatedAt:Date.now()})},PS=async()=>(await cm(gf(sa,"levelPrompts"))).docs.map(e=>({id:e.id,...e.data()})),AN=async n=>{await _N(gf(sa,"history"),{...n,timestamp:Date.now()})},u0=async n=>{const e=gf(sa,"history"),t=dN(e,hN("timestamp","desc"),pN(20)),r=(await cm(t)).docs.map(l=>({id:l.id,...l.data()}));return n?r.filter(l=>l.query.toLowerCase().includes(n.toLowerCase())||l.response.toLowerCase().includes(n.toLowerCase())):r};var CN={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RN,IN;function wN(){return{geminiUrl:RN,vertexUrl:IN}}function bN(n,e,t,o){var r,l;if(!(n!=null&&n.baseUrl)){const c=wN();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ro{}function ce(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const y=n[d];if(Array.isArray(t))for(let m=0;m<y.length;m++){const v=y[m];h(v,e.slice(l+1),t[m])}else for(const m of y)h(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const y=n[d];h(y[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(o+1),t)):t}else return t}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function NN(n,e){for(const[t,o]of Object.entries(e)){const r=t.split("."),l=o.split("."),c=new Set;let d=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){d=y;break}if(d!==-1&&l.length>d)for(let y=d;y<l.length;y++){const m=l[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}cp(n,r,l,0,c)}}function cp(n,e,t,o,r){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const y of d[c])cp(y,e,t,o+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),y={};for(const m of d)y[m]=c[m];for(const[m,v]of Object.entries(y)){const T=[];for(const S of t.slice(o))S==="*"?T.push(m):T.push(S);h(c,T,v)}for(const m of d)delete c[m]}}else{const c=n;l in c&&cp(c[l],e,t,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xN(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const o=f(n,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function MN(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],VN(c)),e}function DN(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],PN(c)),e}function VN(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>UN(c))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function PN(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>LN(c))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function UN(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],FN(t)),e}function LN(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],HN(t)),e}function kN(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function ON(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function qN(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],BN(c)),e}function BN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function US(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],GN(c)),e}function GN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function FN(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&h(e,["videoBytes"],fm(o));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function HN(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],fm(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var c0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(c0||(c0={}));var f0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(f0||(f0={}));var d0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(d0||(d0={}));var zo;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(zo||(zo={}));var h0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(h0||(h0={}));var p0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(p0||(p0={}));var m0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(m0||(m0={}));var g0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(g0||(g0={}));var y0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(y0||(y0={}));var _0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(_0||(_0={}));var v0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(v0||(v0={}));var T0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(T0||(T0={}));var E0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(E0||(E0={}));var S0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(S0||(S0={}));var A0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(A0||(A0={}));var C0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(C0||(C0={}));var R0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(R0||(R0={}));var I0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(I0||(I0={}));var w0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(w0||(w0={}));var b0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(b0||(b0={}));var N0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(N0||(N0={}));var $c;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})($c||($c={}));var x0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(x0||(x0={}));var M0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(M0||(M0={}));var D0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(D0||(D0={}));var fp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(fp||(fp={}));var V0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(V0||(V0={}));var P0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(P0||(P0={}));var U0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(U0||(U0={}));var L0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(L0||(L0={}));var k0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(k0||(k0={}));var O0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(O0||(O0={}));var q0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(q0||(q0={}));var B0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(B0||(B0={}));var G0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(G0||(G0={}));var F0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(F0||(F0={}));var H0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(H0||(H0={}));var z0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(z0||(z0={}));var Y0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Y0||(Y0={}));var J0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(J0||(J0={}));var K0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(K0||(K0={}));var Q0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Q0||(Q0={}));var X0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(X0||(X0={}));var $0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})($0||($0={}));var W0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(W0||(W0={}));var Z0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Z0||(Z0={}));var j0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(j0||(j0={}));var eT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(eT||(eT={}));var tT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tT||(tT={}));var nT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nT||(nT={}));var iT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(iT||(iT={}));var oT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(oT||(oT={}));var sT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sT||(sT={}));var rT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(rT||(rT={}));var kr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(kr||(kr={}));class dp{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ml{get text(){var e,t,o,r,l,c,d,y;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const T=[];for(const S of(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[I,L]of Object.entries(S))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(L!==null||L!==void 0)&&T.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,o,r,l,c,d,y;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const T of(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[S,I]of Object.entries(T))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,o,r,l,c,d,y;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,o,r,l,c,d,y,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,o,r,l,c,d,y,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class aT{}class lT{}class zN{}class YN{}class JN{}class KN{}class uT{}class cT{}class fT{}class QN{}class Wc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Wc;let r;const l=e;return t?r=DN(l):r=MN(l),Object.assign(o,r),o}}class dT{}class hT{}class pT{}class mT{}class XN{}class $N{}class WN{}class dm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new dm,l=qN(e);return Object.assign(o,l),o}}class ZN{}class jN{}class ex{}class gT{}class tx{get text(){var e,t,o;let r="",l=!1;const c=[];for(const d of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[y,m]of Object.entries(d))y!=="text"&&y!=="thought"&&m!==null&&c.push(y);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const c of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[d,y]of Object.entries(c))d!=="inlineData"&&y!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class nx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class hm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new hm,l=US(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function LS(n,e){const t=Ke(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function kS(n){return Array.isArray(n)?n.map(e=>Zc(e)):[Zc(n)]}function Zc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function OS(n){const e=Zc(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qS(n){const e=Zc(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function BS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>yT(e)):[yT(n)]}function hp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function _T(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function vT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function sn(n){if(n==null)throw new Error("ContentUnion is required");return hp(n)?n:{role:"user",parts:BS(n)}}function pm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=sn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=sn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>sn(t)):[sn(e)]}function Hn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(_T(n)||vT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[sn(n)]}const e=[],t=[],o=hp(n[0]);for(const r of n){const l=hp(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(_T(r)||vT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:BS(t)}),e}function ix(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(zo).includes(t[0].toUpperCase())?t[0].toUpperCase():zo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(zo).includes(o.toUpperCase())?o.toUpperCase():zo.TYPE_UNSPECIFIED})}}function Hr(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&ix(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(zo).includes(d.toUpperCase())?d.toUpperCase():zo.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Hr(d);else if(o.includes(c)){const y=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}y.push(Hr(m))}e[c]=y}else if(r.includes(c)){const y={};for(const[m,v]of Object.entries(d))y[m]=Hr(v);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=d}return e}function mm(n){return Hr(n)}function gm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ym(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ra(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Hr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Hr(e.response));return n}function aa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function ox(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function ao(n,e){if(typeof e!="string")throw new Error("name must be a string");return ox(n,e,"cachedContents")}function GS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function is(n){return fm(n)}function sx(n){return n!=null&&typeof n=="object"&&"name"in n}function rx(n){return n!=null&&typeof n=="object"&&"video"in n}function ax(n){return n!=null&&typeof n=="object"&&"uri"in n}function FS(n){var e;let t;if(sx(n)&&(t=n.name),!(ax(n)&&(t=n.uri,t===void 0))&&!(rx(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function HS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function zS(n){for(const e of["models","tunedModels","publisherModels"])if(lx(n,e))return n[e];return[]}function lx(n,e){return n!==null&&typeof n=="object"&&e in n}function ux(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function cx(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=ux(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function YS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function fx(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function JS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function la(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function KS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dx(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Jx(c))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function hx(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function px(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Dc(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],KS(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const y=f(n,["metadata","model"]);y!=null&&h(e,["model"],y);const m=f(n,["metadata","output"]);return m!=null&&h(e,["dest"],dx(JS(m))),e}function pp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["state"]);r!=null&&h(e,["state"],KS(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["createTime"]);c!=null&&h(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const y=f(n,["endTime"]);y!=null&&h(e,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&h(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&h(e,["src"],mx(T));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],hx(JS(S)));const I=f(n,["completionStats"]);return I!=null&&h(e,["completionStats"],I),e}function mx(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function gx(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&h(t,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Yx(n,c))),h(t,["requests","requests"],l)}return t}function yx(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _x(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function vx(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],la(n,o)),t}function Tx(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],la(n,o)),t}function Ex(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],Sx(o));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&h(e,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>I)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function Sx(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["citations"],o)}return e}function QS(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>jx(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function Ax(n,e){const t={},o=f(n,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Cx(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],px(fx(r))),t}function TT(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],gx(n,YS(n,r)));const l=f(e,["config"]);return l!=null&&Ax(l,t),t}function Rx(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],Ke(n,o));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],yx(YS(n,r)));const l=f(e,["config"]);return l!=null&&Cx(l,t),t}function Ix(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),t}function wx(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],Px(n,r));const l=f(e,["config"]);return l!=null&&Ix(l,t),t}function bx(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],la(n,o)),t}function Nx(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],la(n,o)),t}function xx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function Mx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function Dx(n,e){const t={},o=f(e,["contents"]);if(o!=null){let l=pm(n,o);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],Vx(r,t)),NN(t,{"requests[].*":"requests[].request.*"})),t}function Vx(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Px(n,e){const t={},o=f(e,["fileName"]);o!=null&&h(t,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],Dx(n,r)),t}function Ux(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Lx(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kx(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ox(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],QS(sn(r)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(o,["topP"],c);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const y=f(e,["candidateCount"]);y!=null&&h(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(o,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&h(o,["frequencyPenalty"],L);const B=f(e,["seed"]);B!=null&&h(o,["seed"],B);const D=f(e,["responseMimeType"]);D!=null&&h(o,["responseMimeType"],D);const Q=f(e,["responseSchema"]);Q!=null&&h(o,["responseSchema"],mm(Q));const oe=f(e,["responseJsonSchema"]);if(oe!=null&&h(o,["responseJsonSchema"],oe),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let M=Z;Array.isArray(M)&&(M=M.map(De=>eM(De))),h(t,["safetySettings"],M)}const se=f(e,["tools"]);if(t!==void 0&&se!=null){let M=aa(se);Array.isArray(M)&&(M=M.map(De=>nM(ra(De)))),h(t,["tools"],M)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&h(t,["toolConfig"],tM(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&h(t,["cachedContent"],ao(n,ue));const x=f(e,["responseModalities"]);x!=null&&h(o,["responseModalities"],x);const N=f(e,["mediaResolution"]);N!=null&&h(o,["mediaResolution"],N);const b=f(e,["speechConfig"]);if(b!=null&&h(o,["speechConfig"],gm(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(o,["thinkingConfig"],U);const P=f(e,["imageConfig"]);P!=null&&h(o,["imageConfig"],zx(P));const G=f(e,["enableEnhancedCivicAnswers"]);return G!=null&&h(o,["enableEnhancedCivicAnswers"],G),o}function qx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>Ex(m))),h(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function Bx(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],la(n,o)),t}function Gx(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],la(n,o)),t}function Fx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Hx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function zx(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Yx(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["request","model"],Ke(n,o));const r=f(e,["contents"]);if(r!=null){let d=Hn(r);Array.isArray(d)&&(d=d.map(y=>QS(y))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&h(t,["request","generationConfig"],Ox(n,c,f(t,["request"],{}))),t}function Jx(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],qx(t));const o=f(n,["error"]);return o!=null&&h(e,["error"],o),e}function Kx(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Qx(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function Xx(n){const e={},t=f(n,["config"]);return t!=null&&Kx(t,e),e}function $x(n){const e={},t=f(n,["config"]);return t!=null&&Qx(t,e),e}function Wx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Dc(c))),h(e,["batchJobs"],l)}return e}function Zx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>pp(c))),h(e,["batchJobs"],l)}return e}function jx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],Ux(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],Lx(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],_x(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function eM(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function tM(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],kx(o)),e}function nM(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],Fx(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],Hx(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var so;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(so||(so={}));class Hs{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iM extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Hs(so.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=TT(this.apiClient,e),o=t._url,r=ce("{model}:batchGenerateContent",o),d=t.batch.inputConfig.requests,y=d.requests,m=[];for(const v of y){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const I=T.request;I.systemInstruction=S,T.request=I}m.push(T)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Rx(this.apiClient,e);return d=ce("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>pp(v))}else{const m=TT(this.apiClient,e);return d=ce("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Dc(v))}}async createEmbeddingsInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wx(this.apiClient,e);return l=ce("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>Dc(y))}}async get(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Gx(this.apiClient,e);return d=ce("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>pp(v))}else{const m=Bx(this.apiClient,e);return d=ce("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Dc(v))}}async cancel(e){var t,o,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const y=Tx(this.apiClient,e);c=ce("batchPredictionJobs/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=vx(this.apiClient,e);c=ce("batches/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=$x(e);return d=ce("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Zx(v),S=new gT;return Object.assign(S,T),S})}else{const m=Xx(e);return d=ce("batches",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=Wx(v),S=new gT;return Object.assign(S,T),S})}}async delete(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Nx(this.apiClient,e);return d=ce("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Mx(v))}else{const m=bx(this.apiClient,e);return d=ce("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>xx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oM(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ET(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>wM(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function sM(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=Hn(c);Array.isArray(v)&&(v=v.map(T=>ET(T))),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],ET(sn(d)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(T=>NM(T))),h(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],bM(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function rM(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=Hn(c);Array.isArray(T)&&(T=T.map(S=>S)),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],sn(d));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let T=y;Array.isArray(T)&&(T=T.map(S=>xM(S))),h(e,["tools"],T)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function aM(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],LS(n,o));const r=f(e,["config"]);return r!=null&&sM(r,t),t}function lM(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],LS(n,o));const r=f(e,["config"]);return r!=null&&rM(r,t),t}function uM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ao(n,o)),t}function cM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ao(n,o)),t}function fM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function dM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function hM(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function pM(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mM(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gM(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function yM(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ao(n,o)),t}function _M(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ao(n,o)),t}function vM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function TM(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function EM(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function SM(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function AM(n){const e={},t=f(n,["config"]);return t!=null&&EM(t,e),e}function CM(n){const e={},t=f(n,["config"]);return t!=null&&SM(t,e),e}function RM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function IM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function wM(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],hM(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],pM(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],oM(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function bM(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],mM(o)),e}function NM(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],vM(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],TM(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function xM(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>gM(S))),h(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function MM(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function DM(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function VM(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],ao(n,o));const r=f(e,["config"]);return r!=null&&MM(r,t),t}function PM(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],ao(n,o));const r=f(e,["config"]);return r!=null&&DM(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UM extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Hs(so.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=lM(this.apiClient,e);return d=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=aM(this.apiClient,e);return d=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=_M(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=yM(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=cM(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=dM(v),S=new pT;return Object.assign(S,T),S})}else{const m=uM(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=fM(v),S=new pT;return Object.assign(S,T),S})}}async update(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=PM(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=VM(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=CM(e);return d=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=IM(v),S=new mT;return Object.assign(S,T),S})}else{const m=AM(e);return d=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=RM(v),S=new mT;return Object.assign(S,T),S})}}}function jc(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]]);return t}function ST(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(n){return this instanceof Ce?(this.v=n,this):new Ce(n)}function oi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(L){return Promise.resolve(L).then(I,T)}}function d(I,L){o[I]&&(r[I]=function(B){return new Promise(function(D,Q){l.push([I,B,D,Q])>1||y(I,B)})},L&&(r[I]=L(r[I])))}function y(I,L){try{m(o[I](L))}catch(B){S(l[0][3],B)}}function m(I){I.value instanceof Ce?Promise.resolve(I.value.v).then(v,T):S(l[0][2],I)}function v(I){y("next",I)}function T(I){y("throw",I)}function S(I,L){I(L),l.shift(),l.length&&y(l[0][0],l[0][1])}}function si(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ST=="function"?ST(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(c){return new Promise(function(d,y){c=n[l](c),r(d,y,c.done,c.value)})}}function r(l,c,d,y){Promise.resolve(y).then(function(m){l({value:m,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LM(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:XS(t)}function XS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function kM(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function AT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!XS(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class OM{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new qM(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class qM{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),kM(l)}async sendMessage(e){var t;await this.sendPromise;const o=sn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const y=await r,m=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=y.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const I=m?[m]:[];this.recordHistory(o,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=sn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?AT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return oi(this,arguments,function*(){var r,l,c,d,y,m;const v=[];try{for(var T=!0,S=si(e),I;I=yield Ce(S.next()),r=I.done,!r;T=!0){d=I.value,T=!1;const L=d;if(LM(L)){const B=(m=(y=L.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;B!==void 0&&v.push(B)}yield yield Ce(L)}}catch(L){l={error:L}}finally{try{!T&&!r&&(c=S.return)&&(yield Ce(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,v)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...AT(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _f extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,_f.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BM(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function GM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function FM(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],FS(t)),e}function HM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function zM(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],FS(t)),e}function YM(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function JM(n){const e={},t=f(n,["config"]);return t!=null&&YM(t,e),e}function KM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QM extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Hs(so.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=JM(e);return l=ce("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=KM(y),v=new ZN;return Object.assign(v,m),v})}}async createInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BM(e);return l=ce("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=GM(y),v=new jN;return Object.assign(v,m),v})}}async get(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zM(e);return l=ce("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FM(e);return l=ce("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=HM(y),v=new ex;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vc(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function XM(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>fD(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function $M(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function WM(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ZM(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function jM(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&h(e,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&h(e,["responseMimeType"],I);const L=f(n,["responseModalities"]);L!=null&&h(e,["responseModalities"],L);const B=f(n,["responseSchema"]);B!=null&&h(e,["responseSchema"],B);const D=f(n,["routingConfig"]);D!=null&&h(e,["routingConfig"],D);const Q=f(n,["seed"]);Q!=null&&h(e,["seed"],Q);const oe=f(n,["speechConfig"]);oe!=null&&h(e,["speechConfig"],oe);const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const se=f(n,["temperature"]);se!=null&&h(e,["temperature"],se);const fe=f(n,["thinkingConfig"]);fe!=null&&h(e,["thinkingConfig"],fe);const ue=f(n,["topK"]);ue!=null&&h(e,["topK"],ue);const x=f(n,["topP"]);if(x!=null&&h(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function eD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function tD(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function nD(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],ym(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],XM(sn(L)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=aa(B);Array.isArray(ue)&&(ue=ue.map(x=>hD(ra(x)))),h(e,["setup","tools"],ue)}const D=f(n,["sessionResumption"]);e!==void 0&&D!=null&&h(e,["setup","sessionResumption"],dD(D));const Q=f(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&h(e,["setup","inputAudioTranscription"],Q);const oe=f(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&h(e,["setup","outputAudioTranscription"],oe);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&h(e,["setup","contextWindowCompression"],se);const fe=f(n,["proactivity"]);if(e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function iD(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],jM(o));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],ym(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],sn(L));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let x=aa(B);Array.isArray(x)&&(x=x.map(N=>pD(ra(N)))),h(e,["setup","tools"],x)}const D=f(n,["sessionResumption"]);e!==void 0&&D!=null&&h(e,["setup","sessionResumption"],D);const Q=f(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&h(e,["setup","inputAudioTranscription"],Q);const oe=f(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&h(e,["setup","outputAudioTranscription"],oe);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&h(e,["setup","contextWindowCompression"],se);const fe=f(n,["proactivity"]);e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe);const ue=f(n,["explicitVadSignal"]);return e!==void 0&&ue!=null&&h(e,["setup","explicitVadSignal"],ue),t}function oD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],Ke(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],nD(r,t)),t}function sD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],Ke(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],iD(r,t)),t}function rD(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function aD(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["weightedPrompts"],o)}return e}function lD(n){const e={},t=f(n,["media"]);if(t!=null){let m=kS(t);Array.isArray(m)&&(m=m.map(v=>Vc(v))),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],Vc(qS(o)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],Vc(OS(l)));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&h(e,["activityEnd"],y),e}function uD(n){const e={},t=f(n,["media"]);if(t!=null){let m=kS(t);Array.isArray(m)&&(m=m.map(v=>v)),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],qS(o));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],OS(l));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&h(e,["activityEnd"],y),e}function cD(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const o=f(n,["serverContent"]);o!=null&&h(e,["serverContent"],o);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],mD(c));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const y=f(n,["sessionResumptionUpdate"]);y!=null&&h(e,["sessionResumptionUpdate"],y);const m=f(n,["voiceActivityDetectionSignal"]);return m!=null&&h(e,["voiceActivityDetectionSignal"],m),e}function fD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],$M(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],WM(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],Vc(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function dD(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function hD(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],eD(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],tD(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function pD(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>ZM(S))),h(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function mD(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const o=f(n,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const y=f(n,["promptTokensDetails"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["promptTokensDetails"],I)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["cacheTokensDetails"],I)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["responseTokensDetails"],I)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let I=T;Array.isArray(I)&&(I=I.map(L=>L)),h(e,["toolUsePromptTokensDetails"],I)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gD(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function yD(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],_D(o));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&h(e,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>I)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function _D(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["citations"],o)}return e}function vD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["contents"]);if(r!=null){let l=Hn(r);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["contents"],l)}return t}function TD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["tokensInfo"],r)}return e}function ED(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const o=f(n,["statistics"]);return o!=null&&h(e,["statistics"],SD(o)),e}function SD(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const o=f(n,["token_count"]);return o!=null&&h(e,["tokenCount"],o),e}function vf(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>M2(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function AD(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const o=f(n,["enableControlImageComputation"]);return o!=null&&h(e,["computeControl"],o),e}function CD(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function RD(n,e){const t={},o=f(n,["systemInstruction"]);e!==void 0&&o!=null&&h(e,["systemInstruction"],sn(o));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>jS(d))),h(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],g2(l)),t}function ID(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(d=>vf(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&CD(l),t}function wD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&RD(l,t),t}function bD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["totalTokens"]);o!=null&&h(e,["totalTokens"],o);const r=f(n,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function ND(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["totalTokens"]);return o!=null&&h(e,["totalTokens"],o),e}function xD(n,e){const t={},o=f(e,["model"]);return o!=null&&h(t,["_url","name"],Ke(n,o)),t}function MD(n,e){const t={},o=f(e,["model"]);return o!=null&&h(t,["_url","name"],Ke(n,o)),t}function DD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function VD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function PD(n,e){const t={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const y=f(n,["seed"]);e!==void 0&&y!=null&&h(e,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","compressionQuality"],B);const D=f(n,["addWatermark"]);e!==void 0&&D!=null&&h(e,["parameters","addWatermark"],D);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&h(e,["labels"],Q);const oe=f(n,["editMode"]);e!==void 0&&oe!=null&&h(e,["parameters","editMode"],oe);const Z=f(n,["baseSteps"]);return e!==void 0&&Z!=null&&h(e,["parameters","editConfig","baseSteps"],Z),t}function UD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(y=>k2(y))),h(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&PD(c,t),t}function LD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Tf(l))),h(e,["generatedImages"],r)}return e}function kD(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function OD(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&h(e,["instances[]","task_type"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function qD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["contents"]);if(r!=null){let d=pm(n,r);Array.isArray(d)&&(d=d.map(y=>y)),h(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&kD(l,t);const c=f(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],Ke(n,c)),t}function BD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["contents"]);if(r!=null){let c=pm(n,r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&OD(l,t),t}function GD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function FD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>ED(c))),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function HD(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const o=f(n,["deployedModelId"]);return o!=null&&h(e,["deployedModelId"],o),e}function zD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function YD(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JD(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function KD(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function QD(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],vf(sn(r)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(o,["topP"],c);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const y=f(e,["candidateCount"]);y!=null&&h(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(o,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&h(o,["frequencyPenalty"],L);const B=f(e,["seed"]);B!=null&&h(o,["seed"],B);const D=f(e,["responseMimeType"]);D!=null&&h(o,["responseMimeType"],D);const Q=f(e,["responseSchema"]);Q!=null&&h(o,["responseSchema"],mm(Q));const oe=f(e,["responseJsonSchema"]);if(oe!=null&&h(o,["responseJsonSchema"],oe),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let M=Z;Array.isArray(M)&&(M=M.map(De=>O2(De))),h(t,["safetySettings"],M)}const se=f(e,["tools"]);if(t!==void 0&&se!=null){let M=aa(se);Array.isArray(M)&&(M=M.map(De=>Y2(ra(De)))),h(t,["tools"],M)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&h(t,["toolConfig"],z2(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&h(t,["cachedContent"],ao(n,ue));const x=f(e,["responseModalities"]);x!=null&&h(o,["responseModalities"],x);const N=f(e,["mediaResolution"]);N!=null&&h(o,["mediaResolution"],N);const b=f(e,["speechConfig"]);if(b!=null&&h(o,["speechConfig"],gm(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(o,["thinkingConfig"],U);const P=f(e,["imageConfig"]);P!=null&&h(o,["imageConfig"],E2(P));const G=f(e,["enableEnhancedCivicAnswers"]);return G!=null&&h(o,["enableEnhancedCivicAnswers"],G),o}function XD(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],sn(r));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(o,["topP"],c);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const y=f(e,["candidateCount"]);y!=null&&h(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&h(o,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&h(o,["frequencyPenalty"],L);const B=f(e,["seed"]);B!=null&&h(o,["seed"],B);const D=f(e,["responseMimeType"]);D!=null&&h(o,["responseMimeType"],D);const Q=f(e,["responseSchema"]);Q!=null&&h(o,["responseSchema"],mm(Q));const oe=f(e,["responseJsonSchema"]);oe!=null&&h(o,["responseJsonSchema"],oe);const Z=f(e,["routingConfig"]);Z!=null&&h(o,["routingConfig"],Z);const se=f(e,["modelSelectionConfig"]);se!=null&&h(o,["modelConfig"],se);const fe=f(e,["safetySettings"]);if(t!==void 0&&fe!=null){let $=fe;Array.isArray($)&&($=$.map(re=>re)),h(t,["safetySettings"],$)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let $=aa(ue);Array.isArray($)&&($=$.map(re=>jS(ra(re)))),h(t,["tools"],$)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&h(t,["toolConfig"],x);const N=f(e,["labels"]);t!==void 0&&N!=null&&h(t,["labels"],N);const b=f(e,["cachedContent"]);t!==void 0&&b!=null&&h(t,["cachedContent"],ao(n,b));const U=f(e,["responseModalities"]);U!=null&&h(o,["responseModalities"],U);const P=f(e,["mediaResolution"]);P!=null&&h(o,["mediaResolution"],P);const G=f(e,["speechConfig"]);G!=null&&h(o,["speechConfig"],gm(G));const M=f(e,["audioTimestamp"]);M!=null&&h(o,["audioTimestamp"],M);const De=f(e,["thinkingConfig"]);De!=null&&h(o,["thinkingConfig"],De);const at=f(e,["imageConfig"]);if(at!=null&&h(o,["imageConfig"],S2(at)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function CT(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(d=>vf(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],QD(n,l,t)),t}function RT(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["contents"]);if(r!=null){let c=Hn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],XD(n,l,t)),t}function IT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>yD(m))),h(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function wT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>v)),h(e,["candidates"],m)}const r=f(n,["createTime"]);r!=null&&h(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&h(e,["responseId"],d);const y=f(n,["usageMetadata"]);return y!=null&&h(e,["usageMetadata"],y),e}function $D(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&h(e,["parameters","includeSafetyAttributes"],y);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(e!==void 0&&I!=null&&h(e,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function WD(n,e){const t={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const y=f(n,["seed"]);e!==void 0&&y!=null&&h(e,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","compressionQuality"],B);const D=f(n,["addWatermark"]);e!==void 0&&D!=null&&h(e,["parameters","addWatermark"],D);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&h(e,["labels"],Q);const oe=f(n,["imageSize"]);e!==void 0&&oe!=null&&h(e,["parameters","sampleImageSize"],oe);const Z=f(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&h(e,["parameters","enhancePrompt"],Z),t}function ZD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&$D(l,t),t}function jD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&WD(l,t),t}function e2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>d2(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],WS(r)),e}function t2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Tf(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],ZS(r)),e}function n2(n,e){const t={},o=f(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&h(e,["parameters","negativePrompt"],y);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],Ef(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(I=>oV(I))),h(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function i2(n,e){const t={},o=f(n,["numberOfVideos"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&h(e,["parameters","aspectRatio"],y);const m=f(n,["resolution"]);e!==void 0&&m!=null&&h(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&h(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const I=f(n,["enhancePrompt"]);e!==void 0&&I!=null&&h(e,["parameters","enhancePrompt"],I);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&h(e,["parameters","generateAudio"],L);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&h(e,["instances[0]","lastFrame"],ai(B));const D=f(n,["referenceImages"]);if(e!==void 0&&D!=null){let Z=D;Array.isArray(Z)&&(Z=Z.map(se=>sV(se))),h(e,["instances[0]","referenceImages"],Z)}const Q=f(n,["mask"]);e!==void 0&&Q!=null&&h(e,["instances[0]","mask"],iV(Q));const oe=f(n,["compressionQuality"]);return e!==void 0&&oe!=null&&h(e,["parameters","compressionQuality"],oe),t}function o2(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],l2(c)),e}function s2(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],u2(c)),e}function r2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],Ef(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],eA(c));const d=f(e,["source"]);d!=null&&c2(d,t);const y=f(e,["config"]);return y!=null&&n2(y,t),t}function a2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],ai(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],tA(c));const d=f(e,["source"]);d!=null&&f2(d,t);const y=f(e,["config"]);return y!=null&&i2(y,t),t}function l2(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>p2(c))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function u2(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>m2(c))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function c2(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],Ef(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],eA(l)),t}function f2(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],ai(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],tA(l)),t}function d2(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],A2(t));const o=f(n,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const r=f(n,["_self"]);return r!=null&&h(e,["safetyAttributes"],WS(r)),e}function Tf(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],$S(t));const o=f(n,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const r=f(n,["_self"]);r!=null&&h(e,["safetyAttributes"],ZS(r));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function h2(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],$S(t));const o=f(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["labels"],r)}return e}function p2(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],tV(t)),e}function m2(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],nV(t)),e}function g2(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&h(e,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&h(e,["responseMimeType"],I);const L=f(n,["responseModalities"]);L!=null&&h(e,["responseModalities"],L);const B=f(n,["responseSchema"]);B!=null&&h(e,["responseSchema"],B);const D=f(n,["routingConfig"]);D!=null&&h(e,["routingConfig"],D);const Q=f(n,["seed"]);Q!=null&&h(e,["seed"],Q);const oe=f(n,["speechConfig"]);oe!=null&&h(e,["speechConfig"],oe);const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const se=f(n,["temperature"]);se!=null&&h(e,["temperature"],se);const fe=f(n,["thinkingConfig"]);fe!=null&&h(e,["thinkingConfig"],fe);const ue=f(n,["topK"]);ue!=null&&h(e,["topK"],ue);const x=f(n,["topP"]);if(x!=null&&h(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function y2(n,e){const t={},o=f(e,["model"]);return o!=null&&h(t,["_url","name"],Ke(n,o)),t}function _2(n,e){const t={},o=f(e,["model"]);return o!=null&&h(t,["_url","name"],Ke(n,o)),t}function v2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function T2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function E2(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function S2(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const o=f(n,["imageSize"]);o!=null&&h(e,["imageSize"],o);const r=f(n,["personGeneration"]);r!=null&&h(e,["personGeneration"],r);const l=f(n,["outputMimeType"]);l!=null&&h(e,["imageOutputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);return c!=null&&h(e,["imageOutputOptions","compressionQuality"],c),e}function A2(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],is(t));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function $S(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&h(e,["imageBytes"],is(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Ef(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],is(t));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ai(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const o=f(n,["imageBytes"]);o!=null&&h(e,["bytesBase64Encoded"],is(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function C2(n,e,t){const o={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],HS(n,d)),o}function R2(n,e,t){const o={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],HS(n,d)),o}function I2(n,e){const t={},o=f(e,["config"]);return o!=null&&C2(n,o,t),t}function w2(n,e){const t={},o=f(e,["config"]);return o!=null&&R2(n,o,t),t}function b2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let l=zS(r);Array.isArray(l)&&(l=l.map(c=>mp(c))),h(e,["models"],l)}return e}function N2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let l=zS(r);Array.isArray(l)&&(l=l.map(c=>gp(c))),h(e,["models"],l)}return e}function x2(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const o=f(n,["segmentationClasses"]);o!=null&&h(e,["maskClasses"],o);const r=f(n,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function mp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const c=f(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],J2(c));const d=f(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const y=f(n,["outputTokenLimit"]);y!=null&&h(e,["outputTokenLimit"],y);const m=f(n,["supportedGenerationMethods"]);m!=null&&h(e,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&h(e,["temperature"],v);const T=f(n,["maxTemperature"]);T!=null&&h(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&h(e,["topP"],S);const I=f(n,["topK"]);I!=null&&h(e,["topK"],I);const L=f(n,["thinking"]);return L!=null&&h(e,["thinking"],L),e}function gp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>HD(S))),h(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&h(e,["labels"],d);const y=f(n,["_self"]);y!=null&&h(e,["tunedModelInfo"],K2(y));const m=f(n,["defaultCheckpointId"]);m!=null&&h(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),h(e,["checkpoints"],T)}return e}function M2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],zD(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],YD(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],gD(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function D2(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],ai(t)),e}function V2(n,e){const t={},o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&h(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const I=f(n,["labels"]);return e!==void 0&&I!=null&&h(e,["labels"],I),t}function P2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["source"]);r!=null&&L2(r,t);const l=f(e,["config"]);return l!=null&&V2(l,t),t}function U2(n){const e={},t=f(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Tf(r))),h(e,["generatedImages"],o)}return e}function L2(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const r=f(n,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],ai(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>D2(d))),h(e,["instances[0]","productImages"],c)}return t}function k2(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],ai(t));const o=f(n,["referenceId"]);o!=null&&h(e,["referenceId"],o);const r=f(n,["referenceType"]);r!=null&&h(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],x2(l));const c=f(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],AD(c));const d=f(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const y=f(n,["subjectImageConfig"]);return y!=null&&h(e,["subjectImageConfig"],y),e}function WS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const o=f(n,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function ZS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const o=f(n,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function O2(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function q2(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],ai(t)),e}function B2(n,e){const t={},o=f(n,["mode"]);e!==void 0&&o!=null&&h(e,["parameters","mode"],o);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const y=f(n,["labels"]);return e!==void 0&&y!=null&&h(e,["labels"],y),t}function G2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["source"]);r!=null&&H2(r,t);const l=f(e,["config"]);return l!=null&&B2(l,t),t}function F2(n){const e={},t=f(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>h2(r))),h(e,["generatedMasks"],o)}return e}function H2(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],ai(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],q2(l)),t}function z2(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],JD(o)),e}function Y2(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],v2(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],T2(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function jS(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>KD(S))),h(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&h(e,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function J2(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function K2(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function Q2(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function X2(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function $2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","name"],Ke(n,o));const r=f(e,["config"]);return r!=null&&Q2(r,t),t}function W2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["config"]);return r!=null&&X2(r,t),t}function Z2(n,e){const t={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&h(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const y=f(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","compressionQuality"],y);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const I=f(n,["mode"]);return e!==void 0&&I!=null&&h(e,["parameters","mode"],I),t}function j2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ke(n,o));const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],ai(r));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&Z2(c,t),t}function eV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Tf(l))),h(e,["generatedImages"],r)}return e}function tV(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&h(e,["videoBytes"],is(o));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function nV(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],is(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function iV(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],ai(t));const o=f(n,["maskMode"]);return o!=null&&h(e,["maskMode"],o),e}function oV(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],Ef(t));const o=f(n,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function sV(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],ai(t));const o=f(n,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function eA(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const o=f(n,["videoBytes"]);o!=null&&h(e,["encodedVideo"],is(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function tA(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const o=f(n,["videoBytes"]);o!=null&&h(e,["bytesBase64Encoded"],is(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rV(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),t}function aV(n){const e={},t=f(n,["config"]);return t!=null&&rV(t,e),e}function lV(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function uV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&lV(o,e),e}function cV(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function fV(n,e){const t={},o=f(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function dV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],pV(c)),e}function hV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["fileName"]);o!=null&&h(e,["fileName"],o);const r=f(n,["config"]);return r!=null&&fV(r,e),e}function pV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function mV(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function gV(n){const e={},t=f(n,["config"]);return t!=null&&mV(t,e),e}function yV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function nA(n,e){const t={},o=f(n,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(y=>y)),h(e,["customMetadata"],d)}const c=f(n,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),t}function _V(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["config"]);return o!=null&&nA(o,e),e}function vV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TV="Content-Type",EV="X-Server-Timeout",SV="User-Agent",yp="x-goog-api-client",AV="1.35.0",CV=`google-genai-sdk/${AV}`,RV="v1beta1",IV="v1beta";class wV{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:RV,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:IV,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,r){if(t&&t.timeout||r){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&bV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await bT(r),new dp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await bT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return oi(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const d="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Ce(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(v,{stream:!0});try{const L=JSON.parse(T);if("error"in L){const B=JSON.parse(JSON.stringify(L.error)),D=B.status,Q=B.code,oe=`got status: ${D}. ${JSON.stringify(L)}`;if(Q>=400&&Q<600)throw new _f({message:oe,status:Q})}}catch(L){if(L.name==="ApiError")throw L}c+=T;let S=-1,I=0;for(;;){S=-1,I=0;for(const D of y){const Q=c.indexOf(D);Q!==-1&&(S===-1||Q<S)&&(S=Q,I=D.length)}if(S===-1)break;const L=c.substring(0,S);c=c.substring(S+I);const B=L.trim();if(B.startsWith(d)){const D=B.substring(d.length).trim();try{const Q=new Response(D,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ce(new dp(Q))}catch(Q){throw new Error(`exception parsing stream chunk ${D}. ${Q}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=CV+" "+this.clientOptions.userAgentExtra;return e[SV]=t,e[yp]=t,e[TV]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(EV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const d=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const y={file:r},m=this.getFileName(e),v=ce("upload/v1beta/files",y._url),T=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,y,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,o){var r;const l=this.clientOptions.uploader,c=await l.stat(t),d=String(c.size),y=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};o!=null&&nA(o,T);const S=await this.fetchUploadUrl(m,d,y,v,T,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,r,l,c){var d;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:y});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function bT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new _f({message:r,status:t}):new Error(r)}}function bV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const d=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const m=c[y],v=d[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[y]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[y]=m)}return d}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NV="mcp_used/unknown";let xV=!1;function iA(n){for(const e of n)if(MV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return xV}function oA(n){var e;const t=(e=n[yp])!==null&&e!==void 0?e:"";n[yp]=(t+` ${NV}`).trimStart()}function MV(n){return n!==null&&typeof n=="object"&&n instanceof _m}function DV(n){return oi(this,arguments,function*(t,o=100){let r,l=0;for(;l<o;){const c=yield Ce(t.listTools({cursor:r}));for(const d of c.tools)yield yield Ce(d),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class _m{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new _m(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var d=!0,y=(t=void 0,si(DV(v))),m;m=await y.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const T=r;c.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(o=y.return)&&await o.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),cx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function VV(n,e,t){const o=new nx;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(o,r),e(o)}class PV{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=kV(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(Z=>{m=Z}),T=e.callbacks,S=function(){m({})},I=this.apiClient,L={onopen:S,onmessage:Z=>{VV(I,T.onmessage,Z)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(Z){}},B=this.webSocketFactory.create(y,LV(c),L);B.connect(),await v;const oe={setup:{model:Ke(this.apiClient,e.model)}};return B.send(JSON.stringify(oe)),new UV(B,this.apiClient)}}class UV{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=aD(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=rD(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(kr.PLAY)}pause(){this.sendPlaybackControl(kr.PAUSE)}stop(){this.sendPlaybackControl(kr.STOP)}resetContext(){this.sendPlaybackControl(kr.RESET_CONTEXT)}close(){this.conn.close()}}function LV(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function kV(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function qV(n,e,t){const o=new tx;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=cD(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class BV{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new PV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&iA(e.config.tools)&&oA(T);const S=zV(T);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const b=this.apiClient.getApiKey();let U="BidiGenerateContent",P="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",P="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${U}?${P}=${b}`}let I=()=>{};const L=new Promise(b=>{I=b}),B=e.callbacks,D=function(){var b;(b=B==null?void 0:B.onopen)===null||b===void 0||b.call(B),I({})},Q=this.apiClient,oe={onopen:D,onmessage:b=>{qV(Q,B.onmessage,b)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(b){},onclose:(o=B==null?void 0:B.onclose)!==null&&o!==void 0?o:function(b){}},Z=this.webSocketFactory.create(v,HV(S),oe);Z.connect(),await L;let se=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const b=this.apiClient.getProject(),U=this.apiClient.getLocation();se=`projects/${b}/locations/${U}/`+se}let fe={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$c.AUDIO]}:e.config.responseModalities=[$c.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],x=[];for(const b of ue)if(this.isCallableTool(b)){const U=b;x.push(await U.tool())}else x.push(b);x.length>0&&(e.config.tools=x);const N={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=sD(this.apiClient,N):fe=oD(this.apiClient,N),delete fe.config,Z.send(JSON.stringify(fe)),new FV(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GV={turnComplete:!0};class FV{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=Hn(t.turns),e.isVertexAI()||(o=o.map(r=>vf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(OV)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},GV),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:uD(e)}:t={realtimeInput:lD(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function HV(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function zV(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NT=10;function xT(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(zr(c)){r=!0;break}if(!r)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function zr(n){return"callTool"in n&&typeof n.callTool=="function"}function YV(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>zr(r)))!==null&&o!==void 0?o:!1}function MT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,r)=>{if(zr(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function DT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JV extends ro{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,c,d;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!YV(t)||xT(t.config))return await this.generateContentInternal(y);const m=MT(t);if(m.length>0){const B=m.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let v,T;const S=Hn(y.contents),I=(l=(r=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:NT;let L=0;for(;L<I&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const B=v.candidates[0].content,D=[];for(const Q of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(zr(Q)){const Z=await Q.callTool(v.functionCalls);D.push(...Z)}L++,T={role:"user",parts:D},y.contents=Hn(y.contents),y.contents.push(B),y.contents.push(T),DT(y.config)&&(S.push(B),S.push(T))}return DT(y.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var o,r,l,c,d;if(this.maybeMoveToResponseJsonSchem(t),xT(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const y=MT(t);if(y.length>0){const T=y.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(d=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const c=[];if(o!=null&&o.generatedImages)for(const y of o.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:c.push(y);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async t=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Hs(so.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var o,r,l,c,d,y;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((y=(d=t.source)===null||d===void 0?void 0:d.video)===null||y===void 0)&&y.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async y=>zr(y)?await y.tool():y)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&iA(e.config.tools)){const y=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),oA(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const c of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(zr(c)){const d=c,y=await d.tool();for(const m of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:NT;let c=!1,d=0;const y=await this.initAfcToolsMap(e);return(function(m,v,T){return oi(this,arguments,function*(){for(var S,I,L,B,D,Q;d<l;){c&&(d++,c=!1);const fe=yield Ce(m.processParamsMaybeAddMcpUsage(T)),ue=yield Ce(m.generateContentStreamInternal(fe)),x=[],N=[];try{for(var oe=!0,Z=(I=void 0,si(ue)),se;se=yield Ce(Z.next()),S=se.done,!S;oe=!0){B=se.value,oe=!1;const b=B;if(yield yield Ce(b),b.candidates&&(!((D=b.candidates[0])===null||D===void 0)&&D.content)){N.push(b.candidates[0].content);for(const U of(Q=b.candidates[0].content.parts)!==null&&Q!==void 0?Q:[])if(d<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(U.functionCall.name)){const P=yield Ce(v.get(U.functionCall.name).callTool([U.functionCall]));x.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(b){I={error:b}}finally{try{!oe&&!S&&(L=Z.return)&&(yield Ce(L.call(Z)))}finally{if(I)throw I.error}}if(x.length>0){c=!0;const b=new ml;b.candidates=[{content:{role:"user",parts:x}}],yield yield Ce(b);const U=[];U.push(...N),U.push({role:"user",parts:x});const P=Hn(T.contents).concat(U);T.contents=P}else break}})})(this,y,e)}async generateContentInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=RT(this.apiClient,e);return d=ce("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=wT(v),S=new ml;return Object.assign(S,T),S})}else{const m=CT(this.apiClient,e);return d=ce("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=IT(v),S=new ml;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=RT(this.apiClient,e);return d=ce("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(T){return oi(this,arguments,function*(){var S,I,L,B;try{for(var D=!0,Q=si(T),oe;oe=yield Ce(Q.next()),S=oe.done,!S;D=!0){B=oe.value,D=!1;const Z=B,se=wT(yield Ce(Z.json()));se.sdkHttpResponse={headers:Z.headers};const fe=new ml;Object.assign(fe,se),yield yield Ce(fe)}}catch(Z){I={error:Z}}finally{try{!D&&!S&&(L=Q.return)&&(yield Ce(L.call(Q)))}finally{if(I)throw I.error}}})})}else{const m=CT(this.apiClient,e);return d=ce("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(T){return oi(this,arguments,function*(){var S,I,L,B;try{for(var D=!0,Q=si(T),oe;oe=yield Ce(Q.next()),S=oe.done,!S;D=!0){B=oe.value,D=!1;const Z=B,se=IT(yield Ce(Z.json()));se.sdkHttpResponse={headers:Z.headers};const fe=new ml;Object.assign(fe,se),yield yield Ce(fe)}}catch(Z){I={error:Z}}finally{try{!D&&!S&&(L=Q.return)&&(yield Ce(L.call(Q)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=BD(this.apiClient,e);return d=ce("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=FD(v),S=new aT;return Object.assign(S,T),S})}else{const m=qD(this.apiClient,e);return d=ce("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=GD(v),S=new aT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=jD(this.apiClient,e);return d=ce("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=t2(v),S=new lT;return Object.assign(S,T),S})}else{const m=ZD(this.apiClient,e);return d=ce("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=e2(v),S=new lT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=UD(this.apiClient,e);return l=ce("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=LD(y),v=new zN;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=j2(this.apiClient,e);return l=ce("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=eV(y),v=new YN;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=P2(this.apiClient,e);return l=ce("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=U2(y),v=new JN;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=G2(this.apiClient,e);return l=ce("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=F2(y),v=new KN;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=_2(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>gp(v))}else{const m=y2(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>mp(v))}}async listInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=w2(this.apiClient,e);return d=ce("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=N2(v),S=new uT;return Object.assign(S,T),S})}else{const m=I2(this.apiClient,e);return d=ce("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=b2(v),S=new uT;return Object.assign(S,T),S})}}async update(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=W2(this.apiClient,e);return d=ce("{model}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>gp(v))}else{const m=$2(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>mp(v))}}async delete(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=MD(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=VD(v),S=new cT;return Object.assign(S,T),S})}else{const m=xD(this.apiClient,e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=DD(v),S=new cT;return Object.assign(S,T),S})}}async countTokens(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=wD(this.apiClient,e);return d=ce("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=ND(v),S=new fT;return Object.assign(S,T),S})}else{const m=ID(this.apiClient,e);return d=ce("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=bD(v),S=new fT;return Object.assign(S,T),S})}}async computeTokens(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=vD(this.apiClient,e);return l=ce("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=TD(y),v=new QN;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=a2(this.apiClient,e);return d=ce("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const T=s2(v),S=new Wc;return Object.assign(S,T),S})}else{const m=r2(this.apiClient,e);return d=ce("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const T=o2(v),S=new Wc;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KV extends ro{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=ON(e);return d=ce("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const m=kN(e);return d=ce("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=xN(e);return l=ce("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QV(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function XV(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>oP(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function $V(n,e,t){const o={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],iP(n,d));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&h(t,["fieldMask"],y),o}function WV(n,e){const t={},o=f(e,["config"]);return o!=null&&h(t,["config"],$V(n,o,t)),t}function ZV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function jV(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function tP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function nP(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],ym(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&h(e,["setup","systemInstruction"],XV(sn(L)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=aa(B);Array.isArray(ue)&&(ue=ue.map(x=>rP(ra(x)))),h(e,["setup","tools"],ue)}const D=f(n,["sessionResumption"]);e!==void 0&&D!=null&&h(e,["setup","sessionResumption"],sP(D));const Q=f(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&h(e,["setup","inputAudioTranscription"],Q);const oe=f(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&h(e,["setup","outputAudioTranscription"],oe);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&h(e,["setup","contextWindowCompression"],se);const fe=f(n,["proactivity"]);if(e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function iP(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],Ke(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],nP(r,t)),t}function oP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],ZV(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],jV(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&h(e,["inlineData"],QV(y));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function sP(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rP(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),h(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&h(e,["googleMaps"],eP(c));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],tP(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&h(e,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aP(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function lP(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=aP(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const y=[];l&&y.push(l),d.length>0&&y.push(...d),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class uP extends ro{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=WV(this.apiClient,e);l=ce("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const y=lP(d,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cP(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function fP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&cP(o,e),e}function dP(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function hP(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function pP(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const o=f(n,["config"]);return o!=null&&hP(o,e),e}function mP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gP extends ro{constructor(e){super(),this.apiClient=e,this.list=async t=>new Hs(so.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=dP(e);return l=ce("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fP(e);r=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pP(e);return l=ce("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=mP(y),v=new XN;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yP extends ro{constructor(e,t=new gP(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new Hs(so.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aV(e);return l=ce("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cV(e);return l=ce("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=uV(e);r=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gV(e);return l=ce("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=yV(y),v=new $N;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_V(e);return l=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=vV(y),v=new WN;return Object.assign(v,m),v})}}async importFile(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hV(e);return l=ce("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=dV(y),v=new dm;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return sA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^t()&15>>+o/4).toString(16))};const _P=()=>sA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _p(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const vp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zn extends Error{}class cn extends zn{constructor(e,t,o,r){super(`${cn.makeMessage(e,t,o)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,o){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,o,r){if(!e||!r)return new Sf({message:o,cause:vp(t)});const l=t;return e===400?new aA(e,l,o,r):e===401?new lA(e,l,o,r):e===403?new uA(e,l,o,r):e===404?new cA(e,l,o,r):e===409?new fA(e,l,o,r):e===422?new dA(e,l,o,r):e===429?new hA(e,l,o,r):e>=500?new pA(e,l,o,r):new cn(e,l,o,r)}}class Tp extends cn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Sf extends cn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class rA extends Sf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class aA extends cn{}class lA extends cn{}class uA extends cn{}class cA extends cn{}class fA extends cn{}class dA extends cn{}class hA extends cn{}class pA extends cn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vP=/^[a-z][a-z0-9+.-]*:/i,TP=n=>vP.test(n);let Ep=n=>(Ep=Array.isArray,Ep(n));const EP=Ep;let SP=EP;const VT=SP;function AP(n){if(!n)return!0;for(const e in n)return!1;return!0}function CP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const RP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new zn(`${n} must be an integer`);if(e<0)throw new zn(`${n} must be a positive integer`);return e},IP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const NP=()=>{var n,e,t,o,r;const l=bP();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":UT(Deno.build.os),"X-Stainless-Arch":PT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":UT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":PT((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=xP();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const o=t.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,c=o[3]||0;return{browser:e,version:`${r}.${l}.${c}`}}}return null}const PT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",UT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Ec;const MP=()=>Ec??(Ec=NP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function mA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function VP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return mA({start(){},async pull(t){const{done:o,value:r}=await e.next();o?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function gA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function PP(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Oh(n,e,t){return yA(),new File(n,e??"unknown_file",t)}function LP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const kP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _A=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",OP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&_A(n),qP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function BP(n,e,t){if(yA(),n=await n,OP(n))return n instanceof File?n:Oh([await n.arrayBuffer()],n.name);if(qP(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Oh(await Sp(r),e,t)}const o=await Sp(n);if(e||(e=LP(n)),!(t!=null&&t.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Oh(o,e,t)}async function Sp(n){var e,t,o,r,l;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(_A(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(kP(n))try{for(var d=!0,y=si(n),m;m=await y.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const v=r;c.push(...await Sp(v))}}catch(v){t={error:v}}finally{try{!d&&!e&&(o=y.return)&&await o.call(y)}finally{if(t)throw t.error}}else{const v=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${GP(n)}`)}return c}function GP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vA{constructor(e){this._client=e}}vA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const LT=Object.freeze(Object.create(null)),FP=(n=TA)=>(function(t,...o){if(t.length===1)return t[0];let r=!1;const l=[],c=t.reduce((v,T,S)=>{var I,L,B;/[?#]/.test(T)&&(r=!0);const D=o[S];let Q=(r?encodeURIComponent:n)(""+D);return S!==o.length&&(D==null||typeof D=="object"&&D.toString===((B=Object.getPrototypeOf((L=Object.getPrototypeOf((I=D.hasOwnProperty)!==null&&I!==void 0?I:LT))!==null&&L!==void 0?L:LT))===null||B===void 0?void 0:B.toString))&&(Q=D+"",l.push({start:v.length+T.length,length:Q.length,error:`Value of type ${Object.prototype.toString.call(D).slice(8,-1)} is not a valid path parameter`})),v+T+(S===o.length?"":Q)},""),d=c.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(d))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,T)=>v.start-T.start),l.length>0){let v=0;const T=l.reduce((S,I)=>{const L=" ".repeat(I.start-v),B="^".repeat(I.length);return v=I.start+I.length,S+L+B},"");throw new zn(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${T}`)}return c}),Sc=FP(TA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EA extends vA{create(e,t){var o;const{api_version:r=this._client.apiVersion}=e,l=jc(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new zn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new zn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Sc`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Sc`/${r}/interactions/${e}`,o)}cancel(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Sc`/${r}/interactions/${e}/cancel`,o)}get(e,t={},o){var r;const l=t??{},{api_version:c=this._client.apiVersion}=l,d=jc(l,["api_version"]);return this._client.get(Sc`/${c}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}EA._key=Object.freeze(["interactions"]);class SA extends EA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HP(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let o=0;for(const r of n)t.set(r,o),o+=r.length;return t}let Ac;function vm(n){let e;return(Ac??(e=new globalThis.TextEncoder,Ac=e.encode.bind(e)))(n)}let Cc;function kT(n){let e;return(Cc??(e=new globalThis.TextDecoder,Cc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Af{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?vm(e):e;this.buffer=HP([this.buffer,t]);const o=[];let r;for(;(r=zP(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(kT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=kT(this.buffer.subarray(0,l));o.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Af.NEWLINE_CHARS=new Set([`
`,"\r"]);Af.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function zP(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function YP(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ef={off:0,error:200,warn:300,info:400,debug:500},OT=(n,e,t)=>{if(n){if(CP(ef,n))return n;un(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ef))}`)}};function Tl(){}function Rc(n,e,t){return!e||ef[n]>ef[t]?Tl:e[n].bind(e)}const JP={error:Tl,warn:Tl,info:Tl,debug:Tl};let qT=new WeakMap;function un(n){var e;const t=n.logger,o=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return JP;const r=qT.get(t);if(r&&r[0]===o)return r[1];const l={error:Rc("error",t,o),warn:Rc("warn",t,o),info:Rc("info",t,o),debug:Rc("debug",t,o)};return qT.set(t,[o,l]),l}const Us=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Or{constructor(e,t,o){this.iterator=e,this.controller=t,this.client=o}static fromSSEResponse(e,t,o){let r=!1;const l=o?un(o):console;function c(){return oi(this,arguments,function*(){var y,m,v,T;if(r)throw new zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var I=!0,L=si(KP(e,t)),B;B=yield Ce(L.next()),y=B.done,!y;I=!0){T=B.value,I=!1;const D=T;if(!S)if(D.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ce(JSON.parse(D.data))}catch(Q){throw l.error("Could not parse message into JSON:",D.data),l.error("From chunk:",D.raw),Q}}}catch(D){m={error:D}}finally{try{!I&&!y&&(v=L.return)&&(yield Ce(v.call(L)))}finally{if(m)throw m.error}}S=!0}catch(D){if(_p(D))return yield Ce(void 0);throw D}finally{S||t.abort()}})}return new Or(c,t,o)}static fromReadableStream(e,t,o){let r=!1;function l(){return oi(this,arguments,function*(){var y,m,v,T;const S=new Af,I=gA(e);try{for(var L=!0,B=si(I),D;D=yield Ce(B.next()),y=D.done,!y;L=!0){T=D.value,L=!1;const Q=T;for(const oe of S.decode(Q))yield yield Ce(oe)}}catch(Q){m={error:Q}}finally{try{!L&&!y&&(v=B.return)&&(yield Ce(v.call(B)))}finally{if(m)throw m.error}}for(const Q of S.flush())yield yield Ce(Q)})}function c(){return oi(this,arguments,function*(){var y,m,v,T;if(r)throw new zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var I=!0,L=si(l()),B;B=yield Ce(L.next()),y=B.done,!y;I=!0){T=B.value,I=!1;const D=T;S||D&&(yield yield Ce(JSON.parse(D)))}}catch(D){m={error:D}}finally{try{!I&&!y&&(v=L.return)&&(yield Ce(v.call(L)))}finally{if(m)throw m.error}}S=!0}catch(D){if(_p(D))return yield Ce(void 0);throw D}finally{S||t.abort()}})}return new Or(c,t,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=o.next();e.push(c),t.push(c)}return l.shift()}});return[new Or(()=>r(e),this.controller,this.client),new Or(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return mA({async start(){t=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await t.next();if(l)return o.close();const c=vm(JSON.stringify(r)+`
`);o.enqueue(c)}catch(r){o.error(r)}},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}}function KP(n,e){return oi(this,arguments,function*(){var o,r,l,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new zn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new zn("Attempted to iterate over a response with no body");const d=new XP,y=new Af,m=gA(n.body);try{for(var v=!0,T=si(QP(m)),S;S=yield Ce(T.next()),o=S.done,!o;v=!0){c=S.value,v=!1;const I=c;for(const L of y.decode(I)){const B=d.decode(L);B&&(yield yield Ce(B))}}}catch(I){r={error:I}}finally{try{!v&&!o&&(l=T.return)&&(yield Ce(l.call(T)))}finally{if(r)throw r.error}}for(const I of y.flush()){const L=d.decode(I);L&&(yield yield Ce(L))}})}function QP(n){return oi(this,arguments,function*(){var t,o,r,l;let c=new Uint8Array;try{for(var d=!0,y=si(n),m;m=yield Ce(y.next()),t=m.done,!t;d=!0){l=m.value,d=!1;const v=l;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?vm(v):v;let S=new Uint8Array(c.length+T.length);S.set(c),S.set(T,c.length),c=S;let I;for(;(I=YP(c))!==-1;)yield yield Ce(c.slice(0,I)),c=c.slice(I)}}catch(v){o={error:v}}finally{try{!d&&!t&&(r=y.return)&&(yield Ce(r.call(y)))}finally{if(o)throw o.error}}c.length>0&&(yield yield Ce(c))})}class XP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,o,r]=$P(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function $P(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function WP(n,e){const{response:t,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,c=await(async()=>{var d;if(e.options.stream)return un(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Or.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const y=t.headers.get("content-type"),m=(d=y==null?void 0:y.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await t.json():await t.text()})();return un(n).debug(`[${o}] response parsed`,Us({retryOfRequestLogID:r,url:t.url,status:t.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tm extends Promise{constructor(e,t,o=WP){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Tm(this.client,this.responsePromise,async(t,o)=>e(await this.parseResponse(t,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AA=Symbol("brand.privateNullableHeaders");function*ZP(n){if(!n)return;if(AA in n){const{values:o,nulls:r}=n;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():VT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let o of t){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=VT(o[1])?o[1]:[o[1]];let c=!1;for(const d of l)d!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,d])}}const gl=n=>{const e=new Headers,t=new Set;for(const o of n){const r=new Set;for(const[l,c]of ZP(o)){const d=l.toLowerCase();r.has(d)||(e.delete(l),r.add(d)),c===null?(e.delete(l),t.add(d)):(e.append(l,c),t.delete(d))}}return{[AA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qh=n=>{var e,t,o,r,l,c;if(typeof globalThis.process<"u")return(o=(t=(e=CN)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CA;class Cf{constructor(e){var t,o,r,l,c,d,y,{baseURL:m=qh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=qh("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=jc(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:v,apiVersion:T},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(o=I.timeout)!==null&&o!==void 0?o:Cf.DEFAULT_TIMEOUT,this.logger=(r=I.logger)!==null&&r!==void 0?r:console;const L="warn";this.logLevel=L,this.logLevel=(c=(l=OT(I.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:OT(qh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:L,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(y=I.fetch)!==null&&y!==void 0?y:DP(),this.encoder=UP,this._options=I,this.apiKey=v,this.apiVersion=T,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=gl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return gl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return gl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,o])=>typeof o<"u").map(([t,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(t)}=`;throw new zn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Lr}`}defaultIdempotencyKey(){return`stainless-node-retry-${_P()}`}makeStatusError(e,t,o,r){return cn.generate(e,t,o,r)}buildURL(e,t,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=TP(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return AP(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:o}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Tm(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,o){var r,l,c;const d=await e,y=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=y),await this.prepareOptions(d);const{req:m,url:v,timeout:T}=await this.buildRequest(d,{retryCount:y-t});await this.prepareRequest(m,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=o===void 0?"":`, retryOf: ${o}`,L=Date.now();if(un(this).debug(`[${S}] sending request`,Us({retryOfRequestLogID:o,method:d.method,url:v,options:d,headers:m.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Tp;const B=new AbortController,D=await this.fetchWithTimeout(v,m,T,B).catch(vp),Q=Date.now();if(D instanceof globalThis.Error){const Z=`retrying, ${t} attempts remaining`;if(!((c=d.signal)===null||c===void 0)&&c.aborted)throw new Tp;const se=_p(D)||/timed? ?out/i.test(String(D)+("cause"in D?String(D.cause):""));if(t)return un(this).info(`[${S}] connection ${se?"timed out":"failed"} - ${Z}`),un(this).debug(`[${S}] connection ${se?"timed out":"failed"} (${Z})`,Us({retryOfRequestLogID:o,url:v,durationMs:Q-L,message:D.message})),this.retryRequest(d,t,o??S);throw un(this).info(`[${S}] connection ${se?"timed out":"failed"} - error; no more retries left`),un(this).debug(`[${S}] connection ${se?"timed out":"failed"} (error; no more retries left)`,Us({retryOfRequestLogID:o,url:v,durationMs:Q-L,message:D.message})),se?new rA:new Sf({cause:D})}const oe=`[${S}${I}] ${m.method} ${v} ${D.ok?"succeeded":"failed"} with status ${D.status} in ${Q-L}ms`;if(!D.ok){const Z=await this.shouldRetry(D);if(t&&Z){const b=`retrying, ${t} attempts remaining`;return await PP(D.body),un(this).info(`${oe} - ${b}`),un(this).debug(`[${S}] response error (${b})`,Us({retryOfRequestLogID:o,url:D.url,status:D.status,headers:D.headers,durationMs:Q-L})),this.retryRequest(d,t,o??S,D.headers)}const se=Z?"error; no more retries left":"error; not retryable";un(this).info(`${oe} - ${se}`);const fe=await D.text().catch(b=>vp(b).message),ue=IP(fe),x=ue?void 0:fe;throw un(this).debug(`[${S}] response error (${se})`,Us({retryOfRequestLogID:o,url:D.url,status:D.status,headers:D.headers,message:x,durationMs:Date.now()-L})),this.makeStatusError(D.status,ue,x,D.headers)}return un(this).info(oe),un(this).debug(`[${S}] response start`,Us({retryOfRequestLogID:o,url:D.url,status:D.status,headers:D.headers,durationMs:Q-L})),{response:D,options:d,controller:B,requestLogID:S,retryOfRequestLogID:o,startTime:L}}async fetchWithTimeout(e,t,o,r){const l=t||{},{signal:c,method:d}=l,y=jc(l,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),o),v=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),y);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(m)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,o,r){var l;let c;const d=r==null?void 0:r.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(c=m)}const y=r==null?void 0:r.get("retry-after");if(y&&!c){const m=parseFloat(y);Number.isNaN(m)?c=Date.parse(y)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,m)}return await wP(c),this.makeRequest(e,t-1,o)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var o,r,l;const c=Object.assign({},e),{method:d,path:y,query:m,defaultBaseURL:v}=c,T=this.buildURL(y,m,v);"timeout"in c&&RP("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:I}=this.buildBody({options:c}),L=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:L},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let d=gl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),MP()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=gl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:VP(e)}:this.encoder({body:e,headers:o})}}Cf.DEFAULT_TIMEOUT=6e4;class zt extends Cf{constructor(){super(...arguments),this.interactions=new SA(this)}}CA=zt;zt.GeminiNextGenAPIClient=CA;zt.GeminiNextGenAPIClientError=zn;zt.APIError=cn;zt.APIConnectionError=Sf;zt.APIConnectionTimeoutError=rA;zt.APIUserAbortError=Tp;zt.NotFoundError=cA;zt.ConflictError=fA;zt.RateLimitError=hA;zt.BadRequestError=aA;zt.AuthenticationError=lA;zt.InternalServerError=pA;zt.PermissionDeniedError=uA;zt.UnprocessableEntityError=dA;zt.toFile=BP;zt.Interactions=SA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jP(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function eU(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function tU(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function nU(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function iU(n,e,t){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const y=f(n,["learningRate"]);if(e!==void 0&&y!=null&&h(e,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function oU(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec"],BT(I))}else if(r==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec"],BT(I))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let y=f(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(y==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(m==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(v==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function sU(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&gU(l);const c=f(n,["config"]);return c!=null&&iU(c,t),t}function rU(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&yU(l,t,e);const c=f(n,["config"]);return c!=null&&oU(c,t,e),t}function aU(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function lU(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function uU(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),o}function cU(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),o}function fU(n,e){const t={},o=f(n,["config"]);return o!=null&&uU(o,t),t}function dU(n,e){const t={},o=f(n,["config"]);return o!=null&&cU(o,t),t}function hU(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>RA(d))),h(t,["tuningJobs"],c)}return t}function pU(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Ap(d))),h(t,["tuningJobs"],c)}return t}function mU(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["model"],o);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function gU(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["examples","examples"],r)}return t}function yU(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function RA(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],GS(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const y=f(n,["tuningTask","completeTime"]);y!=null&&h(t,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],mU(S)),t}function Ap(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],GS(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const y=f(n,["endTime"]);y!=null&&h(t,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&h(t,["error"],v);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const I=f(n,["tunedModel"]);I!=null&&h(t,["tunedModel"],I);const L=f(n,["preTunedModel"]);L!=null&&h(t,["preTunedModel"],L);const B=f(n,["supervisedTuningSpec"]);B!=null&&h(t,["supervisedTuningSpec"],B);const D=f(n,["preferenceOptimizationSpec"]);D!=null&&h(t,["preferenceOptimizationSpec"],D);const Q=f(n,["tuningDataStats"]);Q!=null&&h(t,["tuningDataStats"],Q);const oe=f(n,["encryptionSpec"]);oe!=null&&h(t,["encryptionSpec"],oe);const Z=f(n,["partnerModelTuningSpec"]);Z!=null&&h(t,["partnerModelTuningSpec"],Z);const se=f(n,["customBaseModel"]);se!=null&&h(t,["customBaseModel"],se);const fe=f(n,["experiment"]);fe!=null&&h(t,["experiment"],fe);const ue=f(n,["labels"]);ue!=null&&h(t,["labels"],ue);const x=f(n,["outputUri"]);x!=null&&h(t,["outputUri"],x);const N=f(n,["pipelineJob"]);N!=null&&h(t,["pipelineJob"],N);const b=f(n,["serviceAccount"]);b!=null&&h(t,["serviceAccount"],b);const U=f(n,["tunedModelDisplayName"]);U!=null&&h(t,["tunedModelDisplayName"],U);const P=f(n,["veoTuningSpec"]);return P!=null&&h(t,["veoTuningSpec"],P),t}function _U(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(n,["done"]);c!=null&&h(t,["done"],c);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function BT(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["validationDatasetUri"],o);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vU extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Hs(so.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:fp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=lU(e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Ap(v))}else{const m=aU(e);return d=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>RA(v))}}async listInternal(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=dU(e);return d=ce("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=pU(v),S=new dT;return Object.assign(S,T),S})}else{const m=fU(e);return d=ce("tunedModels",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=hU(v),S=new dT;return Object.assign(S,T),S})}}async cancel(e){var t,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=eU(e);return d=ce("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=nU(v),S=new hT;return Object.assign(S,T),S})}else{const m=jP(e);return d=ce("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=tU(v),S=new hT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=rU(e,e);return l=ce("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>Ap(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sU(e);return l=ce("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>_U(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EU=1024*1024*8,SU=3,AU=1e3,CU=2,tf="x-goog-upload-status";async function RU(n,e,t){var o;const r=await IA(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[tf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function IU(n,e,t){var o;const r=await IA(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[tf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=US(l),d=new hm;return Object.assign(d,c),d}async function IA(n,e,t){var o,r;let l=0,c=0,d=new dp(new Response),y="upload";for(l=n.size;c<l;){const m=Math.min(EU,l-c),v=n.slice(c,c+m);c+m>=l&&(y+=", finalize");let T=0,S=AU;for(;T<SU&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[tf]));)T++,await bU(S),S=S*CU;if(c+=m,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[tf])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function wU(n){return{size:n.size,type:n.type}}function bU(n){return new Promise(e=>setTimeout(e,n))}class NU{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RU(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IU(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xU{create(e,t,o){return new MU(e,t,o)}}class MU{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GT="x-goog-api-key";class DU{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(GT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VU="gl-node/";class Em{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new zt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=bN(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new DU(this.apiKey);this.apiClient=new wV({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:VU+"web",uploader:new NU,downloader:new TU}),this.models=new JV(this.apiClient),this.live=new BV(this.apiClient,r,new xU),this.batches=new iM(this.apiClient),this.chats=new OM(this.models,this.apiClient),this.caches=new UM(this.apiClient),this.files=new QM(this.apiClient),this.operations=new KV(this.apiClient),this.authTokens=new uP(this.apiClient),this.tunings=new vU(this.apiClient),this.fileSearchStores=new yP(this.apiClient)}}const Sm="gemini-3-flash-preview",PU=async(n,e,t,o,r,l)=>{var v;const c=new Em({apiKey:void 0}),d=o.filter(T=>T.category===e).map(T=>`[${T.subCategory} Context]: ${T.prompt}`).join(`
`),y=((v=r.find(T=>T.level===t))==null?void 0:v.prompt)||"",m=`
    You are 'Mirror Sensei', a world-class educational AI tutor specialized in ${e}.
    
    ADMIN TRAINING RULES FOR THIS CATEGORY:
    ${d||"Provide detailed educational analysis."}
    
    DIFFICULTY LEVEL (${t}) RULES:
    ${y||"Adjust vocabulary and complexity to suit the selected level."}
    
    OUTPUT REQUIREMENTS:
    - Primary Language: ${l==="EN"?"English":"Bengali (Bangla)"}.
    - Format: Clear, structured, and easy to read. 
    - Tone: Encouraging, scholarly yet accessible.
    - If the user asks for a specific topic in ${e}, provide deep insights based on the training rules above.
  `;try{return(await c.models.generateContent({model:Sm,contents:n,config:{systemInstruction:m,temperature:.7}})).text||"Sensei is reflecting... please try your question again."}catch(T){return console.error("Gemini Error:",T),"Error: Sensei is currently unavailable. Please check your connection."}},UU=async(n,e)=>{const t=new Em({apiKey:void 0}),o=e==="BN"?`Translate the following English study material into natural, educational Bengali: ${n}`:`Translate the following Bengali study material into clear, academic English: ${n}`;try{return(await t.models.generateContent({model:Sm,contents:o,config:{systemInstruction:"You are a professional academic translator specializing in English and Bengali. Maintain the educational tone.",temperature:.3}})).text||""}catch{return"Translation temporarily unavailable."}},LU=async(n,e)=>{const t=new Em({apiKey:void 0}),o=`
    CONTEXT MATERIAL:
    ${e}
    
    STUDENT QUESTION:
    ${n}
  `;try{return(await t.models.generateContent({model:Sm,contents:o,config:{systemInstruction:"You are an instant Q&A assistant. Answer the student's question based strictly on the provided context material. Be concise and helpful.",temperature:.4}})).text||""}catch{return"QA module failed to load. Please try again."}},Bh=()=>q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[q.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),q.jsx("polyline",{points:"5 12 12 5 19 12"})]}),kU=()=>q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[q.jsx("circle",{cx:"11",cy:"11",r:"8"}),q.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),OU=()=>q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[q.jsx("path",{d:"m16 3 4 4-4 4"}),q.jsx("path",{d:"M20 7H4"}),q.jsx("path",{d:"m8 21-4-4 4-4"}),q.jsx("path",{d:"M4 17h16"})]}),qU=()=>q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:q.jsx("polyline",{points:"15 18 9 12 15 6"})}),FT=()=>q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:q.jsx("polyline",{points:"9 18 15 12 9 6"})}),Gh=()=>q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[q.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),q.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Fh=()=>q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:q.jsx("polyline",{points:"20 6 9 17 4 12"})}),BU=({appState:n,setAppState:e,onLogoClick:t})=>{const[o,r]=Fe.useState([]),[l,c]=Fe.useState(""),[d,y]=Fe.useState(""),[m,v]=Fe.useState(""),[T,S]=Fe.useState(""),[I,L]=Fe.useState(""),[B,D]=Fe.useState(""),[Q,oe]=Fe.useState(""),[Z,se]=Fe.useState(!1),[fe,ue]=Fe.useState(!1),[x,N]=Fe.useState(!1),[b,U]=Fe.useState(!1),[P,G]=Fe.useState(!1),[M,De]=Fe.useState(!1),[at,$]=Fe.useState(!0),[re,ye]=Fe.useState(!0),[Be,Qe]=Fe.useState([]),[O,ee]=Fe.useState([]),le=Fe.useRef(null);Fe.useEffect(()=>{de()},[]);const de=async()=>{const[Ae,st,lo]=await Promise.all([u0(),VS(),PS()]);r(Ae),Qe(st),ee(lo)},Ee=(Ae,st)=>{Ae&&navigator.clipboard.writeText(Ae).then(()=>{st(!0),setTimeout(()=>st(!1),2e3)})},be=async Ae=>{c(Ae);const st=await u0(Ae);r(st)},Ue=async Ae=>{if(Ae.preventDefault(),!d.trim())return;se(!0),L(""),D(""),oe("");const st=await PU(d,n.selectedCategory,n.selectedLevel,Be,O,n.language);L(st),await AN({query:d,response:st,category:n.selectedCategory,level:n.selectedLevel,timestamp:Date.now()}),y(""),se(!1),de()},_t=async Ae=>{if(Ae.preventDefault(),!m.trim())return;ue(!0);const st=await LU(m,I||"No current context.");oe(st),v(""),ue(!1)},lt=async Ae=>{if(Ae.preventDefault(),!T.trim())return;N(!0);const st=await UU(T,n.language==="EN"?"BN":"EN");D(st),N(!1),S("")};return q.jsxs("div",{className:"flex flex-col h-full overflow-hidden bg-amber-50 text-amber-900 font-sans",children:[q.jsxs("header",{className:"h-16 flex items-center bg-amber-50 border-b-2 border-amber-800 flex-shrink-0 relative z-20 px-6",children:[q.jsxs("div",{className:"flex items-center gap-4 cursor-pointer group",onClick:()=>$(!at),title:"Toggle Sidebar",children:[q.jsx("img",{src:"https://i.ibb.co.com/R4zQMn14/1768390383536-2.jpg",className:"w-10 h-10 rounded-lg shadow-sm object-cover border-2 border-amber-800 group-hover:scale-105 transition-all",alt:"Mirror Sensei Logo"}),!at&&q.jsx("span",{className:"text-amber-900 ml-1",children:q.jsx(FT,{})})]}),q.jsx("div",{className:"flex-1 text-center",children:q.jsx("h1",{className:"text-xl font-black text-amber-900 tracking-widest uppercase select-none",children:"Mirror Sensei"})}),!re&&q.jsx("button",{onClick:()=>ye(!0),className:"p-2 border-2 border-amber-800 rounded-lg hover:bg-amber-100 transition-all flex items-center justify-center",title:"Show Assistant",children:q.jsx(qU,{})})]}),q.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[q.jsxs("aside",{className:`${at?"w-80":"w-0 overflow-hidden"} flex flex-col bg-amber-100 border-r-2 border-amber-800 transition-all duration-300`,children:[q.jsxs("div",{className:"p-6 pb-2",children:[q.jsxs("div",{className:"relative mb-4",children:[q.jsx("input",{type:"text",placeholder:"Search history",value:l,onChange:Ae=>be(Ae.target.value),className:"w-full pl-4 pr-12 py-3 bg-amber-50 rounded-xl text-sm font-black border-2 border-amber-800 focus:ring-0 outline-none transition-all shadow-[4px_4px_0px_rgba(107,62,44,0.3)]"}),q.jsx("span",{className:"absolute right-4 top-3.5 text-amber-900",children:q.jsx(kU,{})})]}),q.jsx("button",{onClick:t,className:"w-full py-3 bg-amber-50 border-2 border-amber-800 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-amber-800 hover:text-amber-50 transition-all mb-6 shadow-[4px_4px_0px_rgba(107,62,44,0.3)] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none",children:"Admin Login"})]}),q.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-6",children:[q.jsx("h3",{className:"text-[11px] font-black text-amber-900 uppercase tracking-[0.2em] px-2 mb-4 border-b-2 border-amber-800 pb-1 select-none",children:"Study Log"}),q.jsx("div",{className:"space-y-3",children:o.length>0?o.map(Ae=>q.jsxs("div",{onClick:()=>{L(Ae.response),D("")},className:"p-4 bg-amber-50 rounded-xl border-2 border-amber-800 cursor-pointer hover:bg-amber-800 group transition-all shadow-[3px_3px_0px_rgba(107,62,44,0.2)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px]",children:[q.jsx("p",{className:"text-sm font-black text-amber-900 truncate group-hover:text-amber-50",children:Ae.query}),q.jsxs("p",{className:"text-[10px] text-amber-700 mt-1 font-black uppercase tracking-tighter group-hover:text-amber-100",children:[Ae.category,"  ",Ae.level]})]},Ae.id)):q.jsx("p",{className:"text-xs text-amber-600 italic px-2",children:"No history entries found."})})]})]}),q.jsx("main",{className:"flex-1 flex flex-col bg-amber-50 relative overflow-hidden",children:q.jsxs("div",{className:"flex-1 overflow-y-auto p-12 max-w-5xl mx-auto w-full flex flex-col gap-8",children:[Z?q.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-8",children:[q.jsx("div",{className:"w-16 h-16 border-[8px] border-amber-100 border-t-amber-800 rounded-full animate-spin"}),q.jsx("p",{className:"text-amber-900 text-sm font-black uppercase tracking-[0.3em] animate-pulse",children:"Reflecting Knowledge..."})]}):I?q.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-6 duration-700",children:[q.jsxs("div",{className:"flex justify-between items-center mb-10 pb-4 border-b-4 border-amber-800",children:[q.jsxs("div",{className:"flex gap-3",children:[q.jsx("span",{className:"px-4 py-1.5 bg-amber-800 text-amber-50 text-[11px] font-black rounded uppercase tracking-widest select-none",children:n.selectedCategory}),q.jsx("span",{className:"px-4 py-1.5 bg-amber-100 border-2 border-amber-800 text-amber-900 text-[11px] font-black rounded uppercase tracking-widest select-none",children:n.selectedLevel})]}),q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("button",{onClick:()=>Ee(I,U),className:"p-2 border-2 border-amber-800 rounded-lg hover:bg-amber-100 transition-all flex items-center justify-center bg-amber-50 shadow-[2px_2px_0px_rgba(107,62,44,0.2)] active:shadow-none active:translate-x-[1px] active:translate-y-[1px]",title:"Copy response",children:b?q.jsx(Fh,{}):q.jsx(Gh,{})}),q.jsx("span",{className:"text-[11px] text-amber-900 font-black uppercase border-2 border-amber-800 px-3 py-1 bg-amber-50 select-none",children:new Date().toLocaleTimeString()})]})]}),q.jsx("div",{className:"prose prose-slate max-w-none",children:q.jsx("p",{className:"text-amber-900 leading-[2] whitespace-pre-wrap text-xl font-medium antialiased select-text cursor-auto",children:I})})]}):q.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center select-none",children:[q.jsx("div",{className:"w-28 h-28 bg-amber-50 rounded-3xl flex items-center justify-center mb-10 border-4 border-amber-800 border-dashed",children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",stroke:"#77500d",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[q.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),q.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),q.jsx("h2",{className:"text-3xl font-black text-amber-900 mb-4 uppercase tracking-[0.2em]",children:"Mirror Sensei"}),q.jsx("p",{className:"text-base text-center max-w-lg text-amber-900 font-bold leading-relaxed border-t-2 border-amber-800 pt-4",children:"Deep literature analysis, drama breakdown, and academic excellence. Start by selecting your module below."})]}),q.jsx("div",{className:"h-24"}),q.jsx("div",{ref:le})]})}),q.jsxs("aside",{className:`${re?"w-[400px]":"w-0 overflow-hidden"} bg-amber-50 border-l-2 border-amber-800 flex flex-col transition-all duration-300`,children:[q.jsxs("div",{onClick:()=>ye(!1),className:"p-5 border-b-2 border-amber-800 flex items-center justify-between bg-amber-100 cursor-pointer hover:bg-amber-200 transition-colors group select-none",children:[q.jsxs("h3",{className:"text-xs font-black text-amber-900 uppercase tracking-[0.2em] flex items-center gap-3",children:["Assistant ",q.jsx(FT,{})]}),q.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),e(st=>({...st,language:st.language==="EN"?"BN":"EN"}))},className:"flex items-center gap-3 px-4 py-2 border-2 border-amber-800 rounded-xl text-[11px] font-black tracking-widest transition-all bg-amber-50 hover:bg-amber-800 hover:text-amber-50 shadow-[3px_3px_0px_rgba(107,62,44,0.3)] active:shadow-none active:translate-x-[1px] active:translate-y-[1px]",children:[q.jsx("span",{children:n.language}),q.jsx(OU,{}),q.jsx("span",{className:"opacity-40",children:n.language==="EN"?"BN":"EN"})]})]}),q.jsxs("div",{className:"h-[40%] flex flex-col border-b-2 border-amber-800 overflow-hidden bg-amber-50",children:[q.jsxs("div",{className:"px-5 py-3 bg-amber-800 flex items-center justify-between",children:[q.jsx("h4",{className:"text-[10px] font-black text-amber-50 uppercase tracking-widest select-none",children:"Translator"}),B&&q.jsx("button",{onClick:()=>Ee(B,G),className:"p-1 bg-amber-50 text-amber-900 border-2 border-amber-800 rounded-lg hover:bg-amber-100 transition-all shadow-[2px_2px_0px_rgba(107,62,44,0.2)] active:shadow-none active:translate-x-[1px] active:translate-y-[1px]",title:"Copy translation",children:P?q.jsx(Fh,{}):q.jsx(Gh,{})})]}),q.jsx("div",{className:"flex-1 p-6 overflow-y-auto text-sm text-amber-900 leading-relaxed font-black italic bg-amber-50 select-text",children:x?q.jsx("div",{className:"w-6 h-6 border-[4px] border-amber-100 border-t-amber-800 rounded-full animate-spin mx-auto mt-6"}):B?q.jsx("div",{className:"animate-in fade-in duration-500 bg-amber-100 p-5 rounded-xl border-2 border-amber-800 shadow-[4px_4px_0px_rgba(107,62,44,0.2)] select-text",children:B}):q.jsx("p",{className:"text-amber-600 font-bold uppercase tracking-widest text-[10px] mt-2 select-none",children:"Submit text for live translation"})}),q.jsxs("form",{onSubmit:lt,className:"p-5 bg-amber-50 flex gap-3 border-t-2 border-amber-800",children:[q.jsx("input",{type:"text",placeholder:"Type anything to translate...",value:T,onChange:Ae=>S(Ae.target.value),className:"flex-1 px-4 py-3 bg-amber-50 border-2 border-amber-800 rounded-xl text-sm font-black outline-none focus:bg-amber-100 transition-all shadow-inner"}),q.jsx("button",{type:"submit",disabled:x||!T.trim(),className:"w-12 h-12 bg-amber-800 text-amber-50 rounded-xl flex items-center justify-center shadow-[4px_4px_0px_rgba(107,62,44,0.3)] hover:scale-105 active:scale-95 disabled:opacity-20 transition-all flex-shrink-0 border-2 border-amber-800",children:q.jsx(Bh,{})})]})]}),q.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-amber-50",children:[q.jsxs("div",{className:"px-5 py-3 bg-amber-50 border-b-2 border-amber-800 flex items-center justify-between",children:[q.jsx("h4",{className:"text-[10px] font-black text-amber-900 uppercase tracking-widest select-none",children:"Sensei Q&A"}),Q&&q.jsx("button",{onClick:()=>Ee(Q,De),className:"p-1 bg-amber-50 text-amber-900 border-2 border-amber-800 rounded-lg hover:bg-amber-100 transition-all shadow-[2px_2px_0px_rgba(107,62,44,0.2)] active:shadow-none active:translate-x-[1px] active:translate-y-[1px]",title:"Copy answer",children:M?q.jsx(Fh,{}):q.jsx(Gh,{})})]}),q.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-6 select-text",children:fe?q.jsxs("div",{className:"flex items-center gap-3 text-amber-900 justify-center mt-12",children:[q.jsx("div",{className:"w-3 h-3 bg-amber-800 rounded-full animate-bounce"}),q.jsx("div",{className:"w-3 h-3 bg-amber-800 rounded-full animate-bounce [animation-delay:-0.15s]"}),q.jsx("div",{className:"w-3 h-3 bg-amber-800 rounded-full animate-bounce [animation-delay:-0.3s]"})]}):Q?q.jsxs("div",{className:"bg-amber-100 p-6 rounded-2xl border-4 border-amber-800 shadow-[6px_6px_0px_rgba(107,62,44,0.2)] animate-in zoom-in-95 duration-300 select-text",children:[q.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b-2 border-amber-800 pb-2 select-none",children:[q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#77500d",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:q.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),q.jsx("p",{className:"text-[11px] font-black text-amber-900 uppercase tracking-[0.2em]",children:"Response"})]}),q.jsx("p",{className:"text-base leading-relaxed text-amber-900 font-black antialiased",children:Q})]}):q.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-30 select-none",children:[q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#77500d",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mb-6",children:[q.jsx("circle",{cx:"12",cy:"12",r:"10"}),q.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),q.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),q.jsx("p",{className:"text-xs font-black uppercase tracking-[0.3em] text-center",children:"Awaiting Follow-up"})]})})]})]})]}),q.jsx("footer",{className:"bg-amber-50 border-t-4 border-amber-800 p-8 z-30 shadow-[0_-10px_40px_rgba(107,62,44,0.1)]",children:q.jsxs("div",{className:"max-w-[1920px] mx-auto grid grid-cols-12 gap-10 items-end",children:[q.jsxs("div",{className:"col-span-3 flex flex-col gap-5",children:[q.jsx("div",{className:"flex flex-wrap gap-2",children:["Poem","Drama","Literature","Exam"].map(Ae=>q.jsx("button",{onClick:()=>e(st=>({...st,selectedCategory:Ae})),className:`px-4 py-2.5 rounded-xl text-[10px] font-black tracking-widest transition-all border-2 border-amber-800 ${n.selectedCategory===Ae?"bg-amber-800 text-amber-50 shadow-[4px_4px_0px_rgba(107,62,44,0.3)] scale-[1.02]":"bg-amber-50 text-amber-900 hover:bg-amber-100"}`,children:Ae},Ae))}),q.jsx("div",{className:"flex flex-wrap gap-2",children:["Level 1","Level 2","Level 3"].map(Ae=>q.jsx("button",{onClick:()=>e(st=>({...st,selectedLevel:Ae})),className:`px-4 py-2.5 rounded-xl text-[10px] font-black tracking-widest transition-all border-2 border-amber-800 ${n.selectedLevel===Ae?"bg-amber-700 text-amber-50 shadow-[4px_4px_0px_rgba(107,62,44,0.3)] scale-[1.02]":"bg-amber-50 text-amber-900 hover:bg-amber-100"}`,children:Ae},Ae))})]}),q.jsxs("form",{onSubmit:Ue,className:"col-span-5 relative flex items-center",children:[q.jsx("input",{type:"text",placeholder:`Learn something new about ${n.selectedCategory}...`,value:d,onChange:Ae=>y(Ae.target.value),className:"w-full pl-6 pr-20 py-5 bg-amber-50 border-4 border-amber-800 focus:ring-0 rounded-2xl outline-none transition-all text-base font-black shadow-[8px_8px_0px_rgba(107,62,44,0.2)] placeholder:text-amber-600 placeholder:font-bold"}),q.jsx("button",{type:"submit",disabled:Z||!d.trim(),className:"absolute right-4 w-12 h-12 bg-amber-800 text-amber-50 rounded-xl flex items-center justify-center transition-all shadow-md hover:bg-amber-700 active:scale-95 disabled:opacity-10 border-2 border-amber-50",children:Z?q.jsx("div",{className:"w-6 h-6 border-4 border-amber-50/20 border-t-amber-50 rounded-full animate-spin"}):q.jsx(Bh,{})})]}),q.jsxs("form",{onSubmit:_t,className:"col-span-4 relative flex items-center",children:[q.jsx("input",{type:"text",placeholder:"Ask an instant follow-up...",value:m,onChange:Ae=>v(Ae.target.value),className:"w-full pl-5 pr-16 py-5 bg-amber-100 border-4 border-amber-800 focus:border-amber-800 focus:ring-0 rounded-2xl outline-none transition-all text-sm font-black shadow-[6px_6px_0px_rgba(107,62,44,0.2)] placeholder:text-amber-700"}),q.jsx("button",{type:"submit",disabled:fe||!I||!m.trim(),className:"absolute right-3 w-11 h-11 bg-amber-800 text-amber-50 rounded-xl flex items-center justify-center transition-all shadow-md hover:bg-amber-700 active:scale-95 disabled:opacity-10 border-2 border-amber-50",children:fe?q.jsx("div",{className:"w-5 h-5 border-4 border-amber-50/20 border-t-amber-50 rounded-full animate-spin"}):q.jsx(Bh,{})})]})]})})]})},GU=({onLogout:n})=>{const[e,t]=Fe.useState("Poem"),[o,r]=Fe.useState(""),[l,c]=Fe.useState(""),[d,y]=Fe.useState(!1),[m,v]=Fe.useState([]),[T,S]=Fe.useState([]);Fe.useEffect(()=>{I()},[]);const I=async()=>{const[D,Q]=await Promise.all([VS(),PS()]);v(D),S(Q)},L={Poem:["Line by Line","Scenerio","Q & A"],Drama:["A-Z","Q & A"],Literature:["A-Z","Q & A"],Exam:["Poem","Drama","Literature"],Level:["Level 1","Level 2","Level 3"]};Fe.useEffect(()=>{r(L[e][0])},[e]),Fe.useEffect(()=>{if(e==="Level"){const D=T.find(Q=>Q.level===o);c((D==null?void 0:D.prompt)||"")}else{const D=m.find(Q=>Q.category===e&&Q.subCategory===o);c((D==null?void 0:D.prompt)||"")}},[o,e,m,T]);const B=async()=>{y(!0);try{e==="Level"?await SN(o,l):await EN(e,o,l),await I(),alert("Prompt saved successfully!")}catch{alert("Error saving prompt")}finally{y(!1)}};return q.jsxs("div",{className:"flex flex-col h-full bg-amber-50 text-amber-900 font-sans",children:[q.jsxs("header",{className:"flex items-center justify-between px-8 py-5 bg-amber-50 border-b-4 border-amber-800",children:[q.jsxs("div",{className:"flex items-center gap-5",children:[q.jsx("img",{src:"https://i.ibb.co.com/R4zQMn14/1768390383536-2.jpg",className:"w-12 h-12 rounded-lg object-cover shadow-sm border-2 border-amber-800",alt:"Mirror Sensei Logo"}),q.jsx("h1",{className:"text-2xl font-black text-amber-900 tracking-widest uppercase",children:"Mirror Sensei Admin"})]}),q.jsx("h2",{className:"text-sm font-black absolute left-1/2 -translate-x-1/2 uppercase tracking-[0.4em] text-amber-600",children:"Control Panel"}),q.jsxs("button",{onClick:n,className:"flex items-center gap-3 px-6 py-3 text-amber-900 hover:bg-amber-800 hover:text-amber-50 rounded-xl transition-all font-black group border-4 border-amber-800 text-xs uppercase tracking-widest shadow-[4px_4px_0px_rgba(107,62,44,0.3)] active:shadow-none active:translate-x-[2px] active:translate-y-[2px]",children:[q.jsx("span",{children:"Logout"}),q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"group-hover:translate-x-1 transition-transform",children:[q.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),q.jsx("polyline",{points:"16 17 21 12 16 7"}),q.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})]})]}),q.jsx("main",{className:"flex-1 p-10 overflow-y-auto bg-amber-50",children:q.jsxs("div",{className:"max-w-5xl mx-auto",children:[q.jsx("div",{className:"flex flex-wrap gap-3 mb-12 overflow-x-auto pb-2",children:["Poem","Drama","Literature","Exam","Level"].map(D=>q.jsx("button",{onClick:()=>t(D),className:`px-8 py-3.5 rounded-xl font-black text-xs uppercase tracking-widest transition-all border-4 ${e===D?"bg-amber-800 text-amber-50 border-amber-800 shadow-[6px_6px_0px_rgba(107,62,44,0.3)]":"bg-amber-50 text-amber-900 border-amber-800 hover:bg-amber-100 shadow-[4px_4px_0px_rgba(107,62,44,0.2)]"}`,children:D},D))}),q.jsxs("div",{className:"bg-amber-50 rounded-3xl border-4 border-amber-800 shadow-[10px_10px_0px_rgba(107,62,44,0.2)] overflow-hidden",children:[q.jsx("div",{className:"flex border-b-4 border-amber-800 bg-amber-50",children:L[e].map(D=>q.jsx("button",{onClick:()=>r(D),className:`flex-1 py-5 font-black text-xs uppercase tracking-[0.2em] transition-colors border-r-2 last:border-r-0 border-amber-800 ${o===D?"bg-amber-800 text-amber-50":"text-amber-900 hover:bg-amber-100"}`,children:D},D))}),q.jsxs("div",{className:"p-10",children:[q.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[q.jsx("div",{className:"bg-amber-800 text-amber-50 p-3 rounded-xl",children:q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[q.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),q.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),q.jsx("label",{className:"block text-xs font-black text-amber-900 uppercase tracking-[0.3em]",children:"Sensei Training Guidelines"})]}),q.jsx("textarea",{value:l,onChange:D=>c(D.target.value),className:"w-full h-80 p-8 bg-amber-50 rounded-2xl border-4 border-amber-800 focus:ring-0 outline-none transition-all resize-none text-amber-900 font-bold text-base leading-relaxed placeholder:text-amber-600 shadow-inner",placeholder:"Instruct Sensei on how to handle this specific content..."}),q.jsx("div",{className:"flex justify-end mt-10",children:q.jsxs("button",{onClick:B,disabled:d,className:"px-12 py-4 bg-amber-800 hover:bg-amber-700 text-amber-50 font-black text-xs uppercase tracking-[0.3em] rounded-2xl transition-all shadow-[8px_8px_0px_rgba(107,62,44,0.3)] active:shadow-none active:translate-x-[2px] active:translate-y-[2px] disabled:opacity-20 flex items-center gap-4 border-2 border-amber-50",children:[d?q.jsx("div",{className:"w-5 h-5 border-4 border-amber-50/20 border-t-amber-50 rounded-full animate-spin"}):q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[q.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),q.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),q.jsx("polyline",{points:"7 3 7 8 15 8"})]}),d?"Synchronizing...":"Commit Changes"]})})]})]})]})})]})},FU=({onBack:n,onLogin:e})=>{const[t,o]=Fe.useState(""),[r,l]=Fe.useState(""),[c,d]=Fe.useState(""),y=m=>{m.preventDefault(),t==="Hacker"&&r==="444"?e(!0):d("Invalid credentials")};return q.jsx("div",{className:"flex-1 flex items-center justify-center bg-amber-50 p-6",children:q.jsxs("div",{className:"w-full max-w-sm bg-amber-50 rounded-3xl shadow-[12px_12px_0px_rgba(107,62,44,0.3)] p-12 border-4 border-amber-800",children:[q.jsxs("div",{className:"text-center mb-12",children:[q.jsx("h1",{className:"text-3xl font-black text-amber-900 tracking-widest uppercase",children:"Mirror Sensei"}),q.jsx("p",{className:"text-amber-900 text-[10px] mt-4 font-black uppercase tracking-[0.4em] bg-amber-100 py-1 rounded-full border border-amber-800 inline-block px-4",children:"Admin Hub"})]}),q.jsxs("form",{onSubmit:y,className:"space-y-8",children:[q.jsxs("div",{children:[q.jsx("label",{className:"block text-[11px] font-black text-amber-900 uppercase tracking-[0.2em] mb-3",children:"Username"}),q.jsx("input",{type:"text",value:t,onChange:m=>o(m.target.value),className:"w-full px-5 py-4 rounded-xl border-4 border-amber-800 focus:bg-amber-100 outline-none transition-all text-sm font-black shadow-inner bg-amber-50",placeholder:"HACKER"})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-[11px] font-black text-amber-900 uppercase tracking-[0.2em] mb-3",children:"Passcode"}),q.jsx("input",{type:"password",value:r,onChange:m=>l(m.target.value),className:"w-full px-5 py-4 rounded-xl border-4 border-amber-800 focus:bg-amber-100 outline-none transition-all text-sm font-black shadow-inner bg-amber-50",placeholder:""})]}),c&&q.jsx("p",{className:"text-amber-800 text-xs font-black text-center uppercase tracking-widest animate-pulse border-2 border-amber-800 py-2 rounded-lg",children:c}),q.jsx("button",{type:"submit",className:"w-full py-4.5 bg-amber-800 hover:bg-amber-700 text-amber-50 font-black text-xs uppercase tracking-[0.3em] rounded-2xl transition-all shadow-[6px_6px_0px_rgba(107,62,44,0.3)] active:shadow-none active:translate-x-[2px] active:translate-y-[2px] border-2 border-amber-50",children:"Access Terminal"})]}),q.jsx("button",{onClick:n,className:"w-full mt-10 text-amber-900 text-[10px] font-black uppercase tracking-[0.3em] hover:underline transition-all",children:"Return to Knowledge Base"})]})})},HU=()=>{const[n,e]=Fe.useState({view:"user",language:"EN",selectedCategory:"Poem",selectedLevel:"Level 1"}),[t,o]=Fe.useState(!1),r=()=>e(m=>({...m,view:"login"})),l=()=>e(m=>({...m,view:"user"})),c=()=>e(m=>({...m,view:"admin"})),d=m=>{m&&(o(!0),c())},y=()=>{o(!1),l()};return q.jsxs("div",{className:"h-screen w-full font-sans text-amber-900 bg-amber-50 overflow-hidden flex flex-col",children:[n.view==="user"&&q.jsx(BU,{appState:n,setAppState:e,onLogoClick:r}),n.view==="login"&&q.jsx(FU,{onBack:l,onLogin:d}),n.view==="admin"&&t&&q.jsx(GU,{onLogout:y}),n.view==="admin"&&!t&&q.jsx("div",{className:"flex items-center justify-center h-full",children:q.jsxs("div",{className:"text-center p-8 bg-amber-50 rounded-xl shadow-lg border-2 border-amber-800",children:[q.jsx("h2",{className:"text-2xl font-bold text-amber-800 mb-4",children:"Unauthorized"}),q.jsx("button",{onClick:r,className:"px-6 py-2 bg-amber-700 text-amber-50 rounded-lg hover:bg-amber-800 transition-colors",children:"Go to Login"})]})})]})},wA=document.getElementById("root");if(!wA)throw new Error("Could not find root element to mount to");const zU=mR.createRoot(wA);zU.render(q.jsx(aR.StrictMode,{children:q.jsx(HU,{})}));
